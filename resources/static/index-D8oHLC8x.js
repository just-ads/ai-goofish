import{bI as v,r as k,Z as p}from"./index-C7H9JDPK.js";function m(){let e,a;return{promise:new Promise((n,r)=>{e=n,a=r}),resolve:e,reject:a}}const T=v("task-store",()=>{const e=k([]);let a=!1,i=!1;const{promise:n,resolve:r}=m(),u=s=>e.value.find(t=>t.task_id===s),d=s=>{e.value.push(s)},c=s=>{const t=e.value.findIndex(o=>o.task_id===s);t>-1&&e.value.splice(t,1)},f=s=>{const t=e.value.findIndex(o=>o.task_id===s.task_id);t>=0&&e.value.splice(t,1,s)},l=async()=>{if(!i){i=!0;try{const{data:s,error:t}=await p("/api/tasks").json();!t.value&&s.value&&(e.value=s.value,a=!0)}finally{i=!1,r(e.value)}}};return{get tasks(){return a||l(),e},onReady(){return a||l(),n},getTask:u,addTask:d,removeTask:c,updateTask:f}});export{T as u};
