import{bI as v,r as k,Z as p}from"./index-Dfyd9qne.js";function m(){let e,a;return{promise:new Promise((n,r)=>{e=n,a=r}),resolve:e,reject:a}}const T=v("task-store",()=>{const e=k([]);let a=!1,i=!1;const{promise:n,resolve:r}=m(),u=t=>e.value.find(s=>s.task_id===t),d=t=>{e.value.push(t)},c=t=>{const s=e.value.findIndex(o=>o.task_id===t);s>-1&&e.value.splice(s,1)},f=t=>{const s=e.value.findIndex(o=>o.task_id===t.task_id);s>=0&&e.value.splice(s,1,t)},l=async()=>{if(!i){i=!0;try{const{data:t,error:s}=await p("/api/tasks").json();!s.value&&t.value&&(e.value=t.value,a=!0)}finally{i=!1,r(e.value)}}};return{get tasks(){return a||l(),e},get onReady(){return a||l(),n},getTask:u,addTask:d,removeTask:c,updateTask:f}});export{T as u};
