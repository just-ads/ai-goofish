import{bG as wt,bH as Wt,bI as la,bJ as sa,bK as ia,bL as ra,bM as da,bN as ua,t as ie,ak as ut,s as Ne,d as le,r as D,N as J,c as n,R as we,au as be,v as Fe,B as G,F as ve,P as Je,aq as oe,$ as Xe,k as ue,x as ca,y as pa,bO as va,ah as Ct,S as ye,aw as Me,ar as Le,a$ as fa,z as ma,A as ba,C as Vt,aM as ga,a_ as Gt,aD as Ut,a6 as ya,Q as ha,a9 as _a,a3 as $a,ae as rt,O as xa,ba as wa,V as Ca,U as Ge,G as Sa,ax as Ta,br as ka,bP as Pa,I as ct,a as A,b as v,e as s,aS as ze,w as f,aR as He,h as j,o as x,Y as Ae,u as Y,aU as F,f as Z,ay as Kt,ai as he,be as Ce,aT as V,bQ as Ft,aK as We,av as Xt,bR as qt,n as je,g as M,M as Oe,m as qe,bS as Ia,_ as Oa,i as dt,T as Aa}from"./index-CCBgLzxT.js";import{i as Ea,u as St,S as Qe,a as Ze,D as Ra}from"./index-AU5nmiv0.js";import{_ as pt}from"./index-Dp-e90GW.js";import{P as Ee,_ as Ba,C as La,E as Tt}from"./EditOutlined-BUqjxd9E.js";import{D as vt}from"./DeleteOutlined-CvnByO2A.js";import{T as ft}from"./index-ftY-fN7_.js";import{s as Ie}from"./utils-CaOhPUe8.js";import{u as Na,E as Ma,D as ja,M as Da,_ as za}from"./index-BcnCg2gP.js";import{i as kt}from"./slide-BDFQEEIH.js";function Ha(e,t,o,d){if(!wt(e))return e;t=Wt(t,e);for(var l=-1,a=t.length,r=a-1,i=e;i!=null&&++l<a;){var u=la(t[l]),c=o;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(l!=r){var m=i[u];c=void 0,c===void 0&&(c=wt(m)?m:sa(t[l+1])?[]:{})}ia(i,u,c),i=i[u]}return e}function Wa(e,t,o){for(var d=-1,l=t.length,a={};++d<l;){var r=t[d],i=ra(e,r);o(i,r)&&Ha(a,Wt(r,e),i)}return a}function Va(e,t){return Wa(e,t,function(o,d){return da(e,d)})}var Yt=ua(function(e,t){return e==null?{}:Va(e,t)});function Ga(e){const t=ie(),o=ie(!1);function d(){for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];o.value||(Ne.cancel(t.value),t.value=Ne(()=>{e(...a)}))}return ut(()=>{o.value=!0,Ne.cancel(t.value)}),d}function Ua(e){const t=ie([]),o=ie(typeof e=="function"?e():e),d=Ga(()=>{let a=o.value;t.value.forEach(r=>{a=r(a)}),t.value=[],o.value=a});function l(a){t.value.push(a),d()}return[o,l]}const Ka=le({compatConfig:{MODE:3},name:"TabNode",props:{id:{type:String},prefixCls:{type:String},tab:{type:Object},active:{type:Boolean},closable:{type:Boolean},editable:{type:Object},onClick:{type:Function},onResize:{type:Function},renderWrapper:{type:Function},removeAriaLabel:{type:String},onFocus:{type:Function}},emits:["click","resize","remove","focus"],setup(e,t){let{expose:o,attrs:d}=t;const l=D();function a(u){var c;!((c=e.tab)===null||c===void 0)&&c.disabled||e.onClick(u)}o({domRef:l});function r(u){var c;u.preventDefault(),u.stopPropagation(),e.editable.onEdit("remove",{key:(c=e.tab)===null||c===void 0?void 0:c.key,event:u})}const i=J(()=>{var u;return e.editable&&e.closable!==!1&&!(!((u=e.tab)===null||u===void 0)&&u.disabled)});return()=>{var u;const{prefixCls:c,id:m,active:T,tab:{key:b,tab:p,disabled:$,closeIcon:h},renderWrapper:g,removeAriaLabel:P,editable:S,onFocus:w}=e,O=`${c}-tab`,C=n("div",{key:b,ref:l,class:we(O,{[`${O}-with-remove`]:i.value,[`${O}-active`]:T,[`${O}-disabled`]:$}),style:d.style,onClick:a},[n("div",{role:"tab","aria-selected":T,id:m&&`${m}-tab-${b}`,class:`${O}-btn`,"aria-controls":m&&`${m}-panel-${b}`,"aria-disabled":$,tabindex:$?null:0,onClick:R=>{R.stopPropagation(),a(R)},onKeydown:R=>{[be.SPACE,be.ENTER].includes(R.which)&&(R.preventDefault(),a(R))},onFocus:w},[typeof p=="function"?p():p]),i.value&&n("button",{type:"button","aria-label":P||"remove",tabindex:0,class:`${O}-remove`,onClick:R=>{R.stopPropagation(),r(R)}},[h?.()||((u=S.removeIcon)===null||u===void 0?void 0:u.call(S))||"×"])]);return g?g(C):C}}}),Pt={width:0,height:0,left:0,top:0};function Fa(e,t){const o=D(new Map);return Fe(()=>{var d,l;const a=new Map,r=e.value,i=t.value.get((d=r[0])===null||d===void 0?void 0:d.key)||Pt,u=i.left+i.width;for(let c=0;c<r.length;c+=1){const{key:m}=r[c];let T=t.value.get(m);T||(T=t.value.get((l=r[c-1])===null||l===void 0?void 0:l.key)||Pt);const b=a.get(m)||G({},T);b.right=u-b.left-b.width,a.set(m,b)}o.value=new Map(a)}),o}const Jt=le({compatConfig:{MODE:3},name:"AddButton",inheritAttrs:!1,props:{prefixCls:String,editable:{type:Object},locale:{type:Object,default:void 0}},setup(e,t){let{expose:o,attrs:d}=t;const l=D();return o({domRef:l}),()=>{const{prefixCls:a,editable:r,locale:i}=e;return!r||r.showAdd===!1?null:n("button",{ref:l,type:"button",class:`${a}-nav-add`,style:d.style,"aria-label":i?.addAriaLabel||"Add tab",onClick:u=>{r.onEdit("add",{event:u})}},[r.addIcon?r.addIcon():"+"])}}}),Xa={prefixCls:{type:String},id:{type:String},tabs:{type:Object},rtl:{type:Boolean},tabBarGutter:{type:Number},activeKey:{type:[String,Number]},mobile:{type:Boolean},moreIcon:Je.any,moreTransitionName:{type:String},editable:{type:Object},locale:{type:Object,default:void 0},removeAriaLabel:String,onTabClick:{type:Function},popupClassName:String,getPopupContainer:ve()},qa=le({compatConfig:{MODE:3},name:"OperationNode",inheritAttrs:!1,props:Xa,emits:["tabClick"],slots:Object,setup(e,t){let{attrs:o,slots:d}=t;const[l,a]=oe(!1),[r,i]=oe(null),u=p=>{const $=e.tabs.filter(P=>!P.disabled);let h=$.findIndex(P=>P.key===r.value)||0;const g=$.length;for(let P=0;P<g;P+=1){h=(h+p+g)%g;const S=$[h];if(!S.disabled){i(S.key);return}}},c=p=>{const{which:$}=p;if(!l.value){[be.DOWN,be.SPACE,be.ENTER].includes($)&&(a(!0),p.preventDefault());return}switch($){case be.UP:u(-1),p.preventDefault();break;case be.DOWN:u(1),p.preventDefault();break;case be.ESC:a(!1);break;case be.SPACE:case be.ENTER:r.value!==null&&e.onTabClick(r.value,p);break}},m=J(()=>`${e.id}-more-popup`),T=J(()=>r.value!==null?`${m.value}-${r.value}`:null),b=(p,$)=>{p.preventDefault(),p.stopPropagation(),e.editable.onEdit("remove",{key:$,event:p})};return Xe(()=>{ue(r,()=>{const p=document.getElementById(T.value);p&&p.scrollIntoView&&p.scrollIntoView(!1)},{flush:"post",immediate:!0})}),ue(l,()=>{l.value||i(null)}),Na({}),()=>{var p;const{prefixCls:$,id:h,tabs:g,locale:P,mobile:S,moreIcon:w=((p=d.moreIcon)===null||p===void 0?void 0:p.call(d))||n(Ma,null,null),moreTransitionName:O,editable:C,tabBarGutter:R,rtl:_,onTabClick:L,popupClassName:B}=e;if(!g.length)return null;const k=`${$}-dropdown`,I=P?.dropdownAriaLabel,y={[_?"marginRight":"marginLeft"]:R};g.length||(y.visibility="hidden",y.order=1);const ee=we({[`${k}-rtl`]:_,[`${B}`]:!0}),X=S?null:n(ja,{prefixCls:k,trigger:["hover"],visible:l.value,transitionName:O,onVisibleChange:a,overlayClassName:ee,mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:e.getPopupContainer},{overlay:()=>n(Da,{onClick:H=>{let{key:ce,domEvent:te}=H;L(ce,te),a(!1)},id:m.value,tabindex:-1,role:"listbox","aria-activedescendant":T.value,selectedKeys:[r.value],"aria-label":I!==void 0?I:"expanded dropdown"},{default:()=>[g.map(H=>{var ce,te;const re=C&&H.closable!==!1&&!H.disabled;return n(za,{key:H.key,id:`${m.value}-${H.key}`,role:"option","aria-controls":h&&`${h}-panel-${H.key}`,disabled:H.disabled},{default:()=>[n("span",null,[typeof H.tab=="function"?H.tab():H.tab]),re&&n("button",{type:"button","aria-label":e.removeAriaLabel||"remove",tabindex:0,class:`${k}-menu-item-remove`,onClick:U=>{U.stopPropagation(),b(U,H.key)}},[((ce=H.closeIcon)===null||ce===void 0?void 0:ce.call(H))||((te=C.removeIcon)===null||te===void 0?void 0:te.call(C))||"×"])]})})]}),default:()=>n("button",{type:"button",class:`${$}-nav-more`,style:y,tabindex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":m.value,id:`${h}-more`,"aria-expanded":l.value,onKeydown:c},[w])});return n("div",{class:we(`${$}-nav-operations`,o.class),style:o.style},[X,n(Jt,{prefixCls:$,locale:P,editable:C},null)])}}}),Qt=Symbol("tabsContextKey"),Ya=e=>{pa(Qt,e)},Zt=()=>ca(Qt,{tabs:D([]),prefixCls:D()}),Ja=.1,It=.01,Ke=20,Ot=Math.pow(.995,Ke);function Qa(e,t){const[o,d]=oe(),[l,a]=oe(0),[r,i]=oe(0),[u,c]=oe(),m=D();function T(C){const{screenX:R,screenY:_}=C.touches[0];d({x:R,y:_}),clearInterval(m.value)}function b(C){if(!o.value)return;C.preventDefault();const{screenX:R,screenY:_}=C.touches[0],L=R-o.value.x,B=_-o.value.y;t(L,B),d({x:R,y:_});const k=Date.now();i(k-l.value),a(k),c({x:L,y:B})}function p(){if(!o.value)return;const C=u.value;if(d(null),c(null),C){const R=C.x/r.value,_=C.y/r.value,L=Math.abs(R),B=Math.abs(_);if(Math.max(L,B)<Ja)return;let k=R,I=_;m.value=setInterval(()=>{if(Math.abs(k)<It&&Math.abs(I)<It){clearInterval(m.value);return}k*=Ot,I*=Ot,t(k*Ke,I*Ke)},Ke)}}const $=D();function h(C){const{deltaX:R,deltaY:_}=C;let L=0;const B=Math.abs(R),k=Math.abs(_);B===k?L=$.value==="x"?R:_:B>k?(L=R,$.value="x"):(L=_,$.value="y"),t(-L,-L)&&C.preventDefault()}const g=D({onTouchStart:T,onTouchMove:b,onTouchEnd:p,onWheel:h});function P(C){g.value.onTouchStart(C)}function S(C){g.value.onTouchMove(C)}function w(C){g.value.onTouchEnd(C)}function O(C){g.value.onWheel(C)}Xe(()=>{var C,R;document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("touchend",w,{passive:!1}),(C=e.value)===null||C===void 0||C.addEventListener("touchstart",P,{passive:!1}),(R=e.value)===null||R===void 0||R.addEventListener("wheel",O,{passive:!1})}),ut(()=>{document.removeEventListener("touchmove",S),document.removeEventListener("touchend",w)})}function At(e,t){const o=D(e);function d(l){const a=typeof l=="function"?l(o.value):l;a!==o.value&&t(a,o.value),o.value=a}return[o,d]}const Za=()=>{const e=D(new Map),t=o=>d=>{e.value.set(o,d)};return va(()=>{e.value=new Map}),[t,e]},Et={width:0,height:0,left:0,top:0,right:0},en=()=>({id:{type:String},tabPosition:{type:String},activeKey:{type:[String,Number]},rtl:{type:Boolean},animated:Me(),editable:Me(),moreIcon:Je.any,moreTransitionName:{type:String},mobile:{type:Boolean},tabBarGutter:{type:Number},renderTabBar:{type:Function},locale:Me(),popupClassName:String,getPopupContainer:ve(),onTabClick:{type:Function},onTabScroll:{type:Function}}),tn=(e,t)=>{const{offsetWidth:o,offsetHeight:d,offsetTop:l,offsetLeft:a}=e,{width:r,height:i,x:u,y:c}=e.getBoundingClientRect();return Math.abs(r-o)<1?[r,i,u-t.x,c-t.y]:[o,d,a,l]},Rt=le({compatConfig:{MODE:3},name:"TabNavList",inheritAttrs:!1,props:en(),slots:Object,emits:["tabClick","tabScroll"],setup(e,t){let{attrs:o,slots:d}=t;const{tabs:l,prefixCls:a}=Zt(),r=ie(),i=ie(),u=ie(),c=ie(),[m,T]=Za(),b=J(()=>e.tabPosition==="top"||e.tabPosition==="bottom"),[p,$]=At(0,(N,E)=>{b.value&&e.onTabScroll&&e.onTabScroll({direction:N>E?"left":"right"})}),[h,g]=At(0,(N,E)=>{!b.value&&e.onTabScroll&&e.onTabScroll({direction:N>E?"top":"bottom"})}),[P,S]=oe(0),[w,O]=oe(0),[C,R]=oe(null),[_,L]=oe(null),[B,k]=oe(0),[I,y]=oe(0),[ee,X]=Ua(new Map),H=Fa(l,ee),ce=J(()=>`${a.value}-nav-operations-hidden`),te=ie(0),re=ie(0);Fe(()=>{b.value?e.rtl?(te.value=0,re.value=Math.max(0,P.value-C.value)):(te.value=Math.min(0,C.value-P.value),re.value=0):(te.value=Math.min(0,_.value-w.value),re.value=0)});const U=N=>N<te.value?te.value:N>re.value?re.value:N,Se=ie(),[ae,Te]=oe(),ke=()=>{Te(Date.now())},z=()=>{clearTimeout(Se.value)},_e=(N,E)=>{N(W=>U(W+E))};Qa(r,(N,E)=>{if(b.value){if(C.value>=P.value)return!1;_e($,N)}else{if(_.value>=w.value)return!1;_e(g,E)}return z(),ke(),!0}),ue(ae,()=>{z(),ae.value&&(Se.value=setTimeout(()=>{Te(0)},100))});const Pe=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activeKey;const E=H.value.get(N)||{width:0,height:0,left:0,right:0,top:0};if(b.value){let W=p.value;e.rtl?E.right<p.value?W=E.right:E.right+E.width>p.value+C.value&&(W=E.right+E.width-C.value):E.left<-p.value?W=-E.left:E.left+E.width>-p.value+C.value&&(W=-(E.left+E.width-C.value)),g(0),$(U(W))}else{let W=h.value;E.top<-h.value?W=-E.top:E.top+E.height>-h.value+_.value&&(W=-(E.top+E.height-_.value)),$(0),g(U(W))}},tt=ie(0),at=ie(0);Fe(()=>{let N,E,W,K,Q,q;const fe=H.value;["top","bottom"].includes(e.tabPosition)?(N="width",K=C.value,Q=P.value,q=B.value,E=e.rtl?"right":"left",W=Math.abs(p.value)):(N="height",K=_.value,Q=P.value,q=I.value,E="top",W=-h.value);let se=K;Q+q>K&&Q<K&&(se=K-q);const pe=l.value;if(!pe.length)return[tt.value,at.value]=[0,0];const me=pe.length;let xe=me;for(let de=0;de<me;de+=1){const ge=fe.get(pe[de].key)||Et;if(ge[E]+ge[N]>W+se){xe=de-1;break}}let ne=0;for(let de=me-1;de>=0;de-=1)if((fe.get(pe[de].key)||Et)[E]<W){ne=de+1;break}return[tt.value,at.value]=[ne,xe]});const bt=()=>{X(()=>{var N;const E=new Map,W=(N=i.value)===null||N===void 0?void 0:N.getBoundingClientRect();return l.value.forEach(K=>{let{key:Q}=K;const q=T.value.get(Q),fe=q?.$el||q;if(fe){const[se,pe,me,xe]=tn(fe,W);E.set(Q,{width:se,height:pe,left:me,top:xe})}}),E})};ue(()=>l.value.map(N=>N.key).join("%%"),()=>{bt()},{flush:"post"});const nt=()=>{var N,E,W,K,Q;const q=((N=r.value)===null||N===void 0?void 0:N.offsetWidth)||0,fe=((E=r.value)===null||E===void 0?void 0:E.offsetHeight)||0,se=((W=c.value)===null||W===void 0?void 0:W.$el)||{},pe=se.offsetWidth||0,me=se.offsetHeight||0;R(q),L(fe),k(pe),y(me);const xe=(((K=i.value)===null||K===void 0?void 0:K.offsetWidth)||0)-pe,ne=(((Q=i.value)===null||Q===void 0?void 0:Q.offsetHeight)||0)-me;S(xe),O(ne),bt()},gt=J(()=>[...l.value.slice(0,tt.value),...l.value.slice(at.value+1)]),[ta,aa]=oe(),$e=J(()=>H.value.get(e.activeKey)),yt=ie(),ht=()=>{Ne.cancel(yt.value)};ue([$e,b,()=>e.rtl],()=>{const N={};$e.value&&(b.value?(e.rtl?N.right=Le($e.value.right):N.left=Le($e.value.left),N.width=Le($e.value.width)):(N.top=Le($e.value.top),N.height=Le($e.value.height))),ht(),yt.value=Ne(()=>{aa(N)})}),ue([()=>e.activeKey,$e,H,b],()=>{Pe()},{flush:"post"}),ue([()=>e.rtl,()=>e.tabBarGutter,()=>e.activeKey,()=>l.value],()=>{nt()},{flush:"post"});const ot=N=>{let{position:E,prefixCls:W,extra:K}=N;if(!K)return null;const Q=K?.({position:E});return Q?n("div",{class:`${W}-extra-content`},[Q]):null};return ut(()=>{z(),ht()}),()=>{const{id:N,animated:E,activeKey:W,rtl:K,editable:Q,locale:q,tabPosition:fe,tabBarGutter:se,onTabClick:pe}=e,{class:me,style:xe}=o,ne=a.value,de=!!gt.value.length,ge=`${ne}-nav-wrap`;let lt,st,_t,$t;b.value?K?(st=p.value>0,lt=p.value+C.value<P.value):(lt=p.value<0,st=-p.value+C.value<P.value):(_t=h.value<0,$t=-h.value+_.value<w.value);const Ve={};fe==="top"||fe==="bottom"?Ve[K?"marginRight":"marginLeft"]=typeof se=="number"?`${se}px`:se:Ve.marginTop=typeof se=="number"?`${se}px`:se;const xt=l.value.map((it,na)=>{const{key:Be}=it;return n(Ka,{id:N,prefixCls:ne,key:Be,tab:it,style:na===0?void 0:Ve,closable:it.closable,editable:Q,active:Be===W,removeAriaLabel:q?.removeAriaLabel,ref:m(Be),onClick:oa=>{pe(Be,oa)},onFocus:()=>{Pe(Be),ke(),r.value&&(K||(r.value.scrollLeft=0),r.value.scrollTop=0)}},d)});return n("div",{role:"tablist",class:we(`${ne}-nav`,me),style:xe,onKeydown:()=>{ke()}},[n(ot,{position:"left",prefixCls:ne,extra:d.leftExtra},null),n(Ct,{onResize:nt},{default:()=>[n("div",{class:we(ge,{[`${ge}-ping-left`]:lt,[`${ge}-ping-right`]:st,[`${ge}-ping-top`]:_t,[`${ge}-ping-bottom`]:$t}),ref:r},[n(Ct,{onResize:nt},{default:()=>[n("div",{ref:i,class:`${ne}-nav-list`,style:{transform:`translate(${p.value}px, ${h.value}px)`,transition:ae.value?"none":void 0}},[xt,n(Jt,{ref:c,prefixCls:ne,locale:q,editable:Q,style:G(G({},xt.length===0?void 0:Ve),{visibility:de?"hidden":null})},null),n("div",{class:we(`${ne}-ink-bar`,{[`${ne}-ink-bar-animated`]:E.inkBar}),style:ta.value},null)])]})])]}),n(qa,ye(ye({},e),{},{removeAriaLabel:q?.removeAriaLabel,ref:u,prefixCls:ne,tabs:gt.value,class:!de&&ce.value}),Yt(d,["moreIcon"])),n(ot,{position:"right",prefixCls:ne,extra:d.rightExtra},null),n(ot,{position:"right",prefixCls:ne,extra:d.tabBarExtraContent},null)])}}}),an=le({compatConfig:{MODE:3},name:"TabPanelList",inheritAttrs:!1,props:{activeKey:{type:[String,Number]},id:{type:String},rtl:{type:Boolean},animated:{type:Object,default:void 0},tabPosition:{type:String},destroyInactiveTabPane:{type:Boolean}},setup(e){const{tabs:t,prefixCls:o}=Zt();return()=>{const{id:d,activeKey:l,animated:a,tabPosition:r,rtl:i,destroyInactiveTabPane:u}=e,c=a.tabPane,m=o.value,T=t.value.findIndex(b=>b.key===l);return n("div",{class:`${m}-content-holder`},[n("div",{class:[`${m}-content`,`${m}-content-${r}`,{[`${m}-content-animated`]:c}],style:T&&c?{[i?"marginRight":"marginLeft"]:`-${T}00%`}:null},[t.value.map(b=>fa(b.node,{key:b.key,prefixCls:m,tabKey:b.key,id:d,animated:c,active:b.key===l,destroyInactiveTabPane:u}))])])}}}),nn=e=>{const{componentCls:t,motionDurationSlow:o}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${o}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${o}`}}}}},[kt(e,"slide-up"),kt(e,"slide-down")]]},on=e=>{const{componentCls:t,tabsCardHorizontalPadding:o,tabsCardHeadBackground:d,tabsCardGutter:l,colorSplit:a}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:o,background:d,border:`${e.lineWidth}px ${e.lineType} ${a}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:e.colorPrimary,background:e.colorBgContainer},[`${t}-ink-bar`]:{visibility:"hidden"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:`${l}px`}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:`${l}px`}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadiusLG}px 0 0 ${e.borderRadiusLG}px`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},ln=e=>{const{componentCls:t,tabsHoverColor:o,dropdownEdgeChildVerticalPadding:d}=e;return{[`${t}-dropdown`]:G(G({},Vt(e)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${d}px 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":G(G({},ga),{display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${e.paddingXXS}px ${e.paddingSM}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:o}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},sn=e=>{const{componentCls:t,margin:o,colorSplit:d}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:`0 0 ${o}px 0`,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${e.lineWidth}px ${e.lineType} ${d}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:`${o}px`,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:e.controlHeight*1.25,[`${t}-tab`]:{padding:`${e.paddingXS}px ${e.paddingLG}px`,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:`${e.margin}px 0 0 0`},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:`-${e.lineWidth}px`},borderLeft:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:-e.lineWidth},borderRight:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},rn=e=>{const{componentCls:t,padding:o}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px 0`,fontSize:e.fontSize}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${o}px 0`,fontSize:e.fontSizeLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXXS*1.5}px ${o}px`}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${e.borderRadius}px ${e.borderRadius}px`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${e.borderRadius}px ${e.borderRadius}px 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadius}px ${e.borderRadius}px 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadius}px 0 0 ${e.borderRadius}px`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px ${o}px ${e.paddingXXS*1.5}px`}}}}}},dn=e=>{const{componentCls:t,tabsActiveColor:o,tabsHoverColor:d,iconCls:l,tabsHorizontalGutter:a}=e,r=`${t}-tab`;return{[r]:{position:"relative",display:"inline-flex",alignItems:"center",padding:`${e.paddingSM}px 0`,fontSize:`${e.fontSize}px`,background:"transparent",border:0,outline:"none",cursor:"pointer","&-btn, &-remove":G({"&:focus:not(:focus-visible), &:active":{color:o}},Gt(e)),"&-btn":{outline:"none",transition:"all 0.3s"},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:-e.marginXXS},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading}},"&:hover":{color:d},[`&${r}-active ${r}-btn`]:{color:e.colorPrimary,textShadow:e.tabsActiveTextShadow},[`&${r}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${r}-disabled ${r}-btn, &${r}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${r}-remove ${l}`]:{margin:0},[l]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${r} + ${r}`]:{margin:{_skip_check_:!0,value:`0 0 0 ${a}px`}}}},un=e=>{const{componentCls:t,tabsHorizontalGutter:o,iconCls:d,tabsCardGutter:l}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:`0 0 0 ${o}px`},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[d]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:`${e.marginSM}px`}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:`${e.marginXS}px`},marginLeft:{_skip_check_:!0,value:`-${e.marginXXS}px`},[d]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:`${l}px`},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},cn=e=>{const{componentCls:t,tabsCardHorizontalPadding:o,tabsCardHeight:d,tabsCardGutter:l,tabsHoverColor:a,tabsActiveColor:r,colorSplit:i}=e;return{[t]:G(G(G(G({},Vt(e)),{display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:o,background:"transparent",border:0,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.controlHeightLG/8,transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:G({minWidth:`${d}px`,marginLeft:{_skip_check_:!0,value:`${l}px`},padding:`0 ${e.paddingXS}px`,background:"transparent",border:`${e.lineWidth}px ${e.lineType} ${i}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:a},"&:active, &:focus:not(:focus-visible)":{color:r}},Gt(e))},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.colorPrimary,pointerEvents:"none"}}),dn(e)),{[`${t}-content`]:{position:"relative",display:"flex",width:"100%","&-animated":{transition:"margin 0.3s"}},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:{outline:"none",flex:"none",width:"100%"}}),[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping'])`]:{justifyContent:"center"}}}}}},pn=ma("Tabs",e=>{const t=e.controlHeightLG,o=ba(e,{tabsHoverColor:e.colorPrimaryHover,tabsActiveColor:e.colorPrimaryActive,tabsCardHorizontalPadding:`${(t-Math.round(e.fontSize*e.lineHeight))/2-e.lineWidth}px ${e.padding}px`,tabsCardHeight:t,tabsCardGutter:e.marginXXS/2,tabsHorizontalGutter:32,tabsCardHeadBackground:e.colorFillAlter,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120});return[rn(o),un(o),sn(o),ln(o),on(o),cn(o),nn(o)]},e=>({zIndexPopup:e.zIndexPopupBase+50}));let Bt=0;const ea=()=>({prefixCls:{type:String},id:{type:String},popupClassName:String,getPopupContainer:ve(),activeKey:{type:[String,Number]},defaultActiveKey:{type:[String,Number]},direction:Ge(),animated:Ta([Boolean,Object]),renderTabBar:ve(),tabBarGutter:{type:Number},tabBarStyle:Me(),tabPosition:Ge(),destroyInactiveTabPane:Sa(),hideAdd:Boolean,type:Ge(),size:Ge(),centered:Boolean,onEdit:ve(),onChange:ve(),onTabClick:ve(),onTabScroll:ve(),"onUpdate:activeKey":ve(),locale:Me(),onPrevClick:ve(),onNextClick:ve(),tabBarExtraContent:Je.any});function vn(e){return e.map(t=>{if(_a(t)){const o=G({},t.props||{});for(const[b,p]of Object.entries(o))delete o[b],o[$a(b)]=p;const d=t.children||{},l=t.key!==void 0?t.key:void 0,{tab:a=d.tab,disabled:r,forceRender:i,closable:u,animated:c,active:m,destroyInactiveTabPane:T}=o;return G(G({key:l},o),{node:t,closeIcon:d.closeIcon,tab:a,disabled:r===""||r,forceRender:i===""||i,closable:u===""||u,animated:c===""||c,active:m===""||m,destroyInactiveTabPane:T===""||T})}return null}).filter(t=>t)}const fn=le({compatConfig:{MODE:3},name:"InternalTabs",inheritAttrs:!1,props:G(G({},Ut(ea(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}})),{tabs:Ca()}),slots:Object,setup(e,t){let{attrs:o,slots:d}=t;rt(e.onPrevClick===void 0&&e.onNextClick===void 0,"Tabs","`onPrevClick / @prevClick` and `onNextClick / @nextClick` has been removed. Please use `onTabScroll / @tabScroll` instead."),rt(e.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` prop has been removed. Please use `rightExtra` slot instead."),rt(d.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` slot is deprecated. Please use `rightExtra` slot instead.");const{prefixCls:l,direction:a,size:r,rootPrefixCls:i,getPopupContainer:u}=xa("tabs",e),[c,m]=pn(l),T=J(()=>a.value==="rtl"),b=J(()=>{const{animated:_,tabPosition:L}=e;return _===!1||["left","right"].includes(L)?{inkBar:!1,tabPane:!1}:_===!0?{inkBar:!0,tabPane:!0}:G({inkBar:!0,tabPane:!1},typeof _=="object"?_:{})}),[p,$]=oe(!1);Xe(()=>{$(Ea())});const[h,g]=St(()=>{var _;return(_=e.tabs[0])===null||_===void 0?void 0:_.key},{value:J(()=>e.activeKey),defaultValue:e.defaultActiveKey}),[P,S]=oe(()=>e.tabs.findIndex(_=>_.key===h.value));Fe(()=>{var _;let L=e.tabs.findIndex(B=>B.key===h.value);L===-1&&(L=Math.max(0,Math.min(P.value,e.tabs.length-1)),g((_=e.tabs[L])===null||_===void 0?void 0:_.key)),S(L)});const[w,O]=St(null,{value:J(()=>e.id)}),C=J(()=>p.value&&!["left","right"].includes(e.tabPosition)?"top":e.tabPosition);Xe(()=>{e.id||(O(`rc-tabs-${Bt}`),Bt+=1)});const R=(_,L)=>{var B,k;(B=e.onTabClick)===null||B===void 0||B.call(e,_,L);const I=_!==h.value;g(_),I&&((k=e.onChange)===null||k===void 0||k.call(e,_))};return Ya({tabs:J(()=>e.tabs),prefixCls:l}),()=>{const{id:_,type:L,tabBarGutter:B,tabBarStyle:k,locale:I,destroyInactiveTabPane:y,renderTabBar:ee=d.renderTabBar,onTabScroll:X,hideAdd:H,centered:ce}=e,te={id:w.value,activeKey:h.value,animated:b.value,tabPosition:C.value,rtl:T.value,mobile:p.value};let re;L==="editable-card"&&(re={onEdit:(Te,ke)=>{let{key:z,event:_e}=ke;var Pe;(Pe=e.onEdit)===null||Pe===void 0||Pe.call(e,Te==="add"?_e:z,Te)},removeIcon:()=>n(wa,null,null),addIcon:d.addIcon?d.addIcon:()=>n(Ee,null,null),showAdd:H!==!0});let U;const Se=G(G({},te),{moreTransitionName:`${i.value}-slide-up`,editable:re,locale:I,tabBarGutter:B,onTabClick:R,onTabScroll:X,style:k,getPopupContainer:u.value,popupClassName:we(e.popupClassName,m.value)});ee?U=ee(G(G({},Se),{DefaultTabBar:Rt})):U=n(Rt,Se,Yt(d,["moreIcon","leftExtra","rightExtra","tabBarExtraContent"]));const ae=l.value;return c(n("div",ye(ye({},o),{},{id:_,class:we(ae,`${ae}-${C.value}`,{[m.value]:!0,[`${ae}-${r.value}`]:r.value,[`${ae}-card`]:["card","editable-card"].includes(L),[`${ae}-editable-card`]:L==="editable-card",[`${ae}-centered`]:ce,[`${ae}-mobile`]:p.value,[`${ae}-editable`]:L==="editable-card",[`${ae}-rtl`]:T.value},o.class)}),[U,n(an,ye(ye({destroyInactiveTabPane:y},te),{},{animated:b.value}),null)]))}}}),De=le({compatConfig:{MODE:3},name:"ATabs",inheritAttrs:!1,props:Ut(ea(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}}),slots:Object,setup(e,t){let{attrs:o,slots:d,emit:l}=t;const a=r=>{l("update:activeKey",r),l("change",r)};return()=>{var r;const i=vn(ya((r=d.default)===null||r===void 0?void 0:r.call(d)));return n(fn,ye(ye(ye({},ha(e,["onUpdate:activeKey"])),o),{},{onChange:a,tabs:i}),d)}}}),mn=()=>({tab:Je.any,disabled:{type:Boolean},forceRender:{type:Boolean},closable:{type:Boolean},animated:{type:Boolean},active:{type:Boolean},destroyInactiveTabPane:{type:Boolean},prefixCls:{type:String},tabKey:{type:[String,Number]},id:{type:String}}),Ye=le({compatConfig:{MODE:3},name:"ATabPane",inheritAttrs:!1,__ANT_TAB_PANE:!0,props:mn(),slots:Object,setup(e,t){let{attrs:o,slots:d}=t;const l=D(e.forceRender);ue([()=>e.active,()=>e.destroyInactiveTabPane],()=>{e.active?l.value=!0:e.destroyInactiveTabPane&&(l.value=!1)},{immediate:!0});const a=J(()=>e.active?{}:e.animated?{visibility:"hidden",height:0,overflowY:"hidden"}:{display:"none"});return()=>{var r;const{prefixCls:i,forceRender:u,id:c,active:m,tabKey:T}=e;return n("div",{id:c&&`${c}-panel-${T}`,role:"tabpanel",tabindex:m?0:-1,"aria-labelledby":c&&`${c}-tab-${T}`,"aria-hidden":!m,style:[a.value,o.style],class:[`${i}-tabpane`,m&&`${i}-tabpane-active`,o.class]},[(m||l.value||u)&&((r=d.default)===null||r===void 0?void 0:r.call(d))])}}});De.TabPane=Ye;De.install=function(e){return e.component(De.name,De),e.component(Ye.name,Ye),e};const bn=ka(Pa);var gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function Lt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),d.forEach(function(l){yn(e,l,o[l])})}return e}function yn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var mt=function(t,o){var d=Lt({},t,o.attrs);return n(ct,Lt({},d,{icon:gn}),null)};mt.displayName="SaveOutlined";mt.inheritAttrs=!1;var hn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function Nt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),d.forEach(function(l){_n(e,l,o[l])})}return e}function _n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Re=function(t,o){var d=Nt({},t,o.attrs);return n(ct,Nt({},d,{icon:hn}),null)};Re.displayName="ThunderboltOutlined";Re.inheritAttrs=!1;var $n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};function Mt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),d.forEach(function(l){xn(e,l,o[l])})}return e}function xn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var et=function(t,o){var d=Mt({},t,o.attrs);return n(ct,Mt({},d,{icon:$n}),null)};et.displayName="WarningOutlined";et.inheritAttrs=!1;const wn={class:"space-y-4"},Cn={class:"space-x-2 text-orange"},Sn=le({__name:"BrowserSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,d=t,l=J(()=>o.config),a=r=>{const i={...l.value,...r};d("update:config",i)};return(r,i)=>{const u=pt,c=He,m=Ze,T=Qe,b=ze;return x(),A("div",wn,[i[7]||(i[7]=v("h3",{class:"text-lg font-medium"},"浏览器配置",-1)),v("div",Cn,[n(s(et)),i[2]||(i[2]=v("span",null,"docker 环境下将忽略以下设置",-1))]),n(b,{layout:"vertical",class:"max-w-2xl"},{default:f(()=>[n(c,{label:"无头模式"},{default:f(()=>[n(u,{checked:s(l).browser.headless,onChange:i[0]||(i[0]=p=>{const $={...s(l).browser,headless:!!p};a({browser:$})})},null,8,["checked"]),i[3]||(i[3]=v("span",{class:"ml-2 text-gray-500"},"是否在后台运行浏览器",-1))]),_:1}),n(c,{label:"浏览器类型"},{default:f(()=>[n(T,{value:s(l).browser.channel,class:"w-full",onChange:i[1]||(i[1]=p=>{const $={...s(l).browser,channel:p};a({browser:$})})},{default:f(()=>[n(m,{value:"chrome"},{default:f(()=>[...i[4]||(i[4]=[j("Chrome",-1)])]),_:1}),n(m,{value:"firefox"},{default:f(()=>[...i[5]||(i[5]=[j("Firefox",-1)])]),_:1}),n(m,{value:"webkit"},{default:f(()=>[...i[6]||(i[6]=[j("WebKit",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})])}}}),Tn={class:"space-y-4"},kn={key:1},Pn={class:"flex items-center pt-4 border-t border-gray-200"},In={class:"flex items-center gap-2"},On={class:"text-xs"},An={key:0},En={key:1},Rn={class:"flex justify-between items-start mb-2"},Bn={class:"text-sm whitespace-pre-wrap font-mono bg-white/50 p-3 rounded"},Ln={key:0,class:"space-y-2"},Nn={class:"text-gray-700"},Mn={key:1,class:"space-y-2"},jn={class:"text-gray-700"},jt=le({__name:"NotifierForm",props:{modelValue:{},hideTemplate:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const d=e,l=o,a=Ae({...d.modelValue}),r=D(!1),i=Ae({success:!1,content:""}),u=D(!1),{data:c}=Y("/api/notifier/templates").json();ue(a,()=>{l("update:modelValue",{...a})},{deep:!0});const m=h=>c.value?.find(g=>g.type===h),T=h=>{if(!h)return;const g=m(h);if(!g)return M.error("未找到该类型的模板");a.type=g.type,g.template&&Object.entries(g.template).forEach(([P,S])=>{S.default!==void 0&&(a[P]=S.default)})},b=J(()=>a.type?m(a.type)?.template||{}:{}),p=async()=>{const h=[];a.name||h.push("通知名称"),a.type||h.push("通知类型");const g=m(a.type);if(g?.template&&Object.entries(g.template).forEach(([P,S])=>{S.required&&!a[P]&&h.push(S.name)}),h.length>0){M.error(`请填写以下必填字段：${h.join("、")}`);return}try{r.value=!0;const{error:P}=await Y("/api/notifier/test").post(a).json();if(P.value)i.success=!1,i.content=`错误信息: ${P.value||"未知错误"}
`,M.error("通知连接测试失败");else{const S="测试成功";i.success=!0,i.content=`测试响应: ${S.substring(0,200)}${S.length>200?"...":""}`,M.success("通知连接测试成功")}u.value=!0}catch(P){i.success=!1,i.content=`错误信息: ${P.message||"未知错误"}
`,M.error("测试过程中发生错误"),u.value=!0}finally{r.value=!1}},$=()=>{u.value=!1};return t({testNotifier:p,testing:r,testResult:i,testVisible:u}),(h,g)=>{const P=Kt,S=He,w=Ze,O=Qe,C=Ft,R=Ba,_=We,L=Xt,B=ze;return x(),A("div",Tn,[n(B,{model:s(a),"label-col":{span:6},"wrapper-col":{span:18}},{default:f(()=>[n(S,{label:"通知名称",name:"name",required:""},{default:f(()=>[n(P,{value:s(a).name,"onUpdate:value":g[0]||(g[0]=k=>s(a).name=k),placeholder:"输入通知名称"},null,8,["value"])]),_:1}),n(S,{label:"通知类型",name:"type",required:""},{default:f(()=>[e.hideTemplate?(x(),A("div",kn,V(s(a).type),1)):(x(),Z(O,{key:0,placeholder:"选择通知类型",value:s(a).type,"onUpdate:value":g[1]||(g[1]=k=>s(a).type=k),onChange:T,"allow-clear":""},{default:f(()=>[(x(!0),A(he,null,Ce(s(c),k=>(x(),Z(w,{key:k.type,value:k.type},{default:f(()=>[j(V(k.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]))]),_:1}),s(a).type&&s(b)?(x(!0),A(he,{key:0},Ce(s(b),(k,I)=>(x(),Z(S,{key:I,label:k.name,name:I,required:k.required},{default:f(()=>[k.type==="password"?(x(),Z(C,{key:0,value:s(a)[I],"onUpdate:value":y=>s(a)[I]=y,placeholder:k.placeholder||`输入${k.name}`},null,8,["value","onUpdate:value","placeholder"])):k.type==="number"?(x(),Z(R,{key:1,value:s(a)[I],"onUpdate:value":y=>s(a)[I]=y,placeholder:k.placeholder||`输入${k.name}`,style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])):(x(),Z(P,{key:2,value:s(a)[I],"onUpdate:value":y=>s(a)[I]=y,placeholder:k.placeholder||`输入${k.name}`},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1032,["label","name","required"]))),128)):F("",!0),n(S,{"wrapper-col":{offset:5,span:18}},{default:f(()=>[v("div",Pn,[v("div",In,[n(_,{type:"primary",onClick:p,loading:s(r),disabled:!s(a).name||!s(a).type},{default:f(()=>[n(s(Re)),g[2]||(g[2]=j(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),!s(a).name||!s(a).type?(x(),Z(L,{key:0},{title:f(()=>[v("div",On,[s(a).name?F("",!0):(x(),A("div",An,"请填写通知名称")),s(a).type?F("",!0):(x(),A("div",En,"请选择通知类型"))])]),default:f(()=>[n(s(qt),{class:"text-gray-400"})]),_:1})):F("",!0)]),g[3]||(g[3]=v("span",{class:"text-gray-500 text-sm"}," 测试通过后再保存 ",-1))])]),_:1}),!s(r)&&s(u)?(x(),Z(S,{key:1,"wrapper-col":{offset:5,span:18}},{default:f(()=>[v("div",{class:je(["mt-2 p-4 border rounded",s(i).success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"])},[v("div",Rn,[v("h4",{class:je(["font-medium",s(i).success?"text-green-700":"text-red-700"])},V(s(i).success?"✅ 测试成功":"❌ 测试失败"),3),n(_,{type:"text",size:"small",onClick:$},{default:f(()=>[...g[4]||(g[4]=[j(" 关闭 ",-1)])]),_:1})]),v("div",Bn,[s(i).success?(x(),A("div",Ln,[g[5]||(g[5]=v("div",{class:"text-green-700 font-medium"},"配置验证通过！",-1)),v("div",Nn,V(s(i).content),1)])):(x(),A("div",Mn,[g[6]||(g[6]=v("div",{class:"text-red-700 font-medium"},"配置验证失败",-1)),v("div",jn,V(s(i).content),1),g[7]||(g[7]=v("div",{class:"text-gray-600 text-xs mt-2"},[j(" 请检查以下配置： "),v("ul",{class:"list-disc pl-4 mt-1"},[v("li",null,"通知类型是否正确"),v("li",null,"配置信息是否完整"),v("li",null,"网络连接是否正常")])],-1))]))])],2)]),_:1})):F("",!0)]),_:1},8,["model"])])}}}),Dn={class:"flex-col h-full space-y-4"},zn={key:0,class:"flex-col flex-1 h-0"},Hn={class:"flex justify-between items-center mb-4"},Wn={key:0,class:"flex-1 h-0 space-y-3 overflow-auto"},Vn={class:"flex justify-between items-start"},Gn={class:"flex gap-2.5"},Un={class:"flex gap-2 ml-4"},Kn={key:1,class:"text-center py-8 border border-dashed border-gray-300 rounded"},Fn=le({__name:"NotificationSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,d=t,{data:l,execute:a}=Y("/api/notifier",{initialData:[]}).json(),r=D(!1),i=Ae(new Map),u=J(()=>o.config),c=S=>{const w={...u.value,...S};d("update:config",w)},m=()=>{const S=D({id:"",type:"ntfy",name:"通知1",enable:!0});Oe.confirm({title:"新建通知",width:600,content:qe(jt,{modelValue:S.value,"onUpdate:modelValue":w=>S.value=w}),async onOk(){try{r.value=!0;const w=S.value,{error:O}=await Y("/api/notifier").post(w).json();if(!O.value)M.success("已添加"),await a();else return Promise.reject()}catch{return M.error("添加时发生错误"),Promise.reject()}finally{r.value=!1}}})},T=S=>{const w=l.value?.find(O=>O.id===S);w&&Oe.confirm({title:"确认删除",content:`确定要删除 "${w.name}" 吗？`,async onOk(){try{r.value=!0;const{error:O}=await Y(`/api/notifier/${w.id}`).delete().json();O.value?M.error("删除失败"):(M.success("已删除"),await a())}catch{M.error("删除时发生错误")}finally{r.value=!1}}})},b=S=>{const w=l.value?.find(C=>C.id===S);if(!w)return;const O=D(w);Oe.confirm({title:"编辑通知配置",content:qe(jt,{modelValue:O.value,hideTemplate:!0,"onUpdate:modelValue":C=>O.value=C}),async onOk(){try{r.value=!0;const{error:C}=await Y(`/api/notifier/${O.value.id}`).post(O.value).json();if(!C.value)M.success("已更新"),await a();else return Promise.reject()}catch{return M.error("更新时发生错误"),Promise.reject()}finally{r.value=!1}}})},p=async S=>{const w=l.value?.find(O=>O.id===S);if(w)try{r.value=!0;const{error:O}=await Y(`/api/notifier/${S}`).post({...w,enable:!w.enable}).json();O.value?M.error("请求失败"):(M.success(w.enable?"已禁用":"已启用"),await a())}catch{M.error("请求时发生错误")}finally{r.value=!1}},$=async S=>{const w=l.value?.find(O=>O.id===S);if(w){i.set(S,"testing");try{const{error:O}=await Y(`/api/notifier/${w.id}/test`).post().json();O.value?i.set(S,"failure"):(i.set(S,"success"),M.success("Notifier连接测试成功"))}catch{i.set(S,"failure"),M.error("测试Notifier连接时发生错误")}}},h=S=>i.get(S)==="testing",g=S=>{switch(i.get(S)){case"success":return"#52c41a";case"failure":return"#ef4444";case"testing":return"#3b82f6";default:return"default"}},P=S=>{switch(i.get(S)){case"success":return"测试成功";case"failure":return"测试失败";case"testing":return"测试中";default:return"未测试"}};return(S,w)=>{const O=pt,C=He,R=ze,_=We,L=ft;return x(),A("div",Dn,[w[8]||(w[8]=v("h3",{class:"text-lg font-medium"},"通知配置",-1)),n(R,{layout:"vertical",class:"max-w-2xl"},{default:f(()=>[n(C,{label:"启用通知"},{default:f(()=>[n(O,{checked:s(u).notifications.enabled,onChange:w[0]||(w[0]=B=>{const k={...s(u).notifications,enabled:!!B};c({notifications:k})})},null,8,["checked"]),w[1]||(w[1]=v("span",{class:"ml-2 text-gray-500"},"是否启用消息通知功能",-1))]),_:1})]),_:1}),s(u).notifications.enabled?(x(),A("div",zn,[v("div",Hn,[w[3]||(w[3]=v("h4",{class:"text-md font-medium"},"已配置的通知",-1)),n(_,{type:"primary",onClick:m},{default:f(()=>[n(s(Ee)),w[2]||(w[2]=j(" 添加通知 ",-1))]),_:1})]),s(l)&&s(l).length>0?(x(),A("div",Wn,[(x(!0),A(he,null,Ce(s(l),B=>(x(),A("div",{key:B.id,class:"border border-gray-200 rounded p-4 bg-blueGray hover:border-blue-300 transition-colors"},[v("div",Vn,[v("div",Gn,[n(L,{color:g(B.id)},{default:f(()=>[j(V(P(B.id)),1)]),_:2},1032,["color"]),n(O,{checked:B.enable,onChange:k=>p(B.id)},null,8,["checked","onChange"]),v("div",null,V(B.name),1),v("div",null,"提供商: "+V(B.type),1)]),v("div",Un,[n(_,{type:"primary",size:"small",onClick:k=>b(B.id),disabled:h(B.id)},{default:f(()=>[...w[4]||(w[4]=[j(" 编辑 ",-1)])]),_:1},8,["onClick","disabled"]),n(_,{type:"default",size:"small",onClick:k=>$(B.id),loading:h(B.id)},{default:f(()=>[n(s(Re)),w[5]||(w[5]=j(" 测试 ",-1))]),_:1},8,["onClick","loading"]),n(_,{type:"text",danger:"",size:"small",onClick:k=>T(B.id),disabled:h(B.id)},{default:f(()=>[n(s(vt))]),_:1},8,["onClick","disabled"])])])]))),128))])):(x(),A("div",Kn,[w[7]||(w[7]=v("p",{class:"text-gray-500 mb-4"},"尚未配置任何通知",-1)),n(_,{type:"primary",onClick:m},{default:f(()=>[n(s(Ee)),w[6]||(w[6]=j(" 添加第一个通知 ",-1))]),_:1})]))])):F("",!0)])}}}),Xn={class:"space-y-4"},qn={key:0},Yn=le({__name:"EvaluatorSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,d=t,l=J(()=>o.config),{data:a}=Y("/api/ai",{initialData:[]}).json(),r=i=>{const u={...l.value,...i};d("update:config",u)};return(i,u)=>{const c=pt,m=He,T=ft,b=Ze,p=Qe,$=ze;return x(),A("div",Xn,[u[6]||(u[6]=v("h3",{class:"text-lg font-medium"},"商品评估器配置",-1)),n($,{layout:"vertical",class:"max-w-2xl"},{default:f(()=>[n(m,{label:"启用评估器"},{default:f(()=>[n(c,{checked:s(l).evaluator.enabled,onChange:u[0]||(u[0]=h=>{const g={...s(l).evaluator,enabled:!!h};r({evaluator:g})})},null,8,["checked"]),u[3]||(u[3]=v("span",{class:"ml-2 text-gray-500"},"是否启用AI商品分析评估",-1))]),_:1}),s(l).evaluator.enabled?(x(),A("div",qn,[n(m,{label:"文本分析 AI"},{default:f(()=>[n(p,{value:s(l).evaluator.textAI||void 0,onChange:u[1]||(u[1]=h=>{const g={...s(l).evaluator,textAI:h||null};r({evaluator:g})}),class:"w-full",placeholder:"选择用于文本分析的 AI","allow-clear":""},{default:f(()=>[(x(!0),A(he,null,Ce(s(a),h=>(x(),Z(b,{key:h.id,value:h.id},{default:f(()=>[j(V(h.name)+" ",1),h.multimodal?(x(),Z(T,{key:0,color:"success"},{default:f(()=>[...u[4]||(u[4]=[j("多模态",-1)])]),_:1})):F("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(m,{label:"图像分析 AI",tooltip:"支持多模态的模型"},{default:f(()=>[n(p,{value:s(l).evaluator.imageAI||void 0,onChange:u[2]||(u[2]=h=>{const g={...s(l).evaluator,imageAI:h||null};r({evaluator:g})}),class:"w-full",placeholder:"未启用","allow-clear":""},{default:f(()=>[(x(!0),A(he,null,Ce(s(a),h=>(x(),Z(b,{disabled:!h.multimodal,key:h.id,value:h.id},{default:f(()=>[j(V(h.name)+" ",1),h.multimodal?(x(),Z(T,{key:0,color:"success"},{default:f(()=>[...u[5]||(u[5]=[j("多模态",-1)])]),_:1})):F("",!0)]),_:2},1032,["disabled","value"]))),128))]),_:1},8,["value"])]),_:1})])):F("",!0)]),_:1})])}}});var Ue={exports:{}},Dt;function Jn(){return Dt||(Dt=1,(function(e,t){Function("return this")(),(function(o){e&&e.exports&&(t=e.exports=d),t.clone=d;function d(i){var u=typeof i;switch(u){case"object":if(i==null)return i;var c=void 0;return i instanceof Date?(c=new Date,c.setTime(i.getTime()),c):i instanceof RegExp?(c=r(i),c):(c=JSON.parse(JSON.stringify(i)),a(i,c),c);default:return i}}function l(i,u,c){var m=i[c],T=typeof m;switch(T){case"object":if(m instanceof Date){var b=new Date;b.setTime(m.getTime()),u[c]=b}else m instanceof RegExp?u[c]=r(m):m==null?u[c]=m:a(m,u[c]);break;case"number":isNaN(m)?u[c]=NaN:m==1/0&&(u[c]=1/0);break}}function a(i,u){if(i instanceof Array)for(var c=0;c<i.length;c++)l(i,u,c);else{var m=Object.getOwnPropertyNames(i);m.forEach(function(T){l(i,u,T)})}}function r(i){var u=String(i),c=u.lastIndexOf("/");return new RegExp(u.slice(1,c),u.slice(c+1))}})()})(Ue,Ue.exports)),Ue.exports}var Qn=Jn();const zt=Ia(Qn),Zn={class:"space-y-4"},eo={class:"flex items-center gap-1"},to=["href"],ao={class:"flex-col gap-2"},no={key:0,class:"mb-2"},oo={class:"font-mono text-sm"},lo={class:"text-blue-600"},so={class:"text-green-600"},io={key:1,class:"flex-col gap-2"},ro={class:"flex gap-2"},uo={key:2,class:"flex gap-2"},co={class:"flex-col gap-2"},po={key:0,class:"flex-col gap-2"},vo={class:"flex gap-2"},fo={key:1},mo={class:"mb-2"},bo={class:"bg-gray-50 text-black p-3 rounded text-sm overflow-auto max-h-40"},go={class:"flex gap-2"},yo={class:"flex items-center pt-4 border-t border-gray-200"},ho={class:"flex items-center gap-2"},_o={class:"text-xs"},$o={key:0},xo={key:1},wo={key:2},Co={key:3},So={class:"flex justify-between items-start mb-2"},To={class:"text-sm whitespace-pre-wrap font-mono bg-white/50 p-3 rounded"},ko={key:0,class:"space-y-2"},Po={class:"text-gray-700"},Io={key:1,class:"space-y-2"},Oo={class:"text-gray-700"},Ht=le({__name:"AIForm",props:{modelValue:{},hideTemplate:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const d=e,l=o,a=Ae({...d.modelValue}),r=D(!1),i=D(!1),u=D(!1),c=D(""),m=D(""),T=D(""),{data:b}=Y("/api/ai/templates").json();ue(a,()=>{l("update:modelValue",{...a})},{deep:!0}),ue(()=>a.headers,I=>{c.value=Ie(I||{})},{immediate:!0}),ue(()=>a.body,I=>{m.value=Ie(I||{},null,2)},{immediate:!0});const p=I=>{if(!I)return;const y=b.value?.find(ee=>ee.id===I);if(!y)return M.error("未找到模板");a.endpoint=y.endpoint,a.model=y.model,a.headers=zt(y.headers),a.body=zt(y.body),T.value=y.api_key_domin},$=()=>{a.headers||(a.headers={});const I=prompt("请输入请求头的键名：");if(!I)return;const y=prompt("请输入请求头的值：");y!==null&&(a.headers[I]=y,c.value=Ie(a.headers))},h=I=>{a.headers&&a.headers[I]&&(delete a.headers[I],c.value=Ie(a.headers))},g=()=>{i.value=!0},P=()=>{try{a.headers=JSON.parse(c.value),i.value=!1,M.success("请求头保存成功")}catch{M.error("JSON格式错误，请检查输入")}},S=()=>{c.value=Ie(a.headers||{}),i.value=!1},w=()=>{u.value=!0},O=()=>{try{a.body=JSON.parse(m.value),u.value=!1,M.success("请求体保存成功")}catch{M.error("JSON格式错误，请检查输入")}},C=()=>{m.value=Ie(a.body||{}),u.value=!1},R=D(!1),_=Ae({success:!1,content:""}),L=D(!1),B=async()=>{const I=[];if(a.name||I.push("Agent名称"),a.endpoint||I.push("API端点"),a.model||I.push("模型名称"),a.api_key||I.push("API密钥"),I.length>0){M.error(`请填写以下必填字段：${I.join("、")}`);return}try{R.value=!0;const y={id:a.id,name:a.name,endpoint:a.endpoint,api_key:a.api_key,model:a.model,proxy:a.proxy||"",headers:a.headers,body:a.body},{error:ee,data:X}=a.id?await Y(`/api/ai/${a.id}/test`).post().json():await Y("/api/ai/test").post(y).json();if(!ee.value&&X.value){const H=X.value.response||"测试成功";_.success=!0,_.content=`测试响应: ${H.substring(0,200)}${H.length>200?"...":""}`,M.success("连接测试成功")}else _.success=!1,_.content=`错误信息: ${ee.value||"未知错误"}
`,M.error("连接测试失败");L.value=!0}catch(y){_.success=!1,_.content=`错误信息: ${y.message||"未知错误"}
`,M.error("测试过程中发生错误"),L.value=!0}finally{R.value=!1}},k=()=>{L.value=!1};return t({testConfig:B,testing:R,testResult:_,testVisible:L}),(I,y)=>{const ee=Kt,X=He,H=Ze,ce=Qe,te=Ft,re=La,U=We,Se=bn,ae=Oa,Te=Xt,ke=ze;return x(),A("div",Zn,[n(ke,{model:s(a),"label-col":{span:5},"wrapper-col":{span:18}},{default:f(()=>[n(X,{label:"名称",name:"name",required:""},{default:f(()=>[n(ee,{value:s(a).name,"onUpdate:value":y[0]||(y[0]=z=>s(a).name=z),placeholder:"输入名称"},null,8,["value"])]),_:1}),e.hideTemplate?F("",!0):(x(),Z(X,{key:0,label:"模板选择"},{default:f(()=>[n(ce,{placeholder:"选择预设模板",onChange:p,"allow-clear":""},{default:f(()=>[(x(!0),A(he,null,Ce(s(b),z=>(x(),Z(H,{key:z.id,value:z.id},{default:f(()=>[j(V(z.name)+" - "+V(z.description),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})),n(X,{label:"API端点",name:"endpoint",required:""},{default:f(()=>[n(ee,{value:s(a).endpoint,"onUpdate:value":y[1]||(y[1]=z=>s(a).endpoint=z),placeholder:"https://api.openai.com/v1/chat/completions"},null,8,["value"])]),_:1}),n(X,{label:"API密钥"},{default:f(()=>[v("div",eo,[n(te,{value:s(a).api_key,"onUpdate:value":y[2]||(y[2]=z=>s(a).api_key=z),placeholder:"输入API密钥"},null,8,["value"]),s(T)?(x(),A("a",{key:0,href:s(T),class:"shrink-0",target:"_blank"},"获取api_key",8,to)):F("",!0)])]),_:1}),n(X,{label:"模型名称",name:"model",required:""},{default:f(()=>[n(ee,{value:s(a).model,"onUpdate:value":y[3]||(y[3]=z=>s(a).model=z),placeholder:"gpt-3.5-turbo"},null,8,["value"])]),_:1}),n(X,{label:"多模态",name:"multimodal"},{default:f(()=>[n(re,{checked:s(a).multimodal,"onUpdate:checked":y[4]||(y[4]=z=>s(a).multimodal=z)},null,8,["checked"])]),_:1}),n(Se,{align:"right"},{default:f(()=>[n(U,{type:"link",onClick:y[5]||(y[5]=z=>r.value=!s(r)),class:"p-0 h-auto"},{default:f(()=>[j(V(s(r)?"收起":"展开")+"高级配置 ",1),n(s(Ra),{class:je({"rotate-180":s(r)})},null,8,["class"])]),_:1})]),_:1}),s(r)?(x(),A(he,{key:1},[n(X,{label:"代理地址"},{default:f(()=>[n(ee,{value:s(a).proxy,"onUpdate:value":y[6]||(y[6]=z=>s(a).proxy=z),placeholder:"代理地址 http://proxy:port"},null,8,["value"])]),_:1}),n(X,{label:"请求头配置"},{default:f(()=>[v("div",ao,[s(a).headers&&Object.keys(s(a).headers).length>0?(x(),A("div",no,[(x(!0),A(he,null,Ce(s(a).headers,(z,_e)=>(x(),A("div",{key:_e,class:"flex items-center justify-between py-1 px-2 bg-gray-50 rounded mb-1"},[v("span",oo,[v("span",lo,V(_e),1),y[9]||(y[9]=j(": ",-1)),v("span",so,V(z),1)]),n(U,{type:"text",danger:"",size:"small",onClick:Pe=>h(_e)},{default:f(()=>[n(s(vt))]),_:1},8,["onClick"])]))),128))])):F("",!0),s(i)?(x(),A("div",io,[n(ae,{value:s(c),"onUpdate:value":y[7]||(y[7]=z=>dt(c)?c.value=z:null),rows:6,placeholder:'输入JSON格式的请求头，例如：{"Authorization": "Bearer {key}", "Content-Type": "application/json"}'},null,8,["value"]),v("div",ro,[n(U,{type:"primary",onClick:P},{default:f(()=>[...y[10]||(y[10]=[j("保存",-1)])]),_:1}),n(U,{onClick:S},{default:f(()=>[...y[11]||(y[11]=[j("取消",-1)])]),_:1})])])):(x(),A("div",uo,[n(U,{onClick:$,type:"dashed"},{default:f(()=>[n(s(Ee)),y[12]||(y[12]=j(" 添加请求头 ",-1))]),_:1}),n(U,{onClick:g},{default:f(()=>[n(s(Tt)),y[13]||(y[13]=j(" 编辑JSON ",-1))]),_:1})]))])]),_:1}),n(X,{label:"请求体配置"},{default:f(()=>[v("div",co,[s(u)?(x(),A("div",po,[n(ae,{value:s(m),"onUpdate:value":y[8]||(y[8]=z=>dt(m)?m.value=z:null),rows:8,placeholder:'输入JSON格式的请求体模板，例如：{"model": "{model}", "messages": {messages}, "temperature": 0.2}',有好感:""},null,8,["value"]),v("div",vo,[n(U,{type:"primary",onClick:O},{default:f(()=>[...y[14]||(y[14]=[j("保存",-1)])]),_:1}),n(U,{onClick:C},{default:f(()=>[...y[15]||(y[15]=[j("取消",-1)])]),_:1})])])):(x(),A("div",fo,[v("div",mo,[v("pre",bo,V(s(m)),1)]),v("div",go,[n(U,{onClick:w},{default:f(()=>[n(s(Tt)),y[16]||(y[16]=j(" 编辑请求体 ",-1))]),_:1})])]))])]),_:1})],64)):F("",!0),n(X,{"wrapper-col":{offset:5,span:18}},{default:f(()=>[v("div",yo,[v("div",ho,[n(U,{type:"primary",onClick:B,loading:s(R),disabled:!s(a).name||!s(a).endpoint||!s(a).model||!s(a).api_key},{default:f(()=>[n(s(Re)),y[17]||(y[17]=j(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),!s(a).name||!s(a).endpoint||!s(a).model||!s(a).api_key?(x(),Z(Te,{key:0},{title:f(()=>[v("div",_o,[s(a).name?F("",!0):(x(),A("div",$o,"请填写Agent名称")),s(a).endpoint?F("",!0):(x(),A("div",xo,"请填写API端点")),s(a).model?F("",!0):(x(),A("div",wo,"请填写模型名称")),s(a).api_key?F("",!0):(x(),A("div",Co,"请填写API密钥"))])]),default:f(()=>[n(s(qt),{class:"text-gray-400"})]),_:1})):F("",!0)]),y[18]||(y[18]=v("span",{class:"text-gray-500 text-sm"}," 测试通过后再保存 ",-1))])]),_:1}),!s(R)&&s(L)?(x(),Z(X,{key:2,"wrapper-col":{offset:5,span:18}},{default:f(()=>[v("div",{class:je(["mt-2 p-4 border rounded",s(_).success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"])},[v("div",So,[v("h4",{class:je(["font-medium",s(_).success?"text-green-700":"text-red-700"])},V(s(_).success?"✅ 测试成功":"❌ 测试失败"),3),n(U,{type:"text",size:"small",onClick:k},{default:f(()=>[...y[19]||(y[19]=[j(" 关闭 ",-1)])]),_:1})]),v("div",To,[s(_).success?(x(),A("div",ko,[y[20]||(y[20]=v("div",{class:"text-green-700 font-medium"},"配置验证通过！",-1)),v("div",Po,V(s(_).content),1)])):(x(),A("div",Io,[y[21]||(y[21]=v("div",{class:"text-red-700 font-medium"},"配置验证失败",-1)),v("div",Oo,V(s(_).content),1),y[22]||(y[22]=v("div",{class:"text-gray-600 text-xs mt-2"},[j(" 请检查以下配置： "),v("ul",{class:"list-disc pl-4 mt-1"},[v("li",null,"API端点是否正确"),v("li",null,"API密钥是否有效"),v("li",null,"账户余额是否充足"),v("li",null,"模型名称是否正确"),v("li",null,"网络连接是否正常"),v("li",null,"请求头/请求体配置错误")])],-1))]))])],2)]),_:1})):F("",!0)]),_:1},8,["model"])])}}}),Ao={class:"flex-col h-full space-y-4"},Eo={class:"flex-col flex-1 h-0"},Ro={class:"flex justify-between items-center mb-4"},Bo={key:0,class:"space-y-3 h-0 flex-1 overflow-auto"},Lo={class:"flex justify-between items-start"},No={class:"flex-1"},Mo={class:"flex items-center gap-2 mb-2"},jo={class:"font-medium text-gray-800"},Do={class:"text-xs px-2 py-1 rounded text-gray-600"},zo={class:"text-sm text-gray-600 space-y-1"},Ho={class:"flex items-center gap-2"},Wo={class:"text-xs px-2 py-1 rounded truncate max-w-md"},Vo={class:"flex items-center gap-2"},Go={class:"text-xs"},Uo={class:"flex gap-2 ml-4"},Ko={key:1,class:"text-center py-8 border border-dashed border-gray-300 rounded"},Fo=le({__name:"AISettings",setup(e){const{data:t,execute:o}=Y("/api/ai",{initialData:[]}).json(),d=D(!1),l=Ae(new Map),a=()=>{const b=D({id:"",name:"AI",endpoint:"",api_key:"",model:"",multimodal:!1,headers:{Authorization:"Bearer {key}","Content-Type":"application/json"},body:{model:"{model}",messages:"{messages}"}});Oe.confirm({title:"创建 AI 配置",width:600,content:qe(Ht,{modelValue:b.value,"onUpdate:modelValue":p=>b.value=p}),async onOk(){try{d.value=!0;const{error:p}=await Y("/api/ai").post(b.value).json();if(!p.value)M.success("已添加"),await o();else return Promise.reject()}catch{return M.error("添加时发生错误"),Promise.reject()}finally{d.value=!1}}})},r=b=>{const p=t.value?.find($=>$.id===b);p&&Oe.confirm({title:"确认删除",content:`确定要删除 "${p.name}" 吗？`,async onOk(){try{d.value=!0;const{error:$}=await Y(`/api/ai/${p.id}`).delete().json();$.value?M.error("删除失败"):(M.success("已删除"),await o())}catch{M.error("删除时发生错误")}finally{d.value=!1}}})},i=b=>{const p=t.value?.find(h=>h.id===b);if(!p)return;const $=D(p);Oe.confirm({title:"编辑 AI 配置",width:600,content:qe(Ht,{modelValue:$.value,hideTemplate:!0,"onUpdate:modelValue":h=>$.value=h}),async onOk(){try{d.value=!0;const{error:h}=await Y(`/api/ai/${$.value.id}`).post($.value).json();if(!h.value)M.success("已更新"),await o();else return Promise.reject()}catch{return M.error("更新时发生错误"),Promise.reject()}finally{d.value=!1}}})},u=async b=>{const p=t.value?.find($=>$.id===b);if(p){l.set(b,"testing");try{const{error:$}=await Y(`/api/ai/${p.id}/test`).post().json();$.value?l.set(b,"failure"):(l.set(b,"success"),M.success("连接测试成功"))}catch{l.set(b,"failure"),M.error("测试连接时发生错误")}}},c=b=>l.get(b)==="testing",m=b=>{switch(l.get(b)){case"success":return"#52c41a";case"failure":return"#ef4444";case"testing":return"#3b82f6";default:return"default"}},T=b=>{switch(l.get(b)){case"success":return"测试成功";case"failure":return"测试失败";case"testing":return"测试中";default:return"未测试"}};return(b,p)=>{const $=We,h=ft;return x(),A("div",Ao,[p[9]||(p[9]=v("h3",{class:"text-lg font-medium"},"AI 配置",-1)),v("div",Eo,[v("div",Ro,[p[1]||(p[1]=v("h4",{class:"font-medium"},"已配置的 AI",-1)),n($,{type:"primary",onClick:a,loading:s(d)},{default:f(()=>[n(s(Ee)),p[0]||(p[0]=j(" 添加AI ",-1))]),_:1},8,["loading"])]),s(t)&&s(t).length>0?(x(),A("div",Bo,[(x(!0),A(he,null,Ce(s(t),g=>(x(),A("div",{key:g.id,class:"border border-gray-200 rounded p-4 bg-blueGray hover:border-blue-300 transition-colors"},[v("div",Lo,[v("div",No,[v("div",Mo,[v("h5",jo,V(g.name),1),v("span",Do,V(g.model),1),g.multimodal?(x(),Z(h,{key:0,color:"success"},{default:f(()=>[...p[2]||(p[2]=[j("多模态",-1)])]),_:1})):F("",!0),n(h,{color:m(g.id)},{default:f(()=>[j(V(T(g.id)),1)]),_:2},1032,["color"])]),v("div",zo,[v("div",Ho,[p[3]||(p[3]=v("span",{class:"font-medium"},"端点:",-1)),v("code",Wo,V(g.endpoint),1)]),v("div",Vo,[p[4]||(p[4]=v("span",{class:"font-medium"},"API密钥:",-1)),v("span",Go,V(g.api_key?"••••••••":"未设置"),1)])])]),v("div",Uo,[n($,{type:"primary",size:"small",onClick:P=>i(g.id),disabled:c(g.id)},{default:f(()=>[...p[5]||(p[5]=[j(" 编辑 ",-1)])]),_:1},8,["onClick","disabled"]),n($,{type:"default",size:"small",onClick:P=>u(g.id),loading:c(g.id)},{default:f(()=>[n(s(Re)),p[6]||(p[6]=j(" 测试 ",-1))]),_:1},8,["onClick","loading"]),n($,{type:"text",danger:"",size:"small",onClick:P=>r(g.id),disabled:c(g.id)},{default:f(()=>[n(s(vt))]),_:1},8,["onClick","disabled"])])])]))),128))])):(x(),A("div",Ko,[p[8]||(p[8]=v("p",{class:"text-gray-500 mb-4"},"尚未配置任何 AI",-1)),n($,{type:"primary",onClick:a},{default:f(()=>[n(s(Ee)),p[7]||(p[7]=j(" 添加第一个 AI ",-1))]),_:1})]))])])}}}),Xo={class:"flex-col h-full gap-4"},qo={class:"glass-card flex-1 flex-col p-6 animate-fade-in-up h-full"},Yo={class:"flex justify-between mb-6 items-center border-b border-white/5 pb-4"},Jo={class:"flex items-center space-x-4"},Qo={key:0,class:"flex items-center gap-2 text-warning px-3 py-1 bg-warning/10 rounded-full border border-warning/20"},Zo={class:"h-full overflow-y-auto custom-scrollbar p-2"},el={class:"h-full overflow-y-auto p-2"},tl={class:"h-full overflow-y-auto p-2"},al={class:"h-full overflow-y-auto p-2"},pl=le({__name:"system",setup(e){const t=D("browser"),o=D(!1),d=D(!1),{data:l,execute:a}=Y("api/system",{initialData:{browser:{headless:!0,channel:"chrome"},notifications:{enabled:!1,providers:[]},evaluator:{enabled:!0,textAI:null,imageAI:null}}}).json(),r=u=>{o.value=!0,l.value=u},i=async()=>{d.value=!0;const{error:u}=await Y("api/system").post(l.value).json();d.value=!1,u.value?M.error("保存失败"):(M.success("保存成功"),o.value=!1,await a())};return(u,c)=>{const m=We,T=Ye,b=De;return x(),A("div",Xo,[v("div",qo,[v("div",Yo,[c[3]||(c[3]=v("h2",{class:"text-xl font-bold text-gray m-0"},"系统设置",-1)),v("div",Jo,[n(Aa,{name:"fade"},{default:f(()=>[s(o)?(x(),A("div",Qo,[n(s(et),{class:"animate-pulse"}),c[1]||(c[1]=v("span",{class:"text-sm font-medium"},"配置未保存",-1))])):F("",!0)]),_:1}),n(m,{type:"primary",onClick:i,loading:s(d),class:"!bg-primary-600 hover:!bg-primary-500 shadow-lg shadow-primary-500/20 border-none"},{icon:f(()=>[n(s(mt))]),default:f(()=>[c[2]||(c[2]=j(" 保存配置 ",-1))]),_:1},8,["loading"])])]),n(b,{activeKey:s(t),"onUpdate:activeKey":c[0]||(c[0]=p=>dt(t)?t.value=p:null),class:"h-0 flex-1 [&_.ant-tabs-content]:h-full",tabBarStyle:{borderBottom:"1px solid rgba(255,255,255,0.05)"}},{default:f(()=>[n(T,{key:"browser",tab:"浏览器设置"},{default:f(()=>[v("div",Zo,[n(Sn,{config:s(l),"onUpdate:config":r},null,8,["config"])])]),_:1}),n(T,{key:"notifications",tab:"通知设置"},{default:f(()=>[v("div",el,[n(Fn,{config:s(l),"onUpdate:config":r},null,8,["config"])])]),_:1}),n(T,{key:"evaluator",tab:"商品评估器设置"},{default:f(()=>[v("div",tl,[n(Yn,{config:s(l),"onUpdate:config":r},null,8,["config"])])]),_:1}),n(T,{key:"ai",tab:"AI设置",class:"&_ant-tabs-content"},{default:f(()=>[v("div",al,[n(Fo)])]),_:1})]),_:1},8,["activeKey"])])])}}});export{pl as default};
