import{m as O,p as E,_ as x,aL as L,aM as N,d as P,k as X,x as G,s as j,w as A,ar as B,c as d,i as I,ab as H,P as T,B as R,ag as _,aJ as M,bH as F,r as V,F as J}from"./index-Dn0U3Kk-.js";function K(n,o,s){var e=s||{},i=e.noTrailing,p=i===void 0?!1:i,h=e.noLeading,v=h===void 0?!1:h,S=e.debounceMode,l=S===void 0?void 0:S,t,a=!1,r=0;function b(){t&&clearTimeout(t)}function z(f){var $=f||{},m=$.upcomingOnly,D=m===void 0?!1:m;b(),a=!D}function y(){for(var f=arguments.length,$=new Array(f),m=0;m<f;m++)$[m]=arguments[m];var D=this,c=Date.now()-r;if(a)return;function g(){r=Date.now(),o.apply(D,$)}function u(){t=void 0}!v&&l&&!t&&g(),b(),l===void 0&&c>n?v?(r=Date.now(),p||(t=setTimeout(l?u:g,n))):g():p!==!0&&(t=setTimeout(l?u:g,l===void 0?n-c:n))}return y.cancel=z,y}function U(n,o,s){var e={},i=e.atBegin,p=i===void 0?!1:i;return K(n,o,{debounceMode:p!==!1})}const q=new N("antSpinMove",{to:{opacity:1}}),Q=new N("antRotate",{to:{transform:"rotate(405deg)"}}),W=n=>({[`${n.componentCls}`]:x(x({},L(n)),{position:"absolute",display:"none",color:n.colorPrimary,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${n.motionDurationSlow} ${n.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${n.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:n.contentHeight,[`${n.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-n.spinDotSize/2},[`${n.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(n.spinDotSize-n.fontSize)/2+2,textShadow:`0 1px 2px ${n.colorBgContainer}`},[`&${n.componentCls}-show-text ${n.componentCls}-dot`]:{marginTop:-(n.spinDotSize/2)-10},"&-sm":{[`${n.componentCls}-dot`]:{margin:-n.spinDotSizeSM/2},[`${n.componentCls}-text`]:{paddingTop:(n.spinDotSizeSM-n.fontSize)/2+2},[`&${n.componentCls}-show-text ${n.componentCls}-dot`]:{marginTop:-(n.spinDotSizeSM/2)-10}},"&-lg":{[`${n.componentCls}-dot`]:{margin:-(n.spinDotSizeLG/2)},[`${n.componentCls}-text`]:{paddingTop:(n.spinDotSizeLG-n.fontSize)/2+2},[`&${n.componentCls}-show-text ${n.componentCls}-dot`]:{marginTop:-(n.spinDotSizeLG/2)-10}}},[`${n.componentCls}-container`]:{position:"relative",transition:`opacity ${n.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:n.colorBgContainer,opacity:0,transition:`all ${n.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${n.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:n.spinDotDefault},[`${n.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:n.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(n.spinDotSize-n.marginXXS/2)/2,height:(n.spinDotSize-n.marginXXS/2)/2,backgroundColor:n.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:q,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Q,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${n.componentCls}-dot`]:{fontSize:n.spinDotSizeSM,i:{width:(n.spinDotSizeSM-n.marginXXS/2)/2,height:(n.spinDotSizeSM-n.marginXXS/2)/2}},[`&-lg ${n.componentCls}-dot`]:{fontSize:n.spinDotSizeLG,i:{width:(n.spinDotSizeLG-n.marginXXS)/2,height:(n.spinDotSizeLG-n.marginXXS)/2}},[`&${n.componentCls}-show-text ${n.componentCls}-text`]:{display:"block"}})}),Y=O("Spin",n=>{const o=E(n,{spinDotDefault:n.colorTextDescription,spinDotSize:n.controlHeightLG/2,spinDotSizeSM:n.controlHeightLG*.35,spinDotSizeLG:n.controlHeight});return[W(o)]},{contentHeight:400});var Z=function(n,o){var s={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.indexOf(e)<0&&(s[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(n);i<e.length;i++)o.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(n,e[i])&&(s[e[i]]=n[e[i]]);return s};const k=()=>({prefixCls:String,spinning:{type:Boolean,default:void 0},size:String,wrapperClassName:String,tip:T.any,delay:Number,indicator:T.any});let w=null;function nn(n,o){return!!n&&!!o&&!isNaN(Number(o))}function tn(n){const o=n.indicator;w=typeof o=="function"?o:()=>d(o,null,null)}const C=P({compatConfig:{MODE:3},name:"ASpin",inheritAttrs:!1,props:X(k(),{size:"default",spinning:!0,wrapperClassName:""}),setup(n,o){let{attrs:s,slots:e}=o;const{prefixCls:i,size:p,direction:h}=G("spin",n),[v,S]=Y(i),l=j(n.spinning&&!nn(n.spinning,n.delay));let t;return A([()=>n.spinning,()=>n.delay],()=>{t?.cancel(),t=U(n.delay,()=>{l.value=n.spinning}),t?.()},{immediate:!0,flush:"post"}),B(()=>{t?.cancel()}),()=>{var a,r;const{class:b}=s,z=Z(s,["class"]),{tip:y=(a=e.tip)===null||a===void 0?void 0:a.call(e)}=n,f=(r=e.default)===null||r===void 0?void 0:r.call(e),$={[S.value]:!0,[i.value]:!0,[`${i.value}-sm`]:p.value==="small",[`${i.value}-lg`]:p.value==="large",[`${i.value}-spinning`]:l.value,[`${i.value}-show-text`]:!!y,[`${i.value}-rtl`]:h.value==="rtl",[b]:!!b};function m(c){const g=`${c}-dot`;let u=R(e,n,"indicator");return u===null?null:(Array.isArray(u)&&(u=u.length===1?u[0]:u),_(u)?M(u,{class:g}):w&&_(w())?M(w(),{class:g}):d("span",{class:`${g} ${c}-dot-spin`},[d("i",{class:`${c}-dot-item`},null),d("i",{class:`${c}-dot-item`},null),d("i",{class:`${c}-dot-item`},null),d("i",{class:`${c}-dot-item`},null)]))}const D=d("div",I(I({},z),{},{class:$,"aria-live":"polite","aria-busy":l.value}),[m(i.value),y?d("div",{class:`${i.value}-text`},[y]):null]);if(f&&H(f).length){const c={[`${i.value}-container`]:!0,[`${i.value}-blur`]:l.value};return v(d("div",{class:[`${i.value}-nested-loading`,n.wrapperClassName,S.value]},[l.value&&d("div",{key:"loading"},[D]),d("div",{class:c,key:"container"},[f])]))}return v(D)}}});C.setDefaultIndicator=tn;C.install=function(n){return n.component(C.name,C),n};function en(){let n,o;return{promise:new Promise((e,i)=>{n=e,o=i}),resolve:n,reject:o}}const an=F("task-store",()=>{const n=V([]);let o=!1,s=!1;const{promise:e,resolve:i}=en(),p=t=>n.value.find(a=>a.task_id===t),h=t=>{n.value.push(t)},v=t=>{const a=n.value.findIndex(r=>r.task_id===t);a>-1&&n.value.splice(a,1)},S=t=>{const a=n.value.findIndex(r=>r.task_id===t.task_id);a>=0&&n.value.splice(a,1,t)},l=async()=>{if(!s){s=!0;try{const{data:t,error:a}=await J("/api/tasks").json();!a.value&&t.value&&(n.value=t.value,o=!0)}finally{s=!1,i(n.value)}}};return{get tasks(){return o||l(),n},get onReady(){return o||l(),e},getTask:p,addTask:h,removeTask:v,updateTask:S}});export{C as S,an as u};
