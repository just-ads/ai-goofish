import{bw as $t,bx as jt,by as oa,bz as la,bA as ia,bB as sa,bC as ra,bD as da,t as oe,a5 as dt,s as Be,d as ae,r as L,R as q,c as n,z as we,aw as be,v as Fe,y as V,J as pe,P as Je,as as Q,a0 as Ke,k as de,B as ua,C as ca,bE as pa,ak as xt,A as he,ay as Le,at as Re,b0 as va,D as fa,F as ma,G as Ht,aN as ba,a$ as Wt,x as Vt,a7 as ga,U as ya,ac as ha,a4 as _a,ah as st,S as $a,bF as xa,W as wa,V as Ve,L as Ca,az as Sa,bh as Ta,bG as ka,I as ut,a as O,b as f,e as l,aT as ze,w as b,aS as Me,f as B,o as T,Z as Gt,u as J,aV as ee,g as le,aA as Ut,al as _e,b4 as Ce,aU as K,bH as Ft,aL as je,ax as Kt,bI as Xt,n as Ne,h as P,M as Ie,m as Xe,bJ as Pa,_ as Ia,i as rt,T as Oa}from"./index-DgK67I79.js";import{i as Aa,u as wt,S as Ye,a as Ze,D as Ea}from"./index-BZD0rE4Z.js";import{_ as ct}from"./index-B8Lg8DRs.js";import{P as Oe,_ as Ra,E as Ct}from"./EditOutlined-C8JkjoRY.js";import{D as pt}from"./DeleteOutlined-DqDsUdfA.js";import{T as Ba}from"./index-DLifK0ln.js";import{s as Pe}from"./utils-CaOhPUe8.js";import{u as La,E as Na,D as Da,M as za,_ as Ma}from"./index-BQyjP3Aq.js";import{i as St}from"./slide-D6BByi5n.js";function ja(e,t,o,u){if(!$t(e))return e;t=jt(t,e);for(var i=-1,a=t.length,s=a-1,r=e;r!=null&&++i<a;){var p=oa(t[i]),c=o;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(i!=s){var d=r[p];c=void 0,c===void 0&&(c=$t(d)?d:la(t[i+1])?[]:{})}ia(r,p,c),r=r[p]}return e}function Ha(e,t,o){for(var u=-1,i=t.length,a={};++u<i;){var s=t[u],r=sa(e,s);o(r,s)&&ja(a,jt(s,e),r)}return a}function Wa(e,t){return Ha(e,t,function(o,u){return ra(e,u)})}var qt=da(function(e,t){return e==null?{}:Wa(e,t)});function Va(e){const t=oe(),o=oe(!1);function u(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];o.value||(Be.cancel(t.value),t.value=Be(()=>{e(...a)}))}return dt(()=>{o.value=!0,Be.cancel(t.value)}),u}function Ga(e){const t=oe([]),o=oe(typeof e=="function"?e():e),u=Va(()=>{let a=o.value;t.value.forEach(s=>{a=s(a)}),t.value=[],o.value=a});function i(a){t.value.push(a),u()}return[o,i]}const Ua=ae({compatConfig:{MODE:3},name:"TabNode",props:{id:{type:String},prefixCls:{type:String},tab:{type:Object},active:{type:Boolean},closable:{type:Boolean},editable:{type:Object},onClick:{type:Function},onResize:{type:Function},renderWrapper:{type:Function},removeAriaLabel:{type:String},onFocus:{type:Function}},emits:["click","resize","remove","focus"],setup(e,t){let{expose:o,attrs:u}=t;const i=L();function a(p){var c;!((c=e.tab)===null||c===void 0)&&c.disabled||e.onClick(p)}o({domRef:i});function s(p){var c;p.preventDefault(),p.stopPropagation(),e.editable.onEdit("remove",{key:(c=e.tab)===null||c===void 0?void 0:c.key,event:p})}const r=q(()=>{var p;return e.editable&&e.closable!==!1&&!(!((p=e.tab)===null||p===void 0)&&p.disabled)});return()=>{var p;const{prefixCls:c,id:d,active:y,tab:{key:g,tab:x,disabled:k,closeIcon:_},renderWrapper:v,removeAriaLabel:h,editable:A,onFocus:U}=e,j=`${c}-tab`,S=n("div",{key:g,ref:i,class:we(j,{[`${j}-with-remove`]:r.value,[`${j}-active`]:y,[`${j}-disabled`]:k}),style:u.style,onClick:a},[n("div",{role:"tab","aria-selected":y,id:d&&`${d}-tab-${g}`,class:`${j}-btn`,"aria-controls":d&&`${d}-panel-${g}`,"aria-disabled":k,tabindex:k?null:0,onClick:w=>{w.stopPropagation(),a(w)},onKeydown:w=>{[be.SPACE,be.ENTER].includes(w.which)&&(w.preventDefault(),a(w))},onFocus:U},[typeof x=="function"?x():x]),r.value&&n("button",{type:"button","aria-label":h||"remove",tabindex:0,class:`${j}-remove`,onClick:w=>{w.stopPropagation(),s(w)}},[_?.()||((p=A.removeIcon)===null||p===void 0?void 0:p.call(A))||"×"])]);return v?v(S):S}}}),Tt={width:0,height:0,left:0,top:0};function Fa(e,t){const o=L(new Map);return Fe(()=>{var u,i;const a=new Map,s=e.value,r=t.value.get((u=s[0])===null||u===void 0?void 0:u.key)||Tt,p=r.left+r.width;for(let c=0;c<s.length;c+=1){const{key:d}=s[c];let y=t.value.get(d);y||(y=t.value.get((i=s[c-1])===null||i===void 0?void 0:i.key)||Tt);const g=a.get(d)||V({},y);g.right=p-g.left-g.width,a.set(d,g)}o.value=new Map(a)}),o}const Jt=ae({compatConfig:{MODE:3},name:"AddButton",inheritAttrs:!1,props:{prefixCls:String,editable:{type:Object},locale:{type:Object,default:void 0}},setup(e,t){let{expose:o,attrs:u}=t;const i=L();return o({domRef:i}),()=>{const{prefixCls:a,editable:s,locale:r}=e;return!s||s.showAdd===!1?null:n("button",{ref:i,type:"button",class:`${a}-nav-add`,style:u.style,"aria-label":r?.addAriaLabel||"Add tab",onClick:p=>{s.onEdit("add",{event:p})}},[s.addIcon?s.addIcon():"+"])}}}),Ka={prefixCls:{type:String},id:{type:String},tabs:{type:Object},rtl:{type:Boolean},tabBarGutter:{type:Number},activeKey:{type:[String,Number]},mobile:{type:Boolean},moreIcon:Je.any,moreTransitionName:{type:String},editable:{type:Object},locale:{type:Object,default:void 0},removeAriaLabel:String,onTabClick:{type:Function},popupClassName:String,getPopupContainer:pe()},Xa=ae({compatConfig:{MODE:3},name:"OperationNode",inheritAttrs:!1,props:Ka,emits:["tabClick"],slots:Object,setup(e,t){let{attrs:o,slots:u}=t;const[i,a]=Q(!1),[s,r]=Q(null),p=x=>{const k=e.tabs.filter(h=>!h.disabled);let _=k.findIndex(h=>h.key===s.value)||0;const v=k.length;for(let h=0;h<v;h+=1){_=(_+x+v)%v;const A=k[_];if(!A.disabled){r(A.key);return}}},c=x=>{const{which:k}=x;if(!i.value){[be.DOWN,be.SPACE,be.ENTER].includes(k)&&(a(!0),x.preventDefault());return}switch(k){case be.UP:p(-1),x.preventDefault();break;case be.DOWN:p(1),x.preventDefault();break;case be.ESC:a(!1);break;case be.SPACE:case be.ENTER:s.value!==null&&e.onTabClick(s.value,x);break}},d=q(()=>`${e.id}-more-popup`),y=q(()=>s.value!==null?`${d.value}-${s.value}`:null),g=(x,k)=>{x.preventDefault(),x.stopPropagation(),e.editable.onEdit("remove",{key:k,event:x})};return Ke(()=>{de(s,()=>{const x=document.getElementById(y.value);x&&x.scrollIntoView&&x.scrollIntoView(!1)},{flush:"post",immediate:!0})}),de(i,()=>{i.value||r(null)}),La({}),()=>{var x;const{prefixCls:k,id:_,tabs:v,locale:h,mobile:A,moreIcon:U=((x=u.moreIcon)===null||x===void 0?void 0:x.call(u))||n(Na,null,null),moreTransitionName:j,editable:S,tabBarGutter:w,rtl:C,onTabClick:R,popupClassName:H}=e;if(!v.length)return null;const $=`${k}-dropdown`,m=h?.dropdownAriaLabel,W={[C?"marginRight":"marginLeft"]:w};v.length||(W.visibility="hidden",W.order=1);const F=we({[`${$}-rtl`]:C,[`${H}`]:!0}),ve=A?null:n(Da,{prefixCls:$,trigger:["hover"],visible:i.value,transitionName:j,onVisibleChange:a,overlayClassName:F,mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:e.getPopupContainer},{overlay:()=>n(za,{onClick:M=>{let{key:ue,domEvent:N}=M;R(ue,N),a(!1)},id:d.value,tabindex:-1,role:"listbox","aria-activedescendant":y.value,selectedKeys:[s.value],"aria-label":m!==void 0?m:"expanded dropdown"},{default:()=>[v.map(M=>{var ue,N;const se=S&&M.closable!==!1&&!M.disabled;return n(Ma,{key:M.key,id:`${d.value}-${M.key}`,role:"option","aria-controls":_&&`${_}-panel-${M.key}`,disabled:M.disabled},{default:()=>[n("span",null,[typeof M.tab=="function"?M.tab():M.tab]),se&&n("button",{type:"button","aria-label":e.removeAriaLabel||"remove",tabindex:0,class:`${$}-menu-item-remove`,onClick:ie=>{ie.stopPropagation(),g(ie,M.key)}},[((ue=M.closeIcon)===null||ue===void 0?void 0:ue.call(M))||((N=S.removeIcon)===null||N===void 0?void 0:N.call(S))||"×"])]})})]}),default:()=>n("button",{type:"button",class:`${k}-nav-more`,style:W,tabindex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":d.value,id:`${_}-more`,"aria-expanded":i.value,onKeydown:c},[U])});return n("div",{class:we(`${k}-nav-operations`,o.class),style:o.style},[ve,n(Jt,{prefixCls:k,locale:h,editable:S},null)])}}}),Yt=Symbol("tabsContextKey"),qa=e=>{ca(Yt,e)},Zt=()=>ua(Yt,{tabs:L([]),prefixCls:L()}),Ja=.1,kt=.01,Ue=20,Pt=Math.pow(.995,Ue);function Ya(e,t){const[o,u]=Q(),[i,a]=Q(0),[s,r]=Q(0),[p,c]=Q(),d=L();function y(S){const{screenX:w,screenY:C}=S.touches[0];u({x:w,y:C}),clearInterval(d.value)}function g(S){if(!o.value)return;S.preventDefault();const{screenX:w,screenY:C}=S.touches[0],R=w-o.value.x,H=C-o.value.y;t(R,H),u({x:w,y:C});const $=Date.now();r($-i.value),a($),c({x:R,y:H})}function x(){if(!o.value)return;const S=p.value;if(u(null),c(null),S){const w=S.x/s.value,C=S.y/s.value,R=Math.abs(w),H=Math.abs(C);if(Math.max(R,H)<Ja)return;let $=w,m=C;d.value=setInterval(()=>{if(Math.abs($)<kt&&Math.abs(m)<kt){clearInterval(d.value);return}$*=Pt,m*=Pt,t($*Ue,m*Ue)},Ue)}}const k=L();function _(S){const{deltaX:w,deltaY:C}=S;let R=0;const H=Math.abs(w),$=Math.abs(C);H===$?R=k.value==="x"?w:C:H>$?(R=w,k.value="x"):(R=C,k.value="y"),t(-R,-R)&&S.preventDefault()}const v=L({onTouchStart:y,onTouchMove:g,onTouchEnd:x,onWheel:_});function h(S){v.value.onTouchStart(S)}function A(S){v.value.onTouchMove(S)}function U(S){v.value.onTouchEnd(S)}function j(S){v.value.onWheel(S)}Ke(()=>{var S,w;document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",U,{passive:!1}),(S=e.value)===null||S===void 0||S.addEventListener("touchstart",h,{passive:!1}),(w=e.value)===null||w===void 0||w.addEventListener("wheel",j,{passive:!1})}),dt(()=>{document.removeEventListener("touchmove",A),document.removeEventListener("touchend",U)})}function It(e,t){const o=L(e);function u(i){const a=typeof i=="function"?i(o.value):i;a!==o.value&&t(a,o.value),o.value=a}return[o,u]}const Za=()=>{const e=L(new Map),t=o=>u=>{e.value.set(o,u)};return pa(()=>{e.value=new Map}),[t,e]},Ot={width:0,height:0,left:0,top:0,right:0},Qa=()=>({id:{type:String},tabPosition:{type:String},activeKey:{type:[String,Number]},rtl:{type:Boolean},animated:Le(),editable:Le(),moreIcon:Je.any,moreTransitionName:{type:String},mobile:{type:Boolean},tabBarGutter:{type:Number},renderTabBar:{type:Function},locale:Le(),popupClassName:String,getPopupContainer:pe(),onTabClick:{type:Function},onTabScroll:{type:Function}}),en=(e,t)=>{const{offsetWidth:o,offsetHeight:u,offsetTop:i,offsetLeft:a}=e,{width:s,height:r,x:p,y:c}=e.getBoundingClientRect();return Math.abs(s-o)<1?[s,r,p-t.x,c-t.y]:[o,u,a,i]},At=ae({compatConfig:{MODE:3},name:"TabNavList",inheritAttrs:!1,props:Qa(),slots:Object,emits:["tabClick","tabScroll"],setup(e,t){let{attrs:o,slots:u}=t;const{tabs:i,prefixCls:a}=Zt(),s=oe(),r=oe(),p=oe(),c=oe(),[d,y]=Za(),g=q(()=>e.tabPosition==="top"||e.tabPosition==="bottom"),[x,k]=It(0,(E,I)=>{g.value&&e.onTabScroll&&e.onTabScroll({direction:E>I?"left":"right"})}),[_,v]=It(0,(E,I)=>{!g.value&&e.onTabScroll&&e.onTabScroll({direction:E>I?"top":"bottom"})}),[h,A]=Q(0),[U,j]=Q(0),[S,w]=Q(null),[C,R]=Q(null),[H,$]=Q(0),[m,W]=Q(0),[F,ve]=Ga(new Map),M=Fa(i,F),ue=q(()=>`${a.value}-nav-operations-hidden`),N=oe(0),se=oe(0);Fe(()=>{g.value?e.rtl?(N.value=0,se.value=Math.max(0,h.value-S.value)):(N.value=Math.min(0,S.value-h.value),se.value=0):(N.value=Math.min(0,C.value-U.value),se.value=0)});const ie=E=>E<N.value?N.value:E>se.value?se.value:E,Se=oe(),[te,D]=Q(),ge=()=>{D(Date.now())},Te=()=>{clearTimeout(Se.value)},He=(E,I)=>{E(z=>ie(z+I))};Ya(s,(E,I)=>{if(g.value){if(S.value>=h.value)return!1;He(k,E)}else{if(C.value>=U.value)return!1;He(v,I)}return Te(),ge(),!0}),de(te,()=>{Te(),te.value&&(Se.value=setTimeout(()=>{D(0)},100))});const ke=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activeKey;const I=M.value.get(E)||{width:0,height:0,left:0,right:0,top:0};if(g.value){let z=x.value;e.rtl?I.right<x.value?z=I.right:I.right+I.width>x.value+S.value&&(z=I.right+I.width-S.value):I.left<-x.value?z=-I.left:I.left+I.width>-x.value+S.value&&(z=-(I.left+I.width-S.value)),v(0),k(ie(z))}else{let z=_.value;I.top<-_.value?z=-I.top:I.top+I.height>-_.value+C.value&&(z=-(I.top+I.height-C.value)),k(0),v(ie(z))}},et=oe(0),tt=oe(0);Fe(()=>{let E,I,z,G,Y,X;const fe=M.value;["top","bottom"].includes(e.tabPosition)?(E="width",G=S.value,Y=h.value,X=H.value,I=e.rtl?"right":"left",z=Math.abs(x.value)):(E="height",G=C.value,Y=h.value,X=m.value,I="top",z=-_.value);let ne=G;Y+X>G&&Y<G&&(ne=G-X);const ce=i.value;if(!ce.length)return[et.value,tt.value]=[0,0];const me=ce.length;let xe=me;for(let re=0;re<me;re+=1){const ye=fe.get(ce[re].key)||Ot;if(ye[I]+ye[E]>z+ne){xe=re-1;break}}let Z=0;for(let re=me-1;re>=0;re-=1)if((fe.get(ce[re].key)||Ot)[I]<z){Z=re+1;break}return[et.value,tt.value]=[Z,xe]});const ft=()=>{ve(()=>{var E;const I=new Map,z=(E=r.value)===null||E===void 0?void 0:E.getBoundingClientRect();return i.value.forEach(G=>{let{key:Y}=G;const X=y.value.get(Y),fe=X?.$el||X;if(fe){const[ne,ce,me,xe]=en(fe,z);I.set(Y,{width:ne,height:ce,left:me,top:xe})}}),I})};de(()=>i.value.map(E=>E.key).join("%%"),()=>{ft()},{flush:"post"});const at=()=>{var E,I,z,G,Y;const X=((E=s.value)===null||E===void 0?void 0:E.offsetWidth)||0,fe=((I=s.value)===null||I===void 0?void 0:I.offsetHeight)||0,ne=((z=c.value)===null||z===void 0?void 0:z.$el)||{},ce=ne.offsetWidth||0,me=ne.offsetHeight||0;w(X),R(fe),$(ce),W(me);const xe=(((G=r.value)===null||G===void 0?void 0:G.offsetWidth)||0)-ce,Z=(((Y=r.value)===null||Y===void 0?void 0:Y.offsetHeight)||0)-me;A(xe),j(Z),ft()},mt=q(()=>[...i.value.slice(0,et.value),...i.value.slice(tt.value+1)]),[ea,ta]=Q(),$e=q(()=>M.value.get(e.activeKey)),bt=oe(),gt=()=>{Be.cancel(bt.value)};de([$e,g,()=>e.rtl],()=>{const E={};$e.value&&(g.value?(e.rtl?E.right=Re($e.value.right):E.left=Re($e.value.left),E.width=Re($e.value.width)):(E.top=Re($e.value.top),E.height=Re($e.value.height))),gt(),bt.value=Be(()=>{ta(E)})}),de([()=>e.activeKey,$e,M,g],()=>{ke()},{flush:"post"}),de([()=>e.rtl,()=>e.tabBarGutter,()=>e.activeKey,()=>i.value],()=>{at()},{flush:"post"});const nt=E=>{let{position:I,prefixCls:z,extra:G}=E;if(!G)return null;const Y=G?.({position:I});return Y?n("div",{class:`${z}-extra-content`},[Y]):null};return dt(()=>{Te(),gt()}),()=>{const{id:E,animated:I,activeKey:z,rtl:G,editable:Y,locale:X,tabPosition:fe,tabBarGutter:ne,onTabClick:ce}=e,{class:me,style:xe}=o,Z=a.value,re=!!mt.value.length,ye=`${Z}-nav-wrap`;let ot,lt,yt,ht;g.value?G?(lt=x.value>0,ot=x.value+S.value<h.value):(ot=x.value<0,lt=-x.value+S.value<h.value):(yt=_.value<0,ht=-_.value+C.value<U.value);const We={};fe==="top"||fe==="bottom"?We[G?"marginRight":"marginLeft"]=typeof ne=="number"?`${ne}px`:ne:We.marginTop=typeof ne=="number"?`${ne}px`:ne;const _t=i.value.map((it,aa)=>{const{key:Ee}=it;return n(Ua,{id:E,prefixCls:Z,key:Ee,tab:it,style:aa===0?void 0:We,closable:it.closable,editable:Y,active:Ee===z,removeAriaLabel:X?.removeAriaLabel,ref:d(Ee),onClick:na=>{ce(Ee,na)},onFocus:()=>{ke(Ee),ge(),s.value&&(G||(s.value.scrollLeft=0),s.value.scrollTop=0)}},u)});return n("div",{role:"tablist",class:we(`${Z}-nav`,me),style:xe,onKeydown:()=>{ge()}},[n(nt,{position:"left",prefixCls:Z,extra:u.leftExtra},null),n(xt,{onResize:at},{default:()=>[n("div",{class:we(ye,{[`${ye}-ping-left`]:ot,[`${ye}-ping-right`]:lt,[`${ye}-ping-top`]:yt,[`${ye}-ping-bottom`]:ht}),ref:s},[n(xt,{onResize:at},{default:()=>[n("div",{ref:r,class:`${Z}-nav-list`,style:{transform:`translate(${x.value}px, ${_.value}px)`,transition:te.value?"none":void 0}},[_t,n(Jt,{ref:c,prefixCls:Z,locale:X,editable:Y,style:V(V({},_t.length===0?void 0:We),{visibility:re?"hidden":null})},null),n("div",{class:we(`${Z}-ink-bar`,{[`${Z}-ink-bar-animated`]:I.inkBar}),style:ea.value},null)])]})])]}),n(Xa,he(he({},e),{},{removeAriaLabel:X?.removeAriaLabel,ref:p,prefixCls:Z,tabs:mt.value,class:!re&&ue.value}),qt(u,["moreIcon"])),n(nt,{position:"right",prefixCls:Z,extra:u.rightExtra},null),n(nt,{position:"right",prefixCls:Z,extra:u.tabBarExtraContent},null)])}}}),tn=ae({compatConfig:{MODE:3},name:"TabPanelList",inheritAttrs:!1,props:{activeKey:{type:[String,Number]},id:{type:String},rtl:{type:Boolean},animated:{type:Object,default:void 0},tabPosition:{type:String},destroyInactiveTabPane:{type:Boolean}},setup(e){const{tabs:t,prefixCls:o}=Zt();return()=>{const{id:u,activeKey:i,animated:a,tabPosition:s,rtl:r,destroyInactiveTabPane:p}=e,c=a.tabPane,d=o.value,y=t.value.findIndex(g=>g.key===i);return n("div",{class:`${d}-content-holder`},[n("div",{class:[`${d}-content`,`${d}-content-${s}`,{[`${d}-content-animated`]:c}],style:y&&c?{[r?"marginRight":"marginLeft"]:`-${y}00%`}:null},[t.value.map(g=>va(g.node,{key:g.key,prefixCls:d,tabKey:g.key,id:u,animated:c,active:g.key===i,destroyInactiveTabPane:p}))])])}}}),an=e=>{const{componentCls:t,motionDurationSlow:o}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${o}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${o}`}}}}},[St(e,"slide-up"),St(e,"slide-down")]]},nn=e=>{const{componentCls:t,tabsCardHorizontalPadding:o,tabsCardHeadBackground:u,tabsCardGutter:i,colorSplit:a}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:o,background:u,border:`${e.lineWidth}px ${e.lineType} ${a}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:e.colorPrimary,background:e.colorBgContainer},[`${t}-ink-bar`]:{visibility:"hidden"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:`${i}px`}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:`${i}px`}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadiusLG}px 0 0 ${e.borderRadiusLG}px`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},on=e=>{const{componentCls:t,tabsHoverColor:o,dropdownEdgeChildVerticalPadding:u}=e;return{[`${t}-dropdown`]:V(V({},Ht(e)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${u}px 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":V(V({},ba),{display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${e.paddingXXS}px ${e.paddingSM}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:o}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},ln=e=>{const{componentCls:t,margin:o,colorSplit:u}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:`0 0 ${o}px 0`,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${e.lineWidth}px ${e.lineType} ${u}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:`${o}px`,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:e.controlHeight*1.25,[`${t}-tab`]:{padding:`${e.paddingXS}px ${e.paddingLG}px`,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:`${e.margin}px 0 0 0`},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:`-${e.lineWidth}px`},borderLeft:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:-e.lineWidth},borderRight:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},sn=e=>{const{componentCls:t,padding:o}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px 0`,fontSize:e.fontSize}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${o}px 0`,fontSize:e.fontSizeLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXXS*1.5}px ${o}px`}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${e.borderRadius}px ${e.borderRadius}px`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${e.borderRadius}px ${e.borderRadius}px 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadius}px ${e.borderRadius}px 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadius}px 0 0 ${e.borderRadius}px`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px ${o}px ${e.paddingXXS*1.5}px`}}}}}},rn=e=>{const{componentCls:t,tabsActiveColor:o,tabsHoverColor:u,iconCls:i,tabsHorizontalGutter:a}=e,s=`${t}-tab`;return{[s]:{position:"relative",display:"inline-flex",alignItems:"center",padding:`${e.paddingSM}px 0`,fontSize:`${e.fontSize}px`,background:"transparent",border:0,outline:"none",cursor:"pointer","&-btn, &-remove":V({"&:focus:not(:focus-visible), &:active":{color:o}},Wt(e)),"&-btn":{outline:"none",transition:"all 0.3s"},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:-e.marginXXS},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading}},"&:hover":{color:u},[`&${s}-active ${s}-btn`]:{color:e.colorPrimary,textShadow:e.tabsActiveTextShadow},[`&${s}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${s}-disabled ${s}-btn, &${s}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${s}-remove ${i}`]:{margin:0},[i]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${s} + ${s}`]:{margin:{_skip_check_:!0,value:`0 0 0 ${a}px`}}}},dn=e=>{const{componentCls:t,tabsHorizontalGutter:o,iconCls:u,tabsCardGutter:i}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:`0 0 0 ${o}px`},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[u]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:`${e.marginSM}px`}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:`${e.marginXS}px`},marginLeft:{_skip_check_:!0,value:`-${e.marginXXS}px`},[u]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:`${i}px`},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},un=e=>{const{componentCls:t,tabsCardHorizontalPadding:o,tabsCardHeight:u,tabsCardGutter:i,tabsHoverColor:a,tabsActiveColor:s,colorSplit:r}=e;return{[t]:V(V(V(V({},Ht(e)),{display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:o,background:"transparent",border:0,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.controlHeightLG/8,transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:V({minWidth:`${u}px`,marginLeft:{_skip_check_:!0,value:`${i}px`},padding:`0 ${e.paddingXS}px`,background:"transparent",border:`${e.lineWidth}px ${e.lineType} ${r}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:a},"&:active, &:focus:not(:focus-visible)":{color:s}},Wt(e))},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.colorPrimary,pointerEvents:"none"}}),rn(e)),{[`${t}-content`]:{position:"relative",display:"flex",width:"100%","&-animated":{transition:"margin 0.3s"}},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:{outline:"none",flex:"none",width:"100%"}}),[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping'])`]:{justifyContent:"center"}}}}}},cn=fa("Tabs",e=>{const t=e.controlHeightLG,o=ma(e,{tabsHoverColor:e.colorPrimaryHover,tabsActiveColor:e.colorPrimaryActive,tabsCardHorizontalPadding:`${(t-Math.round(e.fontSize*e.lineHeight))/2-e.lineWidth}px ${e.padding}px`,tabsCardHeight:t,tabsCardGutter:e.marginXXS/2,tabsHorizontalGutter:32,tabsCardHeadBackground:e.colorFillAlter,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120});return[sn(o),dn(o),ln(o),on(o),nn(o),un(o),an(o)]},e=>({zIndexPopup:e.zIndexPopupBase+50}));let Et=0;const Qt=()=>({prefixCls:{type:String},id:{type:String},popupClassName:String,getPopupContainer:pe(),activeKey:{type:[String,Number]},defaultActiveKey:{type:[String,Number]},direction:Ve(),animated:Sa([Boolean,Object]),renderTabBar:pe(),tabBarGutter:{type:Number},tabBarStyle:Le(),tabPosition:Ve(),destroyInactiveTabPane:Ca(),hideAdd:Boolean,type:Ve(),size:Ve(),centered:Boolean,onEdit:pe(),onChange:pe(),onTabClick:pe(),onTabScroll:pe(),"onUpdate:activeKey":pe(),locale:Le(),onPrevClick:pe(),onNextClick:pe(),tabBarExtraContent:Je.any});function pn(e){return e.map(t=>{if(ha(t)){const o=V({},t.props||{});for(const[g,x]of Object.entries(o))delete o[g],o[_a(g)]=x;const u=t.children||{},i=t.key!==void 0?t.key:void 0,{tab:a=u.tab,disabled:s,forceRender:r,closable:p,animated:c,active:d,destroyInactiveTabPane:y}=o;return V(V({key:i},o),{node:t,closeIcon:u.closeIcon,tab:a,disabled:s===""||s,forceRender:r===""||r,closable:p===""||p,animated:c===""||c,active:d===""||d,destroyInactiveTabPane:y===""||y})}return null}).filter(t=>t)}const vn=ae({compatConfig:{MODE:3},name:"InternalTabs",inheritAttrs:!1,props:V(V({},Vt(Qt(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}})),{tabs:wa()}),slots:Object,setup(e,t){let{attrs:o,slots:u}=t;st(e.onPrevClick===void 0&&e.onNextClick===void 0,"Tabs","`onPrevClick / @prevClick` and `onNextClick / @nextClick` has been removed. Please use `onTabScroll / @tabScroll` instead."),st(e.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` prop has been removed. Please use `rightExtra` slot instead."),st(u.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` slot is deprecated. Please use `rightExtra` slot instead.");const{prefixCls:i,direction:a,size:s,rootPrefixCls:r,getPopupContainer:p}=$a("tabs",e),[c,d]=cn(i),y=q(()=>a.value==="rtl"),g=q(()=>{const{animated:C,tabPosition:R}=e;return C===!1||["left","right"].includes(R)?{inkBar:!1,tabPane:!1}:C===!0?{inkBar:!0,tabPane:!0}:V({inkBar:!0,tabPane:!1},typeof C=="object"?C:{})}),[x,k]=Q(!1);Ke(()=>{k(Aa())});const[_,v]=wt(()=>{var C;return(C=e.tabs[0])===null||C===void 0?void 0:C.key},{value:q(()=>e.activeKey),defaultValue:e.defaultActiveKey}),[h,A]=Q(()=>e.tabs.findIndex(C=>C.key===_.value));Fe(()=>{var C;let R=e.tabs.findIndex(H=>H.key===_.value);R===-1&&(R=Math.max(0,Math.min(h.value,e.tabs.length-1)),v((C=e.tabs[R])===null||C===void 0?void 0:C.key)),A(R)});const[U,j]=wt(null,{value:q(()=>e.id)}),S=q(()=>x.value&&!["left","right"].includes(e.tabPosition)?"top":e.tabPosition);Ke(()=>{e.id||(j(`rc-tabs-${Et}`),Et+=1)});const w=(C,R)=>{var H,$;(H=e.onTabClick)===null||H===void 0||H.call(e,C,R);const m=C!==_.value;v(C),m&&(($=e.onChange)===null||$===void 0||$.call(e,C))};return qa({tabs:q(()=>e.tabs),prefixCls:i}),()=>{const{id:C,type:R,tabBarGutter:H,tabBarStyle:$,locale:m,destroyInactiveTabPane:W,renderTabBar:F=u.renderTabBar,onTabScroll:ve,hideAdd:M,centered:ue}=e,N={id:U.value,activeKey:_.value,animated:g.value,tabPosition:S.value,rtl:y.value,mobile:x.value};let se;R==="editable-card"&&(se={onEdit:(D,ge)=>{let{key:Te,event:He}=ge;var ke;(ke=e.onEdit)===null||ke===void 0||ke.call(e,D==="add"?He:Te,D)},removeIcon:()=>n(xa,null,null),addIcon:u.addIcon?u.addIcon:()=>n(Oe,null,null),showAdd:M!==!0});let ie;const Se=V(V({},N),{moreTransitionName:`${r.value}-slide-up`,editable:se,locale:m,tabBarGutter:H,onTabClick:w,onTabScroll:ve,style:$,getPopupContainer:p.value,popupClassName:we(e.popupClassName,d.value)});F?ie=F(V(V({},Se),{DefaultTabBar:At})):ie=n(At,Se,qt(u,["moreIcon","leftExtra","rightExtra","tabBarExtraContent"]));const te=i.value;return c(n("div",he(he({},o),{},{id:C,class:we(te,`${te}-${S.value}`,{[d.value]:!0,[`${te}-${s.value}`]:s.value,[`${te}-card`]:["card","editable-card"].includes(R),[`${te}-editable-card`]:R==="editable-card",[`${te}-centered`]:ue,[`${te}-mobile`]:x.value,[`${te}-editable`]:R==="editable-card",[`${te}-rtl`]:y.value},o.class)}),[ie,n(tn,he(he({destroyInactiveTabPane:W},N),{},{animated:g.value}),null)]))}}}),De=ae({compatConfig:{MODE:3},name:"ATabs",inheritAttrs:!1,props:Vt(Qt(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}}),slots:Object,setup(e,t){let{attrs:o,slots:u,emit:i}=t;const a=s=>{i("update:activeKey",s),i("change",s)};return()=>{var s;const r=pn(ga((s=u.default)===null||s===void 0?void 0:s.call(u)));return n(vn,he(he(he({},ya(e,["onUpdate:activeKey"])),o),{},{onChange:a,tabs:r}),u)}}}),fn=()=>({tab:Je.any,disabled:{type:Boolean},forceRender:{type:Boolean},closable:{type:Boolean},animated:{type:Boolean},active:{type:Boolean},destroyInactiveTabPane:{type:Boolean},prefixCls:{type:String},tabKey:{type:[String,Number]},id:{type:String}}),qe=ae({compatConfig:{MODE:3},name:"ATabPane",inheritAttrs:!1,__ANT_TAB_PANE:!0,props:fn(),slots:Object,setup(e,t){let{attrs:o,slots:u}=t;const i=L(e.forceRender);de([()=>e.active,()=>e.destroyInactiveTabPane],()=>{e.active?i.value=!0:e.destroyInactiveTabPane&&(i.value=!1)},{immediate:!0});const a=q(()=>e.active?{}:e.animated?{visibility:"hidden",height:0,overflowY:"hidden"}:{display:"none"});return()=>{var s;const{prefixCls:r,forceRender:p,id:c,active:d,tabKey:y}=e;return n("div",{id:c&&`${c}-panel-${y}`,role:"tabpanel",tabindex:d?0:-1,"aria-labelledby":c&&`${c}-tab-${y}`,"aria-hidden":!d,style:[a.value,o.style],class:[`${r}-tabpane`,d&&`${r}-tabpane-active`,o.class]},[(d||i.value||p)&&((s=u.default)===null||s===void 0?void 0:s.call(u))])}}});De.TabPane=qe;De.install=function(e){return e.component(De.name,De),e.component(qe.name,qe),e};const mn=Ta(ka);var bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function Rt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable}))),u.forEach(function(i){gn(e,i,o[i])})}return e}function gn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var vt=function(t,o){var u=Rt({},t,o.attrs);return n(ut,Rt({},u,{icon:bn}),null)};vt.displayName="SaveOutlined";vt.inheritAttrs=!1;var yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function Bt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable}))),u.forEach(function(i){hn(e,i,o[i])})}return e}function hn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Ae=function(t,o){var u=Bt({},t,o.attrs);return n(ut,Bt({},u,{icon:yn}),null)};Ae.displayName="ThunderboltOutlined";Ae.inheritAttrs=!1;var _n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};function Lt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable}))),u.forEach(function(i){$n(e,i,o[i])})}return e}function $n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Qe=function(t,o){var u=Lt({},t,o.attrs);return n(ut,Lt({},u,{icon:_n}),null)};Qe.displayName="WarningOutlined";Qe.inheritAttrs=!1;const xn={class:"space-y-4"},wn={class:"space-x-2 text-orange"},Cn=ae({__name:"BrowserSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,u=t,i=q(()=>o.config),a=s=>{const r={...i.value,...s};u("update:config",r)};return(s,r)=>{const p=ct,c=Me,d=Ze,y=Ye,g=ze;return T(),O("div",xn,[r[7]||(r[7]=f("h3",{class:"text-lg font-medium"},"浏览器配置",-1)),f("div",wn,[n(l(Qe)),r[2]||(r[2]=f("span",null,"docker 环境下将忽略以下设置",-1))]),n(g,{layout:"vertical",class:"max-w-2xl"},{default:b(()=>[n(c,{label:"无头模式"},{default:b(()=>[n(p,{checked:l(i).browser.headless,onChange:r[0]||(r[0]=x=>{const k={...l(i).browser,headless:!!x};a({browser:k})})},null,8,["checked"]),r[3]||(r[3]=f("span",{class:"ml-2 text-gray-500"},"是否在后台运行浏览器",-1))]),_:1}),n(c,{label:"浏览器类型"},{default:b(()=>[n(y,{value:l(i).browser.channel,class:"w-full",onChange:r[1]||(r[1]=x=>{const k={...l(i).browser,channel:x};a({browser:k})})},{default:b(()=>[n(d,{value:"chrome"},{default:b(()=>[...r[4]||(r[4]=[B("Chrome",-1)])]),_:1}),n(d,{value:"firefox"},{default:b(()=>[...r[5]||(r[5]=[B("Firefox",-1)])]),_:1}),n(d,{value:"webkit"},{default:b(()=>[...r[6]||(r[6]=[B("WebKit",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})])}}}),Sn={class:"space-y-4"},Tn={class:"flex items-center pt-4 border-t border-gray-200"},kn={class:"flex items-center gap-2"},Pn={class:"text-xs"},In={key:0},On={key:1},An={class:"flex justify-between items-start mb-2"},En={class:"text-sm whitespace-pre-wrap font-mono bg-white/50 p-3 rounded"},Rn={key:0,class:"space-y-2"},Bn={class:"text-gray-700"},Ln={key:1,class:"space-y-2"},Nn={class:"text-gray-700"},Nt=ae({__name:"NotifierForm",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const u=e,i=o,a=Gt({...u.modelValue}),s=L(!1),r=L(null),p=L(!1),{data:c}=J("/api/notifier/templates").json();de(a,()=>{i("update:modelValue",{...a})},{deep:!0});const d=_=>c.value?.find(v=>v.type===_),y=_=>{if(!_)return;const v=d(_);if(!v)return P.error("未找到该类型的模板");a.type=v.type,v.template&&Object.entries(v.template).forEach(([h,A])=>{A.default!==void 0&&(a[h]=A.default)})},g=q(()=>a.type?d(a.type)?.template||{}:{}),x=async()=>{const _=[];a.name||_.push("通知名称"),a.type||_.push("通知类型");const v=d(a.type);if(v?.template&&Object.entries(v.template).forEach(([h,A])=>{A.required&&!a[h]&&_.push(A.name)}),_.length>0){P.error(`请填写以下必填字段：${_.join("、")}`);return}try{s.value=!0,r.value=null;const{error:h}=await J("/api/notifier/test").post(a).json();if(h.value)r.value=`❌ 通知连接测试失败

错误信息: ${h.value?.message||"未知错误"}
可能原因:
1. 配置信息错误
2. 通知服务无法访问
3. 网络连接问题`,P.error("通知连接测试失败");else{const A="测试成功",U=a.name;r.value=`✅ 通知连接测试成功！

通知名称: ${U}
通知类型: ${a.type}
测试响应: ${A.substring(0,200)}${A.length>200?"...":""}`,P.success("通知连接测试成功")}p.value=!0}catch(h){r.value=`❌ 测试过程中发生错误

错误信息: ${h.message||"未知错误"}
可能原因:
1. 网络连接中断
2. 服务器无响应
3. 请求超时`,P.error("测试过程中发生错误"),p.value=!0}finally{s.value=!1}},k=()=>{p.value=!1,r.value=null};return t({testNotifier:x,testing:s,testResult:r,testVisible:p}),(_,v)=>{const h=Ut,A=Me,U=Ze,j=Ye,S=Ft,w=Ra,C=je,R=Kt,H=ze;return T(),O("div",Sn,[n(H,{model:l(a),"label-col":{span:5},"wrapper-col":{span:18}},{default:b(()=>[n(A,{label:"通知名称",name:"name",required:""},{default:b(()=>[n(h,{value:l(a).name,"onUpdate:value":v[0]||(v[0]=$=>l(a).name=$),placeholder:"输入通知名称"},null,8,["value"])]),_:1}),n(A,{label:"通知类型",name:"type",required:""},{default:b(()=>[n(j,{placeholder:"选择通知类型",value:l(a).type,"onUpdate:value":v[1]||(v[1]=$=>l(a).type=$),onChange:y,"allow-clear":""},{default:b(()=>[(T(!0),O(_e,null,Ce(l(c),$=>(T(),le(U,{key:$.type,value:$.type},{default:b(()=>[B(K($.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),l(a).type&&l(g)?(T(!0),O(_e,{key:0},Ce(l(g),($,m)=>(T(),le(A,{key:m,label:$.name,name:m,required:$.required},{default:b(()=>[$.type==="password"?(T(),le(S,{key:0,value:l(a)[m],"onUpdate:value":W=>l(a)[m]=W,placeholder:$.placeholder||`输入${$.name}`},null,8,["value","onUpdate:value","placeholder"])):$.type==="number"?(T(),le(w,{key:1,value:l(a)[m],"onUpdate:value":W=>l(a)[m]=W,placeholder:$.placeholder||`输入${$.name}`,style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])):(T(),le(h,{key:2,value:l(a)[m],"onUpdate:value":W=>l(a)[m]=W,placeholder:$.placeholder||`输入${$.name}`},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1032,["label","name","required"]))),128)):ee("",!0),n(A,{"wrapper-col":{offset:5,span:18}},{default:b(()=>[f("div",Tn,[f("div",kn,[n(C,{type:"primary",onClick:x,loading:l(s),disabled:!l(a).name||!l(a).type},{default:b(()=>[n(l(Ae)),v[2]||(v[2]=B(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),!l(a).name||!l(a).type?(T(),le(R,{key:0},{title:b(()=>[f("div",Pn,[l(a).name?ee("",!0):(T(),O("div",In,"请填写通知名称")),l(a).type?ee("",!0):(T(),O("div",On,"请选择通知类型"))])]),default:b(()=>[n(l(Xt),{class:"text-gray-400"})]),_:1})):ee("",!0)]),v[3]||(v[3]=f("span",{class:"text-gray-500 text-sm"}," 测试通过后再保存 ",-1))])]),_:1}),l(p)?(T(),le(A,{key:1,"wrapper-col":{offset:5,span:18}},{default:b(()=>[f("div",{class:Ne(["mt-2 p-4 border rounded",l(r)?.includes("✅")?"border-green-200 bg-green-50":"border-red-200 bg-red-50"])},[f("div",An,[f("h4",{class:Ne(["font-medium",l(r)?.includes("✅")?"text-green-700":"text-red-700"])},K(l(r)?.includes("✅")?"✅ 测试成功":"❌ 测试失败"),3),n(C,{type:"text",size:"small",onClick:k},{default:b(()=>[...v[4]||(v[4]=[B(" 关闭 ",-1)])]),_:1})]),f("div",En,[l(r)?.includes("✅")?(T(),O("div",Rn,[v[5]||(v[5]=f("div",{class:"text-green-700 font-medium"},"配置验证通过！",-1)),f("div",Bn,K(l(r).replace(`✅ 通知连接测试成功！

`,"")),1)])):(T(),O("div",Ln,[v[6]||(v[6]=f("div",{class:"text-red-700 font-medium"},"配置验证失败",-1)),f("div",Nn,K(l(r)?.replace("❌ ","")),1),v[7]||(v[7]=f("div",{class:"text-gray-600 text-xs mt-2"},[B(" 请检查以下配置： "),f("ul",{class:"list-disc pl-4 mt-1"},[f("li",null,"通知类型是否正确"),f("li",null,"配置信息是否完整"),f("li",null,"网络连接是否正常")])],-1))]))])],2)]),_:1})):ee("",!0)]),_:1},8,["model"])])}}}),Dn={class:"flex-col h-full space-y-4"},zn={key:0,class:"flex-col flex-1"},Mn={class:"flex justify-between items-center mb-4"},jn={key:0,class:"flex-1 h-0 space-y-3 overflow-auto"},Hn={class:"flex justify-between items-start"},Wn={class:"flex gap-2.5"},Vn={class:"flex gap-2 ml-4"},Gn={key:1,class:"text-center py-8 border border-dashed border-gray-300 rounded"},Un=ae({__name:"NotificationSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,u=t,{data:i,execute:a}=J("/api/notifier",{initialData:[]}).json(),s=L(!1),r=L(!1),p=q(()=>o.config),c=_=>{const v={...p.value,..._};u("update:config",v)},d=()=>{const _=L({id:"",type:"ntfy",name:"通知1",enable:!0});Ie.confirm({title:"新建通知",width:600,content:Xe(Nt,{modelValue:_.value,"onUpdate:modelValue":v=>_.value=v}),async onOk(){try{s.value=!0;const v=_.value,{error:h}=await J("/api/notifier").post(v).json();h.value?P.error("添加失败"):(P.success("已添加"),await a())}catch{P.error("添加时发生错误")}finally{s.value=!1}}})},y=_=>{const v=i.value?.find(h=>h.id===_);v&&Ie.confirm({title:"确认删除",content:`确定要删除 "${v.name}" 吗？`,async onOk(){try{s.value=!0;const{error:h}=await J(`/api/notifier/${v.id}`).delete().json();h.value?P.error("删除失败"):(P.success("已删除"),await a())}catch{P.error("删除时发生错误")}finally{s.value=!1}}})},g=_=>{const v=i.value?.find(A=>A.id===_);if(!v)return;const h=L(v);Ie.confirm({title:"编辑通知配置",content:Xe(Nt,{modelValue:h.value,"onUpdate:modelValue":A=>h.value=A}),async onOk(){try{s.value=!0;const{error:A}=await J(`/api/notifier/${h.value.id}`).post(h.value).json();A.value?P.error("更新失败"):(P.success("已更新"),await a())}catch{P.error("更新时发生错误")}finally{s.value=!1}}})},x=async _=>{const v=i.value?.find(h=>h.id===_);if(v)try{s.value=!0;const{error:h}=await J(`/api/notifier/${_}`).post({...v,enable:!v.enable}).json();h.value?P.error("请求失败"):(P.success(v.enable?"已禁用":"已启用"),await a())}catch{P.error("请求时发生错误")}finally{s.value=!1}},k=async _=>{const v=i.value?.find(h=>h.id===_);if(v)try{r.value=!0;const{error:h}=await J(`/api/notifier/${v.id}/test`).post().json();h.value?P.error("Notifier连接测试失败"):P.success("Notifier连接测试成功")}catch{P.error("测试Notifier连接时发生错误")}finally{r.value=!1}};return(_,v)=>{const h=ct,A=Me,U=ze,j=je,S=Ba;return T(),O("div",Dn,[v[10]||(v[10]=f("h3",{class:"text-lg font-medium"},"通知配置",-1)),n(U,{layout:"vertical",class:"max-w-2xl"},{default:b(()=>[n(A,{label:"启用通知"},{default:b(()=>[n(h,{checked:l(p).notifications.enabled,onChange:v[0]||(v[0]=w=>{const C={...l(p).notifications,enabled:!!w};c({notifications:C})})},null,8,["checked"]),v[1]||(v[1]=f("span",{class:"ml-2 text-gray-500"},"是否启用消息通知功能",-1))]),_:1})]),_:1}),l(p).notifications.enabled?(T(),O("div",zn,[f("div",Mn,[v[3]||(v[3]=f("h4",{class:"text-md font-medium"},"已配置的通知",-1)),n(j,{type:"primary",onClick:d},{default:b(()=>[n(l(Oe)),v[2]||(v[2]=B(" 添加通知 ",-1))]),_:1})]),l(i)&&l(i).length>0?(T(),O("div",jn,[(T(!0),O(_e,null,Ce(l(i),w=>(T(),O("div",{key:w.id,class:"border border-gray-200 rounded p-4 bg-blueGray hover:border-blue-300 transition-colors"},[f("div",Hn,[f("div",Wn,[w.enable?(T(),le(S,{key:0,color:"success"},{default:b(()=>[...v[4]||(v[4]=[B(" 已启用 ",-1)])]),_:1})):(T(),le(S,{key:1,color:"default"},{default:b(()=>[...v[5]||(v[5]=[B(" 未启用 ",-1)])]),_:1})),n(h,{checked:w.enable,onChange:C=>x(w.id)},null,8,["checked","onChange"]),f("div",null,K(w.name),1),f("div",null,"提供商: "+K(w.type),1)]),f("div",Vn,[n(j,{type:"primary",size:"small",onClick:C=>g(w.id),disabled:l(r)},{default:b(()=>[...v[6]||(v[6]=[B(" 编辑 ",-1)])]),_:1},8,["onClick","disabled"]),n(j,{type:"default",size:"small",onClick:C=>k(w.id),loading:l(r)},{default:b(()=>[n(l(Ae)),v[7]||(v[7]=B(" 测试 ",-1))]),_:1},8,["onClick","loading"]),n(j,{type:"text",danger:"",size:"small",onClick:C=>y(w.id),disabled:l(r)},{default:b(()=>[n(l(pt))]),_:1},8,["onClick","disabled"])])])]))),128))])):(T(),O("div",Gn,[v[9]||(v[9]=f("p",{class:"text-gray-500 mb-4"},"尚未配置任何通知",-1)),n(j,{type:"primary",onClick:d},{default:b(()=>[n(l(Oe)),v[8]||(v[8]=B(" 添加第一个通知 ",-1))]),_:1})]))])):ee("",!0)])}}}),Fn={class:"space-y-4"},Kn={key:0},Xn=ae({__name:"EvaluatorSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,u=t,i=q(()=>o.config),{data:a}=J("/api/ai",{initialData:[]}).json(),s=r=>{const p={...i.value,...r};u("update:config",p)};return(r,p)=>{const c=ct,d=Me,y=Ze,g=Ye,x=ze;return T(),O("div",Fn,[p[4]||(p[4]=f("h3",{class:"text-lg font-medium"},"商品评估器配置",-1)),n(x,{layout:"vertical",class:"max-w-2xl"},{default:b(()=>[n(d,{label:"启用评估器"},{default:b(()=>[n(c,{checked:l(i).evaluator.enabled,onChange:p[0]||(p[0]=k=>{const _={...l(i).evaluator,enabled:!!k};s({evaluator:_})})},null,8,["checked"]),p[3]||(p[3]=f("span",{class:"ml-2 text-gray-500"},"是否启用AI商品分析评估",-1))]),_:1}),l(i).evaluator.enabled?(T(),O("div",Kn,[n(d,{label:"文本分析 AI"},{default:b(()=>[n(g,{value:l(i).evaluator.textAI||void 0,onChange:p[1]||(p[1]=k=>{const _={...l(i).evaluator,textAI:k||null};s({evaluator:_})}),class:"w-full",placeholder:"选择用于文本分析的 AI","allow-clear":""},{default:b(()=>[(T(!0),O(_e,null,Ce(l(a),k=>(T(),le(y,{key:k.id,value:k.id},{default:b(()=>[B(K(k.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(d,{label:"图像分析 AI"},{default:b(()=>[n(g,{value:l(i).evaluator.imageAI||void 0,onChange:p[2]||(p[2]=k=>{const _={...l(i).evaluator,imageAI:k||null};s({evaluator:_})}),class:"w-full",placeholder:"选择用于图像分析的 AI","allow-clear":""},{default:b(()=>[(T(!0),O(_e,null,Ce(l(a),k=>(T(),le(y,{key:k.id,value:k.id},{default:b(()=>[B(K(k.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})])):ee("",!0)]),_:1})])}}});var Ge={exports:{}},Dt;function qn(){return Dt||(Dt=1,(function(e,t){Function("return this")(),(function(o){e&&e.exports&&(t=e.exports=u),t.clone=u;function u(r){var p=typeof r;switch(p){case"object":if(r==null)return r;var c=void 0;return r instanceof Date?(c=new Date,c.setTime(r.getTime()),c):r instanceof RegExp?(c=s(r),c):(c=JSON.parse(JSON.stringify(r)),a(r,c),c);default:return r}}function i(r,p,c){var d=r[c],y=typeof d;switch(y){case"object":if(d instanceof Date){var g=new Date;g.setTime(d.getTime()),p[c]=g}else d instanceof RegExp?p[c]=s(d):d==null?p[c]=d:a(d,p[c]);break;case"number":isNaN(d)?p[c]=NaN:d==1/0&&(p[c]=1/0);break}}function a(r,p){if(r instanceof Array)for(var c=0;c<r.length;c++)i(r,p,c);else{var d=Object.getOwnPropertyNames(r);d.forEach(function(y){i(r,p,y)})}}function s(r){var p=String(r),c=p.lastIndexOf("/");return new RegExp(p.slice(1,c),p.slice(c+1))}})()})(Ge,Ge.exports)),Ge.exports}var Jn=qn();const zt=Pa(Jn),Yn={class:"space-y-4"},Zn={class:"flex flex-col gap-2"},Qn={key:0,class:"mb-2"},eo={class:"font-mono text-sm"},to={class:"text-blue-600"},ao={class:"text-green-600"},no={key:1,class:"flex flex-col gap-2"},oo={class:"flex gap-2"},lo={key:2,class:"flex gap-2"},io={class:"flex flex-col gap-2"},so={key:0,class:"flex flex-col gap-2"},ro={class:"flex gap-2"},uo={key:1},co={class:"mb-2"},po={class:"bg-gray-50 text-black p-3 rounded text-sm overflow-auto max-h-40"},vo={class:"flex gap-2"},fo={class:"flex items-center pt-4 border-t border-gray-200"},mo={class:"flex items-center gap-2"},bo={class:"text-xs"},go={key:0},yo={key:1},ho={key:2},_o={key:3},$o={class:"flex justify-between items-start mb-2"},xo={class:"text-sm whitespace-pre-wrap font-mono bg-white/50 p-3 rounded"},wo={key:0,class:"space-y-2"},Co={class:"text-gray-700"},So={key:1,class:"space-y-2"},To={class:"text-gray-700"},Mt=ae({__name:"AIForm",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const u=e,i=o,a=Gt({...u.modelValue}),s=L(!1),r=L(!1),p=L(!1),c=L(""),d=L(""),{data:y}=J("/api/ai/templates").json();de(a,()=>{i("update:modelValue",{...a})},{deep:!0}),de(()=>a.headers,$=>{c.value=Pe($||{})},{immediate:!0}),de(()=>a.body,$=>{d.value=Pe($||{},null,2)},{immediate:!0});const g=$=>{if(!$)return;const m=y.value?.find(W=>W.id===$);if(!m)return P.error("未找到模板");a.endpoint=m.endpoint,a.model=m.model,a.headers=zt(m.headers),a.body=zt(m.body)},x=()=>{a.headers||(a.headers={});const $=prompt("请输入请求头的键名：");if(!$)return;const m=prompt("请输入请求头的值：");m!==null&&(a.headers[$]=m,c.value=Pe(a.headers))},k=$=>{a.headers&&a.headers[$]&&(delete a.headers[$],c.value=Pe(a.headers))},_=()=>{r.value=!0},v=()=>{try{a.headers=JSON.parse(c.value),r.value=!1,P.success("请求头保存成功")}catch{P.error("JSON格式错误，请检查输入")}},h=()=>{c.value=Pe(a.headers||{}),r.value=!1},A=()=>{p.value=!0},U=()=>{try{a.body=JSON.parse(d.value),p.value=!1,P.success("请求体保存成功")}catch{P.error("JSON格式错误，请检查输入")}},j=()=>{d.value=Pe(a.body||{}),p.value=!1},S=L(!1),w=L(null),C=L(!1),R=async()=>{const $=[];if(a.name||$.push("Agent名称"),a.endpoint||$.push("API端点"),a.model||$.push("模型名称"),a.api_key||$.push("API密钥"),$.length>0){P.error(`请填写以下必填字段：${$.join("、")}`);return}try{S.value=!0,w.value=null;const m={id:"test-"+Date.now(),name:a.name,endpoint:a.endpoint,api_key:a.api_key,model:a.model,proxy:a.proxy||"",headers:a.headers,body:a.body},{error:W,data:F}=await J("/api/ai/test").post(m).json();if(!W.value&&F.value){const ve=F.value.response||"测试成功",M=m.name;w.value=`✅ 连接测试成功！

名称: ${M}
模型: ${m.model}
API端点: ${m.endpoint}
测试响应: ${ve.substring(0,200)}${ve.length>200?"...":""}`,P.success("连接测试成功")}else w.value=`❌ 连接测试失败

错误信息: ${W.value?.message||"未知错误"}
可能原因:
1. API密钥无效
2. 模型名称错误
3. API端点无法访问
4. 网络连接问题
5. 请求头/请求体配置错误`,P.error("连接测试失败");C.value=!0}catch(m){w.value=`❌ 测试过程中发生错误

错误信息: ${m.message||"未知错误"}
可能原因:
1. 网络连接中断
2. 服务器无响应
3. 请求超时`,P.error("测试过程中发生错误"),C.value=!0}finally{S.value=!1}},H=()=>{C.value=!1,w.value=null};return t({testConfig:R,testing:S,testResult:w,testVisible:C}),($,m)=>{const W=Ut,F=Me,ve=Ze,M=Ye,ue=Ft,N=je,se=mn,ie=Ia,Se=Kt,te=ze;return T(),O("div",Yn,[n(te,{model:l(a),"label-col":{span:5},"wrapper-col":{span:18}},{default:b(()=>[n(F,{label:"名称",name:"name",required:""},{default:b(()=>[n(W,{value:l(a).name,"onUpdate:value":m[0]||(m[0]=D=>l(a).name=D),placeholder:"输入名称"},null,8,["value"])]),_:1}),n(F,{label:"模板选择"},{default:b(()=>[n(M,{placeholder:"选择预设模板",onChange:g,"allow-clear":""},{default:b(()=>[(T(!0),O(_e,null,Ce(l(y),D=>(T(),le(ve,{key:D.id,value:D.id},{default:b(()=>[B(K(D.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),n(F,{label:"API端点",name:"endpoint",required:""},{default:b(()=>[n(W,{value:l(a).endpoint,"onUpdate:value":m[1]||(m[1]=D=>l(a).endpoint=D),placeholder:"https://api.openai.com/v1/chat/completions"},null,8,["value"])]),_:1}),n(F,{label:"API密钥"},{default:b(()=>[n(ue,{value:l(a).api_key,"onUpdate:value":m[2]||(m[2]=D=>l(a).api_key=D),placeholder:"输入API密钥"},null,8,["value"])]),_:1}),n(F,{label:"模型名称",name:"model",required:""},{default:b(()=>[n(W,{value:l(a).model,"onUpdate:value":m[3]||(m[3]=D=>l(a).model=D),placeholder:"gpt-3.5-turbo"},null,8,["value"])]),_:1}),n(se,{align:"right"},{default:b(()=>[n(N,{type:"link",onClick:m[4]||(m[4]=D=>s.value=!l(s)),class:"p-0 h-auto"},{default:b(()=>[B(K(l(s)?"收起":"展开")+"高级配置 ",1),n(l(Ea),{class:Ne({"rotate-180":l(s)})},null,8,["class"])]),_:1})]),_:1}),l(s)?(T(),O(_e,{key:0},[n(F,{label:"代理地址"},{default:b(()=>[n(W,{value:l(a).proxy,"onUpdate:value":m[5]||(m[5]=D=>l(a).proxy=D),placeholder:"代理地址 http://proxy:port"},null,8,["value"])]),_:1}),n(F,{label:"请求头配置"},{default:b(()=>[f("div",Zn,[l(a).headers&&Object.keys(l(a).headers).length>0?(T(),O("div",Qn,[(T(!0),O(_e,null,Ce(l(a).headers,(D,ge)=>(T(),O("div",{key:ge,class:"flex items-center justify-between py-1 px-2 bg-gray-50 rounded mb-1"},[f("span",eo,[f("span",to,K(ge),1),m[8]||(m[8]=B(": ",-1)),f("span",ao,K(D),1)]),n(N,{type:"text",danger:"",size:"small",onClick:Te=>k(ge)},{default:b(()=>[n(l(pt))]),_:1},8,["onClick"])]))),128))])):ee("",!0),l(r)?(T(),O("div",no,[n(ie,{value:l(c),"onUpdate:value":m[6]||(m[6]=D=>rt(c)?c.value=D:null),rows:6,placeholder:'输入JSON格式的请求头，例如：{"Authorization": "Bearer {key}", "Content-Type": "application/json"}'},null,8,["value"]),f("div",oo,[n(N,{type:"primary",onClick:v},{default:b(()=>[...m[9]||(m[9]=[B("保存",-1)])]),_:1}),n(N,{onClick:h},{default:b(()=>[...m[10]||(m[10]=[B("取消",-1)])]),_:1})])])):(T(),O("div",lo,[n(N,{onClick:x,type:"dashed"},{default:b(()=>[n(l(Oe)),m[11]||(m[11]=B(" 添加请求头 ",-1))]),_:1}),n(N,{onClick:_},{default:b(()=>[n(l(Ct)),m[12]||(m[12]=B(" 编辑JSON ",-1))]),_:1})]))])]),_:1}),n(F,{label:"请求体配置"},{default:b(()=>[f("div",io,[l(p)?(T(),O("div",so,[n(ie,{value:l(d),"onUpdate:value":m[7]||(m[7]=D=>rt(d)?d.value=D:null),rows:8,placeholder:'输入JSON格式的请求体模板，例如：{"model": "{model}", "messages": {messages}, "temperature": 0.2}',有好感:""},null,8,["value"]),f("div",ro,[n(N,{type:"primary",onClick:U},{default:b(()=>[...m[13]||(m[13]=[B("保存",-1)])]),_:1}),n(N,{onClick:j},{default:b(()=>[...m[14]||(m[14]=[B("取消",-1)])]),_:1})])])):(T(),O("div",uo,[f("div",co,[f("pre",po,K(l(d)),1)]),f("div",vo,[n(N,{onClick:A},{default:b(()=>[n(l(Ct)),m[15]||(m[15]=B(" 编辑请求体 ",-1))]),_:1})])]))])]),_:1})],64)):ee("",!0),n(F,{"wrapper-col":{offset:5,span:18}},{default:b(()=>[f("div",fo,[f("div",mo,[n(N,{type:"primary",onClick:R,loading:l(S),disabled:!l(a).name||!l(a).endpoint||!l(a).model||!l(a).api_key},{default:b(()=>[n(l(Ae)),m[16]||(m[16]=B(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),!l(a).name||!l(a).endpoint||!l(a).model||!l(a).api_key?(T(),le(Se,{key:0},{title:b(()=>[f("div",bo,[l(a).name?ee("",!0):(T(),O("div",go,"请填写Agent名称")),l(a).endpoint?ee("",!0):(T(),O("div",yo,"请填写API端点")),l(a).model?ee("",!0):(T(),O("div",ho,"请填写模型名称")),l(a).api_key?ee("",!0):(T(),O("div",_o,"请填写API密钥"))])]),default:b(()=>[n(l(Xt),{class:"text-gray-400"})]),_:1})):ee("",!0)]),m[17]||(m[17]=f("span",{class:"text-gray-500 text-sm"}," 测试通过后再保存 ",-1))])]),_:1}),l(C)?(T(),le(F,{key:1,"wrapper-col":{offset:5,span:18}},{default:b(()=>[f("div",{class:Ne(["mt-2 p-4 border rounded",l(w)?.includes("✅")?"border-green-200 bg-green-50":"border-red-200 bg-red-50"])},[f("div",$o,[f("h4",{class:Ne(["font-medium",l(w)?.includes("✅")?"text-green-700":"text-red-700"])},K(l(w)?.includes("✅")?"✅ 测试成功":"❌ 测试失败"),3),n(N,{type:"text",size:"small",onClick:H},{default:b(()=>[...m[18]||(m[18]=[B(" 关闭 ",-1)])]),_:1})]),f("div",xo,[l(w)?.includes("✅")?(T(),O("div",wo,[m[19]||(m[19]=f("div",{class:"text-green-700 font-medium"},"配置验证通过！",-1)),f("div",Co,K(l(w).replace(`✅ Agent连接测试成功！

`,"")),1)])):(T(),O("div",So,[m[20]||(m[20]=f("div",{class:"text-red-700 font-medium"},"配置验证失败",-1)),f("div",To,K(l(w)?.replace("❌ ","")),1),m[21]||(m[21]=f("div",{class:"text-gray-600 text-xs mt-2"},[B(" 请检查以下配置： "),f("ul",{class:"list-disc pl-4 mt-1"},[f("li",null,"API端点是否正确"),f("li",null,"API密钥是否有效"),f("li",null,"模型名称是否正确"),f("li",null,"网络连接是否正常")])],-1))]))])],2)]),_:1})):ee("",!0)]),_:1},8,["model"])])}}}),ko={class:"flex-col h-full space-y-4"},Po={class:"flex-col flex-1"},Io={class:"flex justify-between items-center mb-4"},Oo={key:0,class:"space-y-3 h-0 flex-1 overflow-auto"},Ao={class:"flex justify-between items-start"},Eo={class:"flex-1"},Ro={class:"flex items-center gap-2 mb-2"},Bo={class:"font-medium text-gray-800"},Lo={class:"text-xs px-2 py-1 rounded text-gray-600"},No={class:"text-sm text-gray-600 space-y-1"},Do={class:"flex items-center gap-2"},zo={class:"text-xs px-2 py-1 rounded truncate max-w-md"},Mo={class:"flex items-center gap-2"},jo={class:"text-xs"},Ho={class:"flex gap-2 ml-4"},Wo={key:1,class:"text-center py-8 border border-dashed border-gray-300 rounded"},Vo=ae({__name:"AISettings",setup(e){const{data:t,execute:o}=J("/api/ai",{initialData:[]}).json(),u=L(!1),i=L(!1),a=()=>{const c=L({id:"",name:"AI",endpoint:"",api_key:"",model:"",headers:{Authorization:"Bearer {key}","Content-Type":"application/json"},body:{model:"{model}",messages:"{messages}"}});Ie.confirm({title:"创建 AI 配置",width:600,content:Xe(Mt,{modelValue:c.value,"onUpdate:modelValue":d=>c.value=d}),async onOk(){try{u.value=!0;const{error:d}=await J("/api/ai").post(c.value).json();d.value?P.error("添加失败"):(P.success("已添加"),await o())}catch{P.error("添加时发生错误")}finally{u.value=!1}}})},s=c=>{const d=t.value?.find(y=>y.id===c);d&&Ie.confirm({title:"确认删除",content:`确定要删除 "${d.name}" 吗？`,async onOk(){try{u.value=!0;const{error:y}=await J(`/api/ai/${d.id}`).delete().json();y.value?P.error("删除失败"):(P.success("已删除"),await o())}catch{P.error("删除时发生错误")}finally{u.value=!1}}})},r=c=>{const d=t.value?.find(g=>g.id===c);if(!d)return;const y=L(d);Ie.confirm({title:"编辑 AI 配置",width:600,content:Xe(Mt,{modelValue:y.value,"onUpdate:modelValue":g=>y.value=g}),async onOk(){try{u.value=!0;const{error:g}=await J(`/api/ai/${y.value.id}`).post(y.value).json();g.value?P.error("更新失败"):(P.success("已更新"),await o())}catch{P.error("更新时发生错误")}finally{u.value=!1}}})},p=async c=>{const d=t.value?.find(y=>y.id===c);if(d)try{i.value=!0;const{error:y}=await J(`/api/ai/${d.id}/test`).post().json();y.value?P.error("连接测试失败"):P.success("连接测试成功")}catch{P.error("测试连接时发生错误")}finally{i.value=!1}};return(c,d)=>{const y=je;return T(),O("div",ko,[d[8]||(d[8]=f("h3",{class:"text-lg font-medium"},"AI 配置",-1)),f("div",Po,[f("div",Io,[d[1]||(d[1]=f("h4",{class:"text-md font-medium"},"已配置的 AI",-1)),n(y,{type:"primary",onClick:a,loading:l(u)},{default:b(()=>[n(l(Oe)),d[0]||(d[0]=B(" 添加AI ",-1))]),_:1},8,["loading"])]),l(t)&&l(t).length>0?(T(),O("div",Oo,[(T(!0),O(_e,null,Ce(l(t),g=>(T(),O("div",{key:g.id,class:"border border-gray-200 rounded p-4 bg-blueGray hover:border-blue-300 transition-colors"},[f("div",Ao,[f("div",Eo,[f("div",Ro,[f("h5",Bo,K(g.name),1),f("span",Lo,K(g.model),1)]),f("div",No,[f("div",Do,[d[2]||(d[2]=f("span",{class:"font-medium"},"端点:",-1)),f("code",zo,K(g.endpoint),1)]),f("div",Mo,[d[3]||(d[3]=f("span",{class:"font-medium"},"API密钥:",-1)),f("span",jo,K(g.api_key?"••••••••":"未设置"),1)])])]),f("div",Ho,[n(y,{type:"primary",size:"small",onClick:x=>r(g.id),disabled:l(i)},{default:b(()=>[...d[4]||(d[4]=[B(" 编辑 ",-1)])]),_:1},8,["onClick","disabled"]),n(y,{type:"default",size:"small",onClick:x=>p(g.id),loading:l(i)},{default:b(()=>[n(l(Ae)),d[5]||(d[5]=B(" 测试 ",-1))]),_:1},8,["onClick","loading"]),n(y,{type:"text",danger:"",size:"small",onClick:x=>s(g.id),disabled:l(i)},{default:b(()=>[n(l(pt))]),_:1},8,["onClick","disabled"])])])]))),128))])):(T(),O("div",Wo,[d[7]||(d[7]=f("p",{class:"text-gray-500 mb-4"},"尚未配置任何 AI",-1)),n(y,{type:"primary",onClick:a},{default:b(()=>[n(l(Oe)),d[6]||(d[6]=B(" 添加第一个 AI ",-1))]),_:1})]))])])}}}),Go={class:"flex flex-col h-full gap-4"},Uo={class:"glass-card flex-1 flex flex-col p-6 animate-fade-in-up"},Fo={class:"flex justify-between mb-6 items-center border-b border-white/5 pb-4"},Ko={class:"flex items-center space-x-4"},Xo={key:0,class:"flex items-center gap-2 text-warning px-3 py-1 bg-warning/10 rounded-full border border-warning/20"},qo={class:"h-full overflow-y-auto custom-scrollbar p-2"},Jo={class:"h-full overflow-y-auto custom-scrollbar p-2"},Yo={class:"h-full overflow-y-auto custom-scrollbar p-2"},Zo={class:"h-full overflow-y-auto custom-scrollbar p-2"},rl=ae({__name:"system",setup(e){const t=L("browser"),o=L(!1),u=L(!1),{data:i,execute:a}=J("api/system",{initialData:{browser:{headless:!0,channel:"chrome"},notifications:{enabled:!1,providers:[]},evaluator:{enabled:!0,textAI:null,imageAI:null}}}).json(),s=p=>{o.value=!0,i.value=p},r=async()=>{u.value=!0;const{error:p}=await J("api/system").post(i.value).json();u.value=!1,p.value?P.error("保存失败"):(P.success("保存成功"),o.value=!1,await a())};return(p,c)=>{const d=je,y=qe,g=De;return T(),O("div",Go,[f("div",Uo,[f("div",Fo,[c[3]||(c[3]=f("h2",{class:"text-xl font-bold gradient-text m-0"},"系统设置",-1)),f("div",Ko,[n(Oa,{name:"fade"},{default:b(()=>[l(o)?(T(),O("div",Xo,[n(l(Qe),{class:"animate-pulse"}),c[1]||(c[1]=f("span",{class:"text-sm font-medium"},"配置未保存",-1))])):ee("",!0)]),_:1}),n(d,{type:"primary",onClick:r,loading:l(u),class:"!bg-primary-600 hover:!bg-primary-500 shadow-lg shadow-primary-500/20 border-none"},{icon:b(()=>[n(l(vt))]),default:b(()=>[c[2]||(c[2]=B(" 保存配置 ",-1))]),_:1},8,["loading"])])]),n(g,{activeKey:l(t),"onUpdate:activeKey":c[0]||(c[0]=x=>rt(t)?t.value=x:null),class:"h-0 flex-1 [&>.ant-tabs-content]:h-full custom-tabs",tabBarStyle:{borderBottom:"1px solid rgba(255,255,255,0.05)"}},{default:b(()=>[n(y,{key:"browser",tab:"浏览器设置"},{default:b(()=>[f("div",qo,[n(Cn,{config:l(i),"onUpdate:config":s},null,8,["config"])])]),_:1}),n(y,{key:"notifications",tab:"通知设置"},{default:b(()=>[f("div",Jo,[n(Un,{config:l(i),"onUpdate:config":s},null,8,["config"])])]),_:1}),n(y,{key:"evaluator",tab:"商品评估器设置"},{default:b(()=>[f("div",Yo,[n(Xn,{config:l(i),"onUpdate:config":s},null,8,["config"])])]),_:1}),n(y,{key:"ai",tab:"AI设置"},{default:b(()=>[f("div",Zo,[n(Vo)])]),_:1})]),_:1},8,["activeKey"])])])}}});export{rl as default};
