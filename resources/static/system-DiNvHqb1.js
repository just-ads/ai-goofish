import{bH as xt,bI as Ht,bJ as la,bK as sa,bL as ia,bM as ra,bN as da,bO as ua,t as se,a5 as ut,s as Ne,d as oe,r as j,R as J,c as n,z as Ce,aw as be,v as Fe,y as G,J as ve,P as Ye,as as ae,a0 as Xe,k as ue,B as ca,C as pa,bP as va,ak as wt,A as he,ay as De,at as Le,b0 as fa,D as ma,F as ba,G as Wt,aN as ga,a$ as Vt,x as Gt,a7 as ya,U as ha,ac as _a,a4 as $a,ah as rt,S as xa,bb as wa,W as Ca,V as Ge,L as Sa,az as Ta,bs as ka,bQ as Pa,I as ct,a as A,b as v,e as s,aT as ze,w as m,aS as He,h as M,o as S,Z as Oe,u as Y,aV as q,f as ie,aA as Ut,al as _e,bf as Se,aU as V,bR as Kt,aL as We,ax as Ft,bS as Xt,n as Me,g as D,M as Ie,m as qe,bT as Ia,_ as Oa,i as dt,T as Aa}from"./index-DKDCp-85.js";import{i as Ea,u as Ct,S as Ze,a as Qe,D as Ra}from"./index-CD-x6yEB.js";import{_ as pt}from"./index-DeI2LtTS.js";import{P as Ae,_ as Ba,E as St}from"./EditOutlined-CoMNoDK6.js";import{D as vt}from"./DeleteOutlined-Cq03KDVB.js";import{T as qt}from"./index-DE9UJz50.js";import{s as Pe}from"./utils-CaOhPUe8.js";import{u as La,E as Na,D as Da,M as Ma,_ as ja}from"./index-CA2sqixd.js";import{i as Tt}from"./slide-BKpG2H03.js";function za(e,t,o,d){if(!xt(e))return e;t=Ht(t,e);for(var l=-1,a=t.length,r=a-1,i=e;i!=null&&++l<a;){var c=la(t[l]),u=o;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(l!=r){var f=i[c];u=void 0,u===void 0&&(u=xt(f)?f:sa(t[l+1])?[]:{})}ia(i,c,u),i=i[c]}return e}function Ha(e,t,o){for(var d=-1,l=t.length,a={};++d<l;){var r=t[d],i=ra(e,r);o(i,r)&&za(a,Ht(r,e),i)}return a}function Wa(e,t){return Ha(e,t,function(o,d){return da(e,d)})}var Jt=ua(function(e,t){return e==null?{}:Wa(e,t)});function Va(e){const t=se(),o=se(!1);function d(){for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];o.value||(Ne.cancel(t.value),t.value=Ne(()=>{e(...a)}))}return ut(()=>{o.value=!0,Ne.cancel(t.value)}),d}function Ga(e){const t=se([]),o=se(typeof e=="function"?e():e),d=Va(()=>{let a=o.value;t.value.forEach(r=>{a=r(a)}),t.value=[],o.value=a});function l(a){t.value.push(a),d()}return[o,l]}const Ua=oe({compatConfig:{MODE:3},name:"TabNode",props:{id:{type:String},prefixCls:{type:String},tab:{type:Object},active:{type:Boolean},closable:{type:Boolean},editable:{type:Object},onClick:{type:Function},onResize:{type:Function},renderWrapper:{type:Function},removeAriaLabel:{type:String},onFocus:{type:Function}},emits:["click","resize","remove","focus"],setup(e,t){let{expose:o,attrs:d}=t;const l=j();function a(c){var u;!((u=e.tab)===null||u===void 0)&&u.disabled||e.onClick(c)}o({domRef:l});function r(c){var u;c.preventDefault(),c.stopPropagation(),e.editable.onEdit("remove",{key:(u=e.tab)===null||u===void 0?void 0:u.key,event:c})}const i=J(()=>{var c;return e.editable&&e.closable!==!1&&!(!((c=e.tab)===null||c===void 0)&&c.disabled)});return()=>{var c;const{prefixCls:u,id:f,active:T,tab:{key:b,tab:p,disabled:g,closeIcon:$},renderWrapper:h,removeAriaLabel:P,editable:C,onFocus:x}=e,O=`${u}-tab`,w=n("div",{key:b,ref:l,class:Ce(O,{[`${O}-with-remove`]:i.value,[`${O}-active`]:T,[`${O}-disabled`]:g}),style:d.style,onClick:a},[n("div",{role:"tab","aria-selected":T,id:f&&`${f}-tab-${b}`,class:`${O}-btn`,"aria-controls":f&&`${f}-panel-${b}`,"aria-disabled":g,tabindex:g?null:0,onClick:R=>{R.stopPropagation(),a(R)},onKeydown:R=>{[be.SPACE,be.ENTER].includes(R.which)&&(R.preventDefault(),a(R))},onFocus:x},[typeof p=="function"?p():p]),i.value&&n("button",{type:"button","aria-label":P||"remove",tabindex:0,class:`${O}-remove`,onClick:R=>{R.stopPropagation(),r(R)}},[$?.()||((c=C.removeIcon)===null||c===void 0?void 0:c.call(C))||"×"])]);return h?h(w):w}}}),kt={width:0,height:0,left:0,top:0};function Ka(e,t){const o=j(new Map);return Fe(()=>{var d,l;const a=new Map,r=e.value,i=t.value.get((d=r[0])===null||d===void 0?void 0:d.key)||kt,c=i.left+i.width;for(let u=0;u<r.length;u+=1){const{key:f}=r[u];let T=t.value.get(f);T||(T=t.value.get((l=r[u-1])===null||l===void 0?void 0:l.key)||kt);const b=a.get(f)||G({},T);b.right=c-b.left-b.width,a.set(f,b)}o.value=new Map(a)}),o}const Yt=oe({compatConfig:{MODE:3},name:"AddButton",inheritAttrs:!1,props:{prefixCls:String,editable:{type:Object},locale:{type:Object,default:void 0}},setup(e,t){let{expose:o,attrs:d}=t;const l=j();return o({domRef:l}),()=>{const{prefixCls:a,editable:r,locale:i}=e;return!r||r.showAdd===!1?null:n("button",{ref:l,type:"button",class:`${a}-nav-add`,style:d.style,"aria-label":i?.addAriaLabel||"Add tab",onClick:c=>{r.onEdit("add",{event:c})}},[r.addIcon?r.addIcon():"+"])}}}),Fa={prefixCls:{type:String},id:{type:String},tabs:{type:Object},rtl:{type:Boolean},tabBarGutter:{type:Number},activeKey:{type:[String,Number]},mobile:{type:Boolean},moreIcon:Ye.any,moreTransitionName:{type:String},editable:{type:Object},locale:{type:Object,default:void 0},removeAriaLabel:String,onTabClick:{type:Function},popupClassName:String,getPopupContainer:ve()},Xa=oe({compatConfig:{MODE:3},name:"OperationNode",inheritAttrs:!1,props:Fa,emits:["tabClick"],slots:Object,setup(e,t){let{attrs:o,slots:d}=t;const[l,a]=ae(!1),[r,i]=ae(null),c=p=>{const g=e.tabs.filter(P=>!P.disabled);let $=g.findIndex(P=>P.key===r.value)||0;const h=g.length;for(let P=0;P<h;P+=1){$=($+p+h)%h;const C=g[$];if(!C.disabled){i(C.key);return}}},u=p=>{const{which:g}=p;if(!l.value){[be.DOWN,be.SPACE,be.ENTER].includes(g)&&(a(!0),p.preventDefault());return}switch(g){case be.UP:c(-1),p.preventDefault();break;case be.DOWN:c(1),p.preventDefault();break;case be.ESC:a(!1);break;case be.SPACE:case be.ENTER:r.value!==null&&e.onTabClick(r.value,p);break}},f=J(()=>`${e.id}-more-popup`),T=J(()=>r.value!==null?`${f.value}-${r.value}`:null),b=(p,g)=>{p.preventDefault(),p.stopPropagation(),e.editable.onEdit("remove",{key:g,event:p})};return Xe(()=>{ue(r,()=>{const p=document.getElementById(T.value);p&&p.scrollIntoView&&p.scrollIntoView(!1)},{flush:"post",immediate:!0})}),ue(l,()=>{l.value||i(null)}),La({}),()=>{var p;const{prefixCls:g,id:$,tabs:h,locale:P,mobile:C,moreIcon:x=((p=d.moreIcon)===null||p===void 0?void 0:p.call(d))||n(Na,null,null),moreTransitionName:O,editable:w,tabBarGutter:R,rtl:_,onTabClick:L,popupClassName:B}=e;if(!h.length)return null;const k=`${g}-dropdown`,I=P?.dropdownAriaLabel,y={[_?"marginRight":"marginLeft"]:R};h.length||(y.visibility="hidden",y.order=1);const Q=Ce({[`${k}-rtl`]:_,[`${B}`]:!0}),F=C?null:n(Da,{prefixCls:k,trigger:["hover"],visible:l.value,transitionName:O,onVisibleChange:a,overlayClassName:Q,mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:e.getPopupContainer},{overlay:()=>n(Ma,{onClick:H=>{let{key:ce,domEvent:ee}=H;L(ce,ee),a(!1)},id:f.value,tabindex:-1,role:"listbox","aria-activedescendant":T.value,selectedKeys:[r.value],"aria-label":I!==void 0?I:"expanded dropdown"},{default:()=>[h.map(H=>{var ce,ee;const U=w&&H.closable!==!1&&!H.disabled;return n(ja,{key:H.key,id:`${f.value}-${H.key}`,role:"option","aria-controls":$&&`${$}-panel-${H.key}`,disabled:H.disabled},{default:()=>[n("span",null,[typeof H.tab=="function"?H.tab():H.tab]),U&&n("button",{type:"button","aria-label":e.removeAriaLabel||"remove",tabindex:0,class:`${k}-menu-item-remove`,onClick:re=>{re.stopPropagation(),b(re,H.key)}},[((ce=H.closeIcon)===null||ce===void 0?void 0:ce.call(H))||((ee=w.removeIcon)===null||ee===void 0?void 0:ee.call(w))||"×"])]})})]}),default:()=>n("button",{type:"button",class:`${g}-nav-more`,style:y,tabindex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":f.value,id:`${$}-more`,"aria-expanded":l.value,onKeydown:u},[x])});return n("div",{class:Ce(`${g}-nav-operations`,o.class),style:o.style},[F,n(Yt,{prefixCls:g,locale:P,editable:w},null)])}}}),Zt=Symbol("tabsContextKey"),qa=e=>{pa(Zt,e)},Qt=()=>ca(Zt,{tabs:j([]),prefixCls:j()}),Ja=.1,Pt=.01,Ke=20,It=Math.pow(.995,Ke);function Ya(e,t){const[o,d]=ae(),[l,a]=ae(0),[r,i]=ae(0),[c,u]=ae(),f=j();function T(w){const{screenX:R,screenY:_}=w.touches[0];d({x:R,y:_}),clearInterval(f.value)}function b(w){if(!o.value)return;w.preventDefault();const{screenX:R,screenY:_}=w.touches[0],L=R-o.value.x,B=_-o.value.y;t(L,B),d({x:R,y:_});const k=Date.now();i(k-l.value),a(k),u({x:L,y:B})}function p(){if(!o.value)return;const w=c.value;if(d(null),u(null),w){const R=w.x/r.value,_=w.y/r.value,L=Math.abs(R),B=Math.abs(_);if(Math.max(L,B)<Ja)return;let k=R,I=_;f.value=setInterval(()=>{if(Math.abs(k)<Pt&&Math.abs(I)<Pt){clearInterval(f.value);return}k*=It,I*=It,t(k*Ke,I*Ke)},Ke)}}const g=j();function $(w){const{deltaX:R,deltaY:_}=w;let L=0;const B=Math.abs(R),k=Math.abs(_);B===k?L=g.value==="x"?R:_:B>k?(L=R,g.value="x"):(L=_,g.value="y"),t(-L,-L)&&w.preventDefault()}const h=j({onTouchStart:T,onTouchMove:b,onTouchEnd:p,onWheel:$});function P(w){h.value.onTouchStart(w)}function C(w){h.value.onTouchMove(w)}function x(w){h.value.onTouchEnd(w)}function O(w){h.value.onWheel(w)}Xe(()=>{var w,R;document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("touchend",x,{passive:!1}),(w=e.value)===null||w===void 0||w.addEventListener("touchstart",P,{passive:!1}),(R=e.value)===null||R===void 0||R.addEventListener("wheel",O,{passive:!1})}),ut(()=>{document.removeEventListener("touchmove",C),document.removeEventListener("touchend",x)})}function Ot(e,t){const o=j(e);function d(l){const a=typeof l=="function"?l(o.value):l;a!==o.value&&t(a,o.value),o.value=a}return[o,d]}const Za=()=>{const e=j(new Map),t=o=>d=>{e.value.set(o,d)};return va(()=>{e.value=new Map}),[t,e]},At={width:0,height:0,left:0,top:0,right:0},Qa=()=>({id:{type:String},tabPosition:{type:String},activeKey:{type:[String,Number]},rtl:{type:Boolean},animated:De(),editable:De(),moreIcon:Ye.any,moreTransitionName:{type:String},mobile:{type:Boolean},tabBarGutter:{type:Number},renderTabBar:{type:Function},locale:De(),popupClassName:String,getPopupContainer:ve(),onTabClick:{type:Function},onTabScroll:{type:Function}}),en=(e,t)=>{const{offsetWidth:o,offsetHeight:d,offsetTop:l,offsetLeft:a}=e,{width:r,height:i,x:c,y:u}=e.getBoundingClientRect();return Math.abs(r-o)<1?[r,i,c-t.x,u-t.y]:[o,d,a,l]},Et=oe({compatConfig:{MODE:3},name:"TabNavList",inheritAttrs:!1,props:Qa(),slots:Object,emits:["tabClick","tabScroll"],setup(e,t){let{attrs:o,slots:d}=t;const{tabs:l,prefixCls:a}=Qt(),r=se(),i=se(),c=se(),u=se(),[f,T]=Za(),b=J(()=>e.tabPosition==="top"||e.tabPosition==="bottom"),[p,g]=Ot(0,(N,E)=>{b.value&&e.onTabScroll&&e.onTabScroll({direction:N>E?"left":"right"})}),[$,h]=Ot(0,(N,E)=>{!b.value&&e.onTabScroll&&e.onTabScroll({direction:N>E?"top":"bottom"})}),[P,C]=ae(0),[x,O]=ae(0),[w,R]=ae(null),[_,L]=ae(null),[B,k]=ae(0),[I,y]=ae(0),[Q,F]=Ga(new Map),H=Ka(l,Q),ce=J(()=>`${a.value}-nav-operations-hidden`),ee=se(0),U=se(0);Fe(()=>{b.value?e.rtl?(ee.value=0,U.value=Math.max(0,P.value-w.value)):(ee.value=Math.min(0,w.value-P.value),U.value=0):(ee.value=Math.min(0,_.value-x.value),U.value=0)});const re=N=>N<ee.value?ee.value:N>U.value?U.value:N,$e=se(),[ne,Te]=ae(),z=()=>{Te(Date.now())},ge=()=>{clearTimeout($e.value)},Re=(N,E)=>{N(W=>re(W+E))};Ya(r,(N,E)=>{if(b.value){if(w.value>=P.value)return!1;Re(g,N)}else{if(_.value>=x.value)return!1;Re(h,E)}return ge(),z(),!0}),ue(ne,()=>{ge(),ne.value&&($e.value=setTimeout(()=>{Te(0)},100))});const ke=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activeKey;const E=H.value.get(N)||{width:0,height:0,left:0,right:0,top:0};if(b.value){let W=p.value;e.rtl?E.right<p.value?W=E.right:E.right+E.width>p.value+w.value&&(W=E.right+E.width-w.value):E.left<-p.value?W=-E.left:E.left+E.width>-p.value+w.value&&(W=-(E.left+E.width-w.value)),h(0),g(re(W))}else{let W=$.value;E.top<-$.value?W=-E.top:E.top+E.height>-$.value+_.value&&(W=-(E.top+E.height-_.value)),g(0),h(re(W))}},tt=se(0),at=se(0);Fe(()=>{let N,E,W,K,Z,X;const fe=H.value;["top","bottom"].includes(e.tabPosition)?(N="width",K=w.value,Z=P.value,X=B.value,E=e.rtl?"right":"left",W=Math.abs(p.value)):(N="height",K=_.value,Z=P.value,X=I.value,E="top",W=-$.value);let le=K;Z+X>K&&Z<K&&(le=K-X);const pe=l.value;if(!pe.length)return[tt.value,at.value]=[0,0];const me=pe.length;let we=me;for(let de=0;de<me;de+=1){const ye=fe.get(pe[de].key)||At;if(ye[E]+ye[N]>W+le){we=de-1;break}}let te=0;for(let de=me-1;de>=0;de-=1)if((fe.get(pe[de].key)||At)[E]<W){te=de+1;break}return[tt.value,at.value]=[te,we]});const mt=()=>{F(()=>{var N;const E=new Map,W=(N=i.value)===null||N===void 0?void 0:N.getBoundingClientRect();return l.value.forEach(K=>{let{key:Z}=K;const X=T.value.get(Z),fe=X?.$el||X;if(fe){const[le,pe,me,we]=en(fe,W);E.set(Z,{width:le,height:pe,left:me,top:we})}}),E})};ue(()=>l.value.map(N=>N.key).join("%%"),()=>{mt()},{flush:"post"});const nt=()=>{var N,E,W,K,Z;const X=((N=r.value)===null||N===void 0?void 0:N.offsetWidth)||0,fe=((E=r.value)===null||E===void 0?void 0:E.offsetHeight)||0,le=((W=u.value)===null||W===void 0?void 0:W.$el)||{},pe=le.offsetWidth||0,me=le.offsetHeight||0;R(X),L(fe),k(pe),y(me);const we=(((K=i.value)===null||K===void 0?void 0:K.offsetWidth)||0)-pe,te=(((Z=i.value)===null||Z===void 0?void 0:Z.offsetHeight)||0)-me;C(we),O(te),mt()},bt=J(()=>[...l.value.slice(0,tt.value),...l.value.slice(at.value+1)]),[ta,aa]=ae(),xe=J(()=>H.value.get(e.activeKey)),gt=se(),yt=()=>{Ne.cancel(gt.value)};ue([xe,b,()=>e.rtl],()=>{const N={};xe.value&&(b.value?(e.rtl?N.right=Le(xe.value.right):N.left=Le(xe.value.left),N.width=Le(xe.value.width)):(N.top=Le(xe.value.top),N.height=Le(xe.value.height))),yt(),gt.value=Ne(()=>{aa(N)})}),ue([()=>e.activeKey,xe,H,b],()=>{ke()},{flush:"post"}),ue([()=>e.rtl,()=>e.tabBarGutter,()=>e.activeKey,()=>l.value],()=>{nt()},{flush:"post"});const ot=N=>{let{position:E,prefixCls:W,extra:K}=N;if(!K)return null;const Z=K?.({position:E});return Z?n("div",{class:`${W}-extra-content`},[Z]):null};return ut(()=>{ge(),yt()}),()=>{const{id:N,animated:E,activeKey:W,rtl:K,editable:Z,locale:X,tabPosition:fe,tabBarGutter:le,onTabClick:pe}=e,{class:me,style:we}=o,te=a.value,de=!!bt.value.length,ye=`${te}-nav-wrap`;let lt,st,ht,_t;b.value?K?(st=p.value>0,lt=p.value+w.value<P.value):(lt=p.value<0,st=-p.value+w.value<P.value):(ht=$.value<0,_t=-$.value+_.value<x.value);const Ve={};fe==="top"||fe==="bottom"?Ve[K?"marginRight":"marginLeft"]=typeof le=="number"?`${le}px`:le:Ve.marginTop=typeof le=="number"?`${le}px`:le;const $t=l.value.map((it,na)=>{const{key:Be}=it;return n(Ua,{id:N,prefixCls:te,key:Be,tab:it,style:na===0?void 0:Ve,closable:it.closable,editable:Z,active:Be===W,removeAriaLabel:X?.removeAriaLabel,ref:f(Be),onClick:oa=>{pe(Be,oa)},onFocus:()=>{ke(Be),z(),r.value&&(K||(r.value.scrollLeft=0),r.value.scrollTop=0)}},d)});return n("div",{role:"tablist",class:Ce(`${te}-nav`,me),style:we,onKeydown:()=>{z()}},[n(ot,{position:"left",prefixCls:te,extra:d.leftExtra},null),n(wt,{onResize:nt},{default:()=>[n("div",{class:Ce(ye,{[`${ye}-ping-left`]:lt,[`${ye}-ping-right`]:st,[`${ye}-ping-top`]:ht,[`${ye}-ping-bottom`]:_t}),ref:r},[n(wt,{onResize:nt},{default:()=>[n("div",{ref:i,class:`${te}-nav-list`,style:{transform:`translate(${p.value}px, ${$.value}px)`,transition:ne.value?"none":void 0}},[$t,n(Yt,{ref:u,prefixCls:te,locale:X,editable:Z,style:G(G({},$t.length===0?void 0:Ve),{visibility:de?"hidden":null})},null),n("div",{class:Ce(`${te}-ink-bar`,{[`${te}-ink-bar-animated`]:E.inkBar}),style:ta.value},null)])]})])]}),n(Xa,he(he({},e),{},{removeAriaLabel:X?.removeAriaLabel,ref:c,prefixCls:te,tabs:bt.value,class:!de&&ce.value}),Jt(d,["moreIcon"])),n(ot,{position:"right",prefixCls:te,extra:d.rightExtra},null),n(ot,{position:"right",prefixCls:te,extra:d.tabBarExtraContent},null)])}}}),tn=oe({compatConfig:{MODE:3},name:"TabPanelList",inheritAttrs:!1,props:{activeKey:{type:[String,Number]},id:{type:String},rtl:{type:Boolean},animated:{type:Object,default:void 0},tabPosition:{type:String},destroyInactiveTabPane:{type:Boolean}},setup(e){const{tabs:t,prefixCls:o}=Qt();return()=>{const{id:d,activeKey:l,animated:a,tabPosition:r,rtl:i,destroyInactiveTabPane:c}=e,u=a.tabPane,f=o.value,T=t.value.findIndex(b=>b.key===l);return n("div",{class:`${f}-content-holder`},[n("div",{class:[`${f}-content`,`${f}-content-${r}`,{[`${f}-content-animated`]:u}],style:T&&u?{[i?"marginRight":"marginLeft"]:`-${T}00%`}:null},[t.value.map(b=>fa(b.node,{key:b.key,prefixCls:f,tabKey:b.key,id:d,animated:u,active:b.key===l,destroyInactiveTabPane:c}))])])}}}),an=e=>{const{componentCls:t,motionDurationSlow:o}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${o}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${o}`}}}}},[Tt(e,"slide-up"),Tt(e,"slide-down")]]},nn=e=>{const{componentCls:t,tabsCardHorizontalPadding:o,tabsCardHeadBackground:d,tabsCardGutter:l,colorSplit:a}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:o,background:d,border:`${e.lineWidth}px ${e.lineType} ${a}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:e.colorPrimary,background:e.colorBgContainer},[`${t}-ink-bar`]:{visibility:"hidden"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:`${l}px`}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:`${l}px`}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadiusLG}px 0 0 ${e.borderRadiusLG}px`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},on=e=>{const{componentCls:t,tabsHoverColor:o,dropdownEdgeChildVerticalPadding:d}=e;return{[`${t}-dropdown`]:G(G({},Wt(e)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${d}px 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":G(G({},ga),{display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${e.paddingXXS}px ${e.paddingSM}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:o}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},ln=e=>{const{componentCls:t,margin:o,colorSplit:d}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:`0 0 ${o}px 0`,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${e.lineWidth}px ${e.lineType} ${d}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:`${o}px`,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:e.controlHeight*1.25,[`${t}-tab`]:{padding:`${e.paddingXS}px ${e.paddingLG}px`,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:`${e.margin}px 0 0 0`},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:`-${e.lineWidth}px`},borderLeft:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:-e.lineWidth},borderRight:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},sn=e=>{const{componentCls:t,padding:o}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px 0`,fontSize:e.fontSize}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${o}px 0`,fontSize:e.fontSizeLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXXS*1.5}px ${o}px`}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${e.borderRadius}px ${e.borderRadius}px`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${e.borderRadius}px ${e.borderRadius}px 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadius}px ${e.borderRadius}px 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadius}px 0 0 ${e.borderRadius}px`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px ${o}px ${e.paddingXXS*1.5}px`}}}}}},rn=e=>{const{componentCls:t,tabsActiveColor:o,tabsHoverColor:d,iconCls:l,tabsHorizontalGutter:a}=e,r=`${t}-tab`;return{[r]:{position:"relative",display:"inline-flex",alignItems:"center",padding:`${e.paddingSM}px 0`,fontSize:`${e.fontSize}px`,background:"transparent",border:0,outline:"none",cursor:"pointer","&-btn, &-remove":G({"&:focus:not(:focus-visible), &:active":{color:o}},Vt(e)),"&-btn":{outline:"none",transition:"all 0.3s"},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:-e.marginXXS},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading}},"&:hover":{color:d},[`&${r}-active ${r}-btn`]:{color:e.colorPrimary,textShadow:e.tabsActiveTextShadow},[`&${r}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${r}-disabled ${r}-btn, &${r}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${r}-remove ${l}`]:{margin:0},[l]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${r} + ${r}`]:{margin:{_skip_check_:!0,value:`0 0 0 ${a}px`}}}},dn=e=>{const{componentCls:t,tabsHorizontalGutter:o,iconCls:d,tabsCardGutter:l}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:`0 0 0 ${o}px`},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[d]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:`${e.marginSM}px`}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:`${e.marginXS}px`},marginLeft:{_skip_check_:!0,value:`-${e.marginXXS}px`},[d]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:`${l}px`},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},un=e=>{const{componentCls:t,tabsCardHorizontalPadding:o,tabsCardHeight:d,tabsCardGutter:l,tabsHoverColor:a,tabsActiveColor:r,colorSplit:i}=e;return{[t]:G(G(G(G({},Wt(e)),{display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:o,background:"transparent",border:0,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.controlHeightLG/8,transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:G({minWidth:`${d}px`,marginLeft:{_skip_check_:!0,value:`${l}px`},padding:`0 ${e.paddingXS}px`,background:"transparent",border:`${e.lineWidth}px ${e.lineType} ${i}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:a},"&:active, &:focus:not(:focus-visible)":{color:r}},Vt(e))},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.colorPrimary,pointerEvents:"none"}}),rn(e)),{[`${t}-content`]:{position:"relative",display:"flex",width:"100%","&-animated":{transition:"margin 0.3s"}},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:{outline:"none",flex:"none",width:"100%"}}),[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping'])`]:{justifyContent:"center"}}}}}},cn=ma("Tabs",e=>{const t=e.controlHeightLG,o=ba(e,{tabsHoverColor:e.colorPrimaryHover,tabsActiveColor:e.colorPrimaryActive,tabsCardHorizontalPadding:`${(t-Math.round(e.fontSize*e.lineHeight))/2-e.lineWidth}px ${e.padding}px`,tabsCardHeight:t,tabsCardGutter:e.marginXXS/2,tabsHorizontalGutter:32,tabsCardHeadBackground:e.colorFillAlter,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120});return[sn(o),dn(o),ln(o),on(o),nn(o),un(o),an(o)]},e=>({zIndexPopup:e.zIndexPopupBase+50}));let Rt=0;const ea=()=>({prefixCls:{type:String},id:{type:String},popupClassName:String,getPopupContainer:ve(),activeKey:{type:[String,Number]},defaultActiveKey:{type:[String,Number]},direction:Ge(),animated:Ta([Boolean,Object]),renderTabBar:ve(),tabBarGutter:{type:Number},tabBarStyle:De(),tabPosition:Ge(),destroyInactiveTabPane:Sa(),hideAdd:Boolean,type:Ge(),size:Ge(),centered:Boolean,onEdit:ve(),onChange:ve(),onTabClick:ve(),onTabScroll:ve(),"onUpdate:activeKey":ve(),locale:De(),onPrevClick:ve(),onNextClick:ve(),tabBarExtraContent:Ye.any});function pn(e){return e.map(t=>{if(_a(t)){const o=G({},t.props||{});for(const[b,p]of Object.entries(o))delete o[b],o[$a(b)]=p;const d=t.children||{},l=t.key!==void 0?t.key:void 0,{tab:a=d.tab,disabled:r,forceRender:i,closable:c,animated:u,active:f,destroyInactiveTabPane:T}=o;return G(G({key:l},o),{node:t,closeIcon:d.closeIcon,tab:a,disabled:r===""||r,forceRender:i===""||i,closable:c===""||c,animated:u===""||u,active:f===""||f,destroyInactiveTabPane:T===""||T})}return null}).filter(t=>t)}const vn=oe({compatConfig:{MODE:3},name:"InternalTabs",inheritAttrs:!1,props:G(G({},Gt(ea(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}})),{tabs:Ca()}),slots:Object,setup(e,t){let{attrs:o,slots:d}=t;rt(e.onPrevClick===void 0&&e.onNextClick===void 0,"Tabs","`onPrevClick / @prevClick` and `onNextClick / @nextClick` has been removed. Please use `onTabScroll / @tabScroll` instead."),rt(e.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` prop has been removed. Please use `rightExtra` slot instead."),rt(d.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` slot is deprecated. Please use `rightExtra` slot instead.");const{prefixCls:l,direction:a,size:r,rootPrefixCls:i,getPopupContainer:c}=xa("tabs",e),[u,f]=cn(l),T=J(()=>a.value==="rtl"),b=J(()=>{const{animated:_,tabPosition:L}=e;return _===!1||["left","right"].includes(L)?{inkBar:!1,tabPane:!1}:_===!0?{inkBar:!0,tabPane:!0}:G({inkBar:!0,tabPane:!1},typeof _=="object"?_:{})}),[p,g]=ae(!1);Xe(()=>{g(Ea())});const[$,h]=Ct(()=>{var _;return(_=e.tabs[0])===null||_===void 0?void 0:_.key},{value:J(()=>e.activeKey),defaultValue:e.defaultActiveKey}),[P,C]=ae(()=>e.tabs.findIndex(_=>_.key===$.value));Fe(()=>{var _;let L=e.tabs.findIndex(B=>B.key===$.value);L===-1&&(L=Math.max(0,Math.min(P.value,e.tabs.length-1)),h((_=e.tabs[L])===null||_===void 0?void 0:_.key)),C(L)});const[x,O]=Ct(null,{value:J(()=>e.id)}),w=J(()=>p.value&&!["left","right"].includes(e.tabPosition)?"top":e.tabPosition);Xe(()=>{e.id||(O(`rc-tabs-${Rt}`),Rt+=1)});const R=(_,L)=>{var B,k;(B=e.onTabClick)===null||B===void 0||B.call(e,_,L);const I=_!==$.value;h(_),I&&((k=e.onChange)===null||k===void 0||k.call(e,_))};return qa({tabs:J(()=>e.tabs),prefixCls:l}),()=>{const{id:_,type:L,tabBarGutter:B,tabBarStyle:k,locale:I,destroyInactiveTabPane:y,renderTabBar:Q=d.renderTabBar,onTabScroll:F,hideAdd:H,centered:ce}=e,ee={id:x.value,activeKey:$.value,animated:b.value,tabPosition:w.value,rtl:T.value,mobile:p.value};let U;L==="editable-card"&&(U={onEdit:(Te,z)=>{let{key:ge,event:Re}=z;var ke;(ke=e.onEdit)===null||ke===void 0||ke.call(e,Te==="add"?Re:ge,Te)},removeIcon:()=>n(wa,null,null),addIcon:d.addIcon?d.addIcon:()=>n(Ae,null,null),showAdd:H!==!0});let re;const $e=G(G({},ee),{moreTransitionName:`${i.value}-slide-up`,editable:U,locale:I,tabBarGutter:B,onTabClick:R,onTabScroll:F,style:k,getPopupContainer:c.value,popupClassName:Ce(e.popupClassName,f.value)});Q?re=Q(G(G({},$e),{DefaultTabBar:Et})):re=n(Et,$e,Jt(d,["moreIcon","leftExtra","rightExtra","tabBarExtraContent"]));const ne=l.value;return u(n("div",he(he({},o),{},{id:_,class:Ce(ne,`${ne}-${w.value}`,{[f.value]:!0,[`${ne}-${r.value}`]:r.value,[`${ne}-card`]:["card","editable-card"].includes(L),[`${ne}-editable-card`]:L==="editable-card",[`${ne}-centered`]:ce,[`${ne}-mobile`]:p.value,[`${ne}-editable`]:L==="editable-card",[`${ne}-rtl`]:T.value},o.class)}),[re,n(tn,he(he({destroyInactiveTabPane:y},ee),{},{animated:b.value}),null)]))}}}),je=oe({compatConfig:{MODE:3},name:"ATabs",inheritAttrs:!1,props:Gt(ea(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}}),slots:Object,setup(e,t){let{attrs:o,slots:d,emit:l}=t;const a=r=>{l("update:activeKey",r),l("change",r)};return()=>{var r;const i=pn(ya((r=d.default)===null||r===void 0?void 0:r.call(d)));return n(vn,he(he(he({},ha(e,["onUpdate:activeKey"])),o),{},{onChange:a,tabs:i}),d)}}}),fn=()=>({tab:Ye.any,disabled:{type:Boolean},forceRender:{type:Boolean},closable:{type:Boolean},animated:{type:Boolean},active:{type:Boolean},destroyInactiveTabPane:{type:Boolean},prefixCls:{type:String},tabKey:{type:[String,Number]},id:{type:String}}),Je=oe({compatConfig:{MODE:3},name:"ATabPane",inheritAttrs:!1,__ANT_TAB_PANE:!0,props:fn(),slots:Object,setup(e,t){let{attrs:o,slots:d}=t;const l=j(e.forceRender);ue([()=>e.active,()=>e.destroyInactiveTabPane],()=>{e.active?l.value=!0:e.destroyInactiveTabPane&&(l.value=!1)},{immediate:!0});const a=J(()=>e.active?{}:e.animated?{visibility:"hidden",height:0,overflowY:"hidden"}:{display:"none"});return()=>{var r;const{prefixCls:i,forceRender:c,id:u,active:f,tabKey:T}=e;return n("div",{id:u&&`${u}-panel-${T}`,role:"tabpanel",tabindex:f?0:-1,"aria-labelledby":u&&`${u}-tab-${T}`,"aria-hidden":!f,style:[a.value,o.style],class:[`${i}-tabpane`,f&&`${i}-tabpane-active`,o.class]},[(f||l.value||c)&&((r=d.default)===null||r===void 0?void 0:r.call(d))])}}});je.TabPane=Je;je.install=function(e){return e.component(je.name,je),e.component(Je.name,Je),e};const mn=ka(Pa);var bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function Bt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),d.forEach(function(l){gn(e,l,o[l])})}return e}function gn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var ft=function(t,o){var d=Bt({},t,o.attrs);return n(ct,Bt({},d,{icon:bn}),null)};ft.displayName="SaveOutlined";ft.inheritAttrs=!1;var yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function Lt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),d.forEach(function(l){hn(e,l,o[l])})}return e}function hn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Ee=function(t,o){var d=Lt({},t,o.attrs);return n(ct,Lt({},d,{icon:yn}),null)};Ee.displayName="ThunderboltOutlined";Ee.inheritAttrs=!1;var _n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};function Nt(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),d.forEach(function(l){$n(e,l,o[l])})}return e}function $n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var et=function(t,o){var d=Nt({},t,o.attrs);return n(ct,Nt({},d,{icon:_n}),null)};et.displayName="WarningOutlined";et.inheritAttrs=!1;const xn={class:"space-y-4"},wn={class:"space-x-2 text-orange"},Cn=oe({__name:"BrowserSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,d=t,l=J(()=>o.config),a=r=>{const i={...l.value,...r};d("update:config",i)};return(r,i)=>{const c=pt,u=He,f=Qe,T=Ze,b=ze;return S(),A("div",xn,[i[7]||(i[7]=v("h3",{class:"text-lg font-medium"},"浏览器配置",-1)),v("div",wn,[n(s(et)),i[2]||(i[2]=v("span",null,"docker 环境下将忽略以下设置",-1))]),n(b,{layout:"vertical",class:"max-w-2xl"},{default:m(()=>[n(u,{label:"无头模式"},{default:m(()=>[n(c,{checked:s(l).browser.headless,onChange:i[0]||(i[0]=p=>{const g={...s(l).browser,headless:!!p};a({browser:g})})},null,8,["checked"]),i[3]||(i[3]=v("span",{class:"ml-2 text-gray-500"},"是否在后台运行浏览器",-1))]),_:1}),n(u,{label:"浏览器类型"},{default:m(()=>[n(T,{value:s(l).browser.channel,class:"w-full",onChange:i[1]||(i[1]=p=>{const g={...s(l).browser,channel:p};a({browser:g})})},{default:m(()=>[n(f,{value:"chrome"},{default:m(()=>[...i[4]||(i[4]=[M("Chrome",-1)])]),_:1}),n(f,{value:"firefox"},{default:m(()=>[...i[5]||(i[5]=[M("Firefox",-1)])]),_:1}),n(f,{value:"webkit"},{default:m(()=>[...i[6]||(i[6]=[M("WebKit",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})])}}}),Sn={class:"space-y-4"},Tn={key:1},kn={class:"flex items-center pt-4 border-t border-gray-200"},Pn={class:"flex items-center gap-2"},In={class:"text-xs"},On={key:0},An={key:1},En={class:"flex justify-between items-start mb-2"},Rn={class:"text-sm whitespace-pre-wrap font-mono bg-white/50 p-3 rounded"},Bn={key:0,class:"space-y-2"},Ln={class:"text-gray-700"},Nn={key:1,class:"space-y-2"},Dn={class:"text-gray-700"},Dt=oe({__name:"NotifierForm",props:{modelValue:{},hideTemplate:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const d=e,l=o,a=Oe({...d.modelValue}),r=j(!1),i=Oe({success:!1,content:""}),c=j(!1),{data:u}=Y("/api/notifier/templates").json();ue(a,()=>{l("update:modelValue",{...a})},{deep:!0});const f=$=>u.value?.find(h=>h.type===$),T=$=>{if(!$)return;const h=f($);if(!h)return D.error("未找到该类型的模板");a.type=h.type,h.template&&Object.entries(h.template).forEach(([P,C])=>{C.default!==void 0&&(a[P]=C.default)})},b=J(()=>a.type?f(a.type)?.template||{}:{}),p=async()=>{const $=[];a.name||$.push("通知名称"),a.type||$.push("通知类型");const h=f(a.type);if(h?.template&&Object.entries(h.template).forEach(([P,C])=>{C.required&&!a[P]&&$.push(C.name)}),$.length>0){D.error(`请填写以下必填字段：${$.join("、")}`);return}try{r.value=!0;const{error:P}=await Y("/api/notifier/test").post(a).json();if(P.value)i.success=!1,i.content=`错误信息: ${P.value||"未知错误"}
`,D.error("通知连接测试失败");else{const C="测试成功";i.success=!0,i.content=`测试响应: ${C.substring(0,200)}${C.length>200?"...":""}`,D.success("通知连接测试成功")}c.value=!0}catch(P){i.success=!1,i.content=`错误信息: ${P.message||"未知错误"}
`,D.error("测试过程中发生错误"),c.value=!0}finally{r.value=!1}},g=()=>{c.value=!1};return t({testNotifier:p,testing:r,testResult:i,testVisible:c}),($,h)=>{const P=Ut,C=He,x=Qe,O=Ze,w=Kt,R=Ba,_=We,L=Ft,B=ze;return S(),A("div",Sn,[n(B,{model:s(a),"label-col":{span:6},"wrapper-col":{span:18}},{default:m(()=>[n(C,{label:"通知名称",name:"name",required:""},{default:m(()=>[n(P,{value:s(a).name,"onUpdate:value":h[0]||(h[0]=k=>s(a).name=k),placeholder:"输入通知名称"},null,8,["value"])]),_:1}),n(C,{label:"通知类型",name:"type",required:""},{default:m(()=>[e.hideTemplate?(S(),A("div",Tn,V(s(a).type),1)):(S(),ie(O,{key:0,placeholder:"选择通知类型",value:s(a).type,"onUpdate:value":h[1]||(h[1]=k=>s(a).type=k),onChange:T,"allow-clear":""},{default:m(()=>[(S(!0),A(_e,null,Se(s(u),k=>(S(),ie(x,{key:k.type,value:k.type},{default:m(()=>[M(V(k.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]))]),_:1}),s(a).type&&s(b)?(S(!0),A(_e,{key:0},Se(s(b),(k,I)=>(S(),ie(C,{key:I,label:k.name,name:I,required:k.required},{default:m(()=>[k.type==="password"?(S(),ie(w,{key:0,value:s(a)[I],"onUpdate:value":y=>s(a)[I]=y,placeholder:k.placeholder||`输入${k.name}`},null,8,["value","onUpdate:value","placeholder"])):k.type==="number"?(S(),ie(R,{key:1,value:s(a)[I],"onUpdate:value":y=>s(a)[I]=y,placeholder:k.placeholder||`输入${k.name}`,style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])):(S(),ie(P,{key:2,value:s(a)[I],"onUpdate:value":y=>s(a)[I]=y,placeholder:k.placeholder||`输入${k.name}`},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1032,["label","name","required"]))),128)):q("",!0),n(C,{"wrapper-col":{offset:5,span:18}},{default:m(()=>[v("div",kn,[v("div",Pn,[n(_,{type:"primary",onClick:p,loading:s(r),disabled:!s(a).name||!s(a).type},{default:m(()=>[n(s(Ee)),h[2]||(h[2]=M(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),!s(a).name||!s(a).type?(S(),ie(L,{key:0},{title:m(()=>[v("div",In,[s(a).name?q("",!0):(S(),A("div",On,"请填写通知名称")),s(a).type?q("",!0):(S(),A("div",An,"请选择通知类型"))])]),default:m(()=>[n(s(Xt),{class:"text-gray-400"})]),_:1})):q("",!0)]),h[3]||(h[3]=v("span",{class:"text-gray-500 text-sm"}," 测试通过后再保存 ",-1))])]),_:1}),!s(r)&&s(c)?(S(),ie(C,{key:1,"wrapper-col":{offset:5,span:18}},{default:m(()=>[v("div",{class:Me(["mt-2 p-4 border rounded",s(i).success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"])},[v("div",En,[v("h4",{class:Me(["font-medium",s(i).success?"text-green-700":"text-red-700"])},V(s(i).success?"✅ 测试成功":"❌ 测试失败"),3),n(_,{type:"text",size:"small",onClick:g},{default:m(()=>[...h[4]||(h[4]=[M(" 关闭 ",-1)])]),_:1})]),v("div",Rn,[s(i).success?(S(),A("div",Bn,[h[5]||(h[5]=v("div",{class:"text-green-700 font-medium"},"配置验证通过！",-1)),v("div",Ln,V(s(i).content),1)])):(S(),A("div",Nn,[h[6]||(h[6]=v("div",{class:"text-red-700 font-medium"},"配置验证失败",-1)),v("div",Dn,V(s(i).content),1),h[7]||(h[7]=v("div",{class:"text-gray-600 text-xs mt-2"},[M(" 请检查以下配置： "),v("ul",{class:"list-disc pl-4 mt-1"},[v("li",null,"通知类型是否正确"),v("li",null,"配置信息是否完整"),v("li",null,"网络连接是否正常")])],-1))]))])],2)]),_:1})):q("",!0)]),_:1},8,["model"])])}}}),Mn={class:"flex-col h-full space-y-4"},jn={key:0,class:"flex-col flex-1 h-0"},zn={class:"flex justify-between items-center mb-4"},Hn={key:0,class:"flex-1 h-0 space-y-3 overflow-auto"},Wn={class:"flex justify-between items-start"},Vn={class:"flex gap-2.5"},Gn={class:"flex gap-2 ml-4"},Un={key:1,class:"text-center py-8 border border-dashed border-gray-300 rounded"},Kn=oe({__name:"NotificationSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,d=t,{data:l,execute:a}=Y("/api/notifier",{initialData:[]}).json(),r=j(!1),i=Oe(new Map),c=J(()=>o.config),u=C=>{const x={...c.value,...C};d("update:config",x)},f=()=>{const C=j({id:"",type:"ntfy",name:"通知1",enable:!0});Ie.confirm({title:"新建通知",width:600,content:qe(Dt,{modelValue:C.value,"onUpdate:modelValue":x=>C.value=x}),async onOk(){try{r.value=!0;const x=C.value,{error:O}=await Y("/api/notifier").post(x).json();if(!O.value)D.success("已添加"),await a();else return Promise.reject()}catch{return D.error("添加时发生错误"),Promise.reject()}finally{r.value=!1}}})},T=C=>{const x=l.value?.find(O=>O.id===C);x&&Ie.confirm({title:"确认删除",content:`确定要删除 "${x.name}" 吗？`,async onOk(){try{r.value=!0;const{error:O}=await Y(`/api/notifier/${x.id}`).delete().json();O.value?D.error("删除失败"):(D.success("已删除"),await a())}catch{D.error("删除时发生错误")}finally{r.value=!1}}})},b=C=>{const x=l.value?.find(w=>w.id===C);if(!x)return;const O=j(x);Ie.confirm({title:"编辑通知配置",content:qe(Dt,{modelValue:O.value,hideTemplate:!0,"onUpdate:modelValue":w=>O.value=w}),async onOk(){try{r.value=!0;const{error:w}=await Y(`/api/notifier/${O.value.id}`).post(O.value).json();if(!w.value)D.success("已更新"),await a();else return Promise.reject()}catch{return D.error("更新时发生错误"),Promise.reject()}finally{r.value=!1}}})},p=async C=>{const x=l.value?.find(O=>O.id===C);if(x)try{r.value=!0;const{error:O}=await Y(`/api/notifier/${C}`).post({...x,enable:!x.enable}).json();O.value?D.error("请求失败"):(D.success(x.enable?"已禁用":"已启用"),await a())}catch{D.error("请求时发生错误")}finally{r.value=!1}},g=async C=>{const x=l.value?.find(O=>O.id===C);if(x){i.set(C,"testing");try{const{error:O}=await Y(`/api/notifier/${x.id}/test`).post().json();O.value?i.set(C,"failure"):(i.set(C,"success"),D.success("Notifier连接测试成功"))}catch{i.set(C,"failure"),D.error("测试Notifier连接时发生错误")}}},$=C=>i.get(C)==="testing",h=C=>{switch(i.get(C)){case"success":return"#52c41a";case"failure":return"#ef4444";case"testing":return"#3b82f6";default:return"default"}},P=C=>{switch(i.get(C)){case"success":return"测试成功";case"failure":return"测试失败";case"testing":return"测试中";default:return"未测试"}};return(C,x)=>{const O=pt,w=He,R=ze,_=We,L=qt;return S(),A("div",Mn,[x[8]||(x[8]=v("h3",{class:"text-lg font-medium"},"通知配置",-1)),n(R,{layout:"vertical",class:"max-w-2xl"},{default:m(()=>[n(w,{label:"启用通知"},{default:m(()=>[n(O,{checked:s(c).notifications.enabled,onChange:x[0]||(x[0]=B=>{const k={...s(c).notifications,enabled:!!B};u({notifications:k})})},null,8,["checked"]),x[1]||(x[1]=v("span",{class:"ml-2 text-gray-500"},"是否启用消息通知功能",-1))]),_:1})]),_:1}),s(c).notifications.enabled?(S(),A("div",jn,[v("div",zn,[x[3]||(x[3]=v("h4",{class:"text-md font-medium"},"已配置的通知",-1)),n(_,{type:"primary",onClick:f},{default:m(()=>[n(s(Ae)),x[2]||(x[2]=M(" 添加通知 ",-1))]),_:1})]),s(l)&&s(l).length>0?(S(),A("div",Hn,[(S(!0),A(_e,null,Se(s(l),B=>(S(),A("div",{key:B.id,class:"border border-gray-200 rounded p-4 bg-blueGray hover:border-blue-300 transition-colors"},[v("div",Wn,[v("div",Vn,[n(L,{color:h(B.id)},{default:m(()=>[M(V(P(B.id)),1)]),_:2},1032,["color"]),n(O,{checked:B.enable,onChange:k=>p(B.id)},null,8,["checked","onChange"]),v("div",null,V(B.name),1),v("div",null,"提供商: "+V(B.type),1)]),v("div",Gn,[n(_,{type:"primary",size:"small",onClick:k=>b(B.id),disabled:$(B.id)},{default:m(()=>[...x[4]||(x[4]=[M(" 编辑 ",-1)])]),_:1},8,["onClick","disabled"]),n(_,{type:"default",size:"small",onClick:k=>g(B.id),loading:$(B.id)},{default:m(()=>[n(s(Ee)),x[5]||(x[5]=M(" 测试 ",-1))]),_:1},8,["onClick","loading"]),n(_,{type:"text",danger:"",size:"small",onClick:k=>T(B.id),disabled:$(B.id)},{default:m(()=>[n(s(vt))]),_:1},8,["onClick","disabled"])])])]))),128))])):(S(),A("div",Un,[x[7]||(x[7]=v("p",{class:"text-gray-500 mb-4"},"尚未配置任何通知",-1)),n(_,{type:"primary",onClick:f},{default:m(()=>[n(s(Ae)),x[6]||(x[6]=M(" 添加第一个通知 ",-1))]),_:1})]))])):q("",!0)])}}}),Fn={class:"space-y-4"},Xn={key:0},qn=oe({__name:"EvaluatorSettings",props:{config:{}},emits:["update:config"],setup(e,{emit:t}){const o=e,d=t,l=J(()=>o.config),{data:a}=Y("/api/ai",{initialData:[]}).json(),r=i=>{const c={...l.value,...i};d("update:config",c)};return(i,c)=>{const u=pt,f=He,T=Qe,b=Ze,p=ze;return S(),A("div",Fn,[c[4]||(c[4]=v("h3",{class:"text-lg font-medium"},"商品评估器配置",-1)),n(p,{layout:"vertical",class:"max-w-2xl"},{default:m(()=>[n(f,{label:"启用评估器"},{default:m(()=>[n(u,{checked:s(l).evaluator.enabled,onChange:c[0]||(c[0]=g=>{const $={...s(l).evaluator,enabled:!!g};r({evaluator:$})})},null,8,["checked"]),c[3]||(c[3]=v("span",{class:"ml-2 text-gray-500"},"是否启用AI商品分析评估",-1))]),_:1}),s(l).evaluator.enabled?(S(),A("div",Xn,[n(f,{label:"文本分析 AI"},{default:m(()=>[n(b,{value:s(l).evaluator.textAI||void 0,onChange:c[1]||(c[1]=g=>{const $={...s(l).evaluator,textAI:g||null};r({evaluator:$})}),class:"w-full",placeholder:"选择用于文本分析的 AI","allow-clear":""},{default:m(()=>[(S(!0),A(_e,null,Se(s(a),g=>(S(),ie(T,{key:g.id,value:g.id},{default:m(()=>[M(V(g.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(f,{label:"图像分析 AI"},{default:m(()=>[n(b,{value:s(l).evaluator.imageAI||void 0,onChange:c[2]||(c[2]=g=>{const $={...s(l).evaluator,imageAI:g||null};r({evaluator:$})}),class:"w-full",placeholder:"选择用于图像分析的 AI","allow-clear":""},{default:m(()=>[(S(!0),A(_e,null,Se(s(a),g=>(S(),ie(T,{key:g.id,value:g.id},{default:m(()=>[M(V(g.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})])):q("",!0)]),_:1})])}}});var Ue={exports:{}},Mt;function Jn(){return Mt||(Mt=1,(function(e,t){Function("return this")(),(function(o){e&&e.exports&&(t=e.exports=d),t.clone=d;function d(i){var c=typeof i;switch(c){case"object":if(i==null)return i;var u=void 0;return i instanceof Date?(u=new Date,u.setTime(i.getTime()),u):i instanceof RegExp?(u=r(i),u):(u=JSON.parse(JSON.stringify(i)),a(i,u),u);default:return i}}function l(i,c,u){var f=i[u],T=typeof f;switch(T){case"object":if(f instanceof Date){var b=new Date;b.setTime(f.getTime()),c[u]=b}else f instanceof RegExp?c[u]=r(f):f==null?c[u]=f:a(f,c[u]);break;case"number":isNaN(f)?c[u]=NaN:f==1/0&&(c[u]=1/0);break}}function a(i,c){if(i instanceof Array)for(var u=0;u<i.length;u++)l(i,c,u);else{var f=Object.getOwnPropertyNames(i);f.forEach(function(T){l(i,c,T)})}}function r(i){var c=String(i),u=c.lastIndexOf("/");return new RegExp(c.slice(1,u),c.slice(u+1))}})()})(Ue,Ue.exports)),Ue.exports}var Yn=Jn();const jt=Ia(Yn),Zn={class:"space-y-4"},Qn={class:"flex items-center gap-1"},eo=["href"],to={class:"flex-col gap-2"},ao={key:0,class:"mb-2"},no={class:"font-mono text-sm"},oo={class:"text-blue-600"},lo={class:"text-green-600"},so={key:1,class:"flex-col gap-2"},io={class:"flex gap-2"},ro={key:2,class:"flex gap-2"},uo={class:"flex-col gap-2"},co={key:0,class:"flex-col gap-2"},po={class:"flex gap-2"},vo={key:1},fo={class:"mb-2"},mo={class:"bg-gray-50 text-black p-3 rounded text-sm overflow-auto max-h-40"},bo={class:"flex gap-2"},go={class:"flex items-center pt-4 border-t border-gray-200"},yo={class:"flex items-center gap-2"},ho={class:"text-xs"},_o={key:0},$o={key:1},xo={key:2},wo={key:3},Co={class:"flex justify-between items-start mb-2"},So={class:"text-sm whitespace-pre-wrap font-mono bg-white/50 p-3 rounded"},To={key:0,class:"space-y-2"},ko={class:"text-gray-700"},Po={key:1,class:"space-y-2"},Io={class:"text-gray-700"},zt=oe({__name:"AIForm",props:{modelValue:{},hideTemplate:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const d=e,l=o,a=Oe({...d.modelValue}),r=j(!1),i=j(!1),c=j(!1),u=j(""),f=j(""),T=j(""),{data:b}=Y("/api/ai/templates").json();ue(a,()=>{l("update:modelValue",{...a})},{deep:!0}),ue(()=>a.headers,I=>{u.value=Pe(I||{})},{immediate:!0}),ue(()=>a.body,I=>{f.value=Pe(I||{},null,2)},{immediate:!0});const p=I=>{if(!I)return;const y=b.value?.find(Q=>Q.id===I);if(!y)return D.error("未找到模板");a.endpoint=y.endpoint,a.model=y.model,a.headers=jt(y.headers),a.body=jt(y.body),T.value=y.api_key_domin},g=()=>{a.headers||(a.headers={});const I=prompt("请输入请求头的键名：");if(!I)return;const y=prompt("请输入请求头的值：");y!==null&&(a.headers[I]=y,u.value=Pe(a.headers))},$=I=>{a.headers&&a.headers[I]&&(delete a.headers[I],u.value=Pe(a.headers))},h=()=>{i.value=!0},P=()=>{try{a.headers=JSON.parse(u.value),i.value=!1,D.success("请求头保存成功")}catch{D.error("JSON格式错误，请检查输入")}},C=()=>{u.value=Pe(a.headers||{}),i.value=!1},x=()=>{c.value=!0},O=()=>{try{a.body=JSON.parse(f.value),c.value=!1,D.success("请求体保存成功")}catch{D.error("JSON格式错误，请检查输入")}},w=()=>{f.value=Pe(a.body||{}),c.value=!1},R=j(!1),_=Oe({success:!1,content:""}),L=j(!1),B=async()=>{const I=[];if(a.name||I.push("Agent名称"),a.endpoint||I.push("API端点"),a.model||I.push("模型名称"),a.api_key||I.push("API密钥"),I.length>0){D.error(`请填写以下必填字段：${I.join("、")}`);return}try{R.value=!0;const y={id:"test-"+Date.now(),name:a.name,endpoint:a.endpoint,api_key:a.api_key,model:a.model,proxy:a.proxy||"",headers:a.headers,body:a.body},{error:Q,data:F}=await Y("/api/ai/test").post(y).json();if(!Q.value&&F.value){const H=F.value.response||"测试成功";_.success=!0,_.content=`测试响应: ${H.substring(0,200)}${H.length>200?"...":""}`,D.success("连接测试成功")}else _.success=!1,_.content=`错误信息: ${Q.value||"未知错误"}
`,D.error("连接测试失败");L.value=!0}catch(y){_.success=!1,_.content=`错误信息: ${y.message||"未知错误"}
`,D.error("测试过程中发生错误"),L.value=!0}finally{R.value=!1}},k=()=>{L.value=!1};return t({testConfig:B,testing:R,testResult:_,testVisible:L}),(I,y)=>{const Q=Ut,F=He,H=Qe,ce=Ze,ee=Kt,U=We,re=mn,$e=Oa,ne=Ft,Te=ze;return S(),A("div",Zn,[n(Te,{model:s(a),"label-col":{span:5},"wrapper-col":{span:18}},{default:m(()=>[n(F,{label:"名称",name:"name",required:""},{default:m(()=>[n(Q,{value:s(a).name,"onUpdate:value":y[0]||(y[0]=z=>s(a).name=z),placeholder:"输入名称"},null,8,["value"])]),_:1}),e.hideTemplate?q("",!0):(S(),ie(F,{key:0,label:"模板选择"},{default:m(()=>[n(ce,{placeholder:"选择预设模板",onChange:p,"allow-clear":""},{default:m(()=>[(S(!0),A(_e,null,Se(s(b),z=>(S(),ie(H,{key:z.id,value:z.id},{default:m(()=>[M(V(z.name)+" - "+V(z.description),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})),n(F,{label:"API端点",name:"endpoint",required:""},{default:m(()=>[n(Q,{value:s(a).endpoint,"onUpdate:value":y[1]||(y[1]=z=>s(a).endpoint=z),placeholder:"https://api.openai.com/v1/chat/completions"},null,8,["value"])]),_:1}),n(F,{label:"API密钥"},{default:m(()=>[v("div",Qn,[n(ee,{value:s(a).api_key,"onUpdate:value":y[2]||(y[2]=z=>s(a).api_key=z),placeholder:"输入API密钥"},null,8,["value"]),s(T)?(S(),A("a",{key:0,href:s(T),class:"shrink-0",target:"_blank"},"获取api_key",8,eo)):q("",!0)])]),_:1}),n(F,{label:"模型名称",name:"model",required:""},{default:m(()=>[n(Q,{value:s(a).model,"onUpdate:value":y[3]||(y[3]=z=>s(a).model=z),placeholder:"gpt-3.5-turbo"},null,8,["value"])]),_:1}),n(re,{align:"right"},{default:m(()=>[n(U,{type:"link",onClick:y[4]||(y[4]=z=>r.value=!s(r)),class:"p-0 h-auto"},{default:m(()=>[M(V(s(r)?"收起":"展开")+"高级配置 ",1),n(s(Ra),{class:Me({"rotate-180":s(r)})},null,8,["class"])]),_:1})]),_:1}),s(r)?(S(),A(_e,{key:1},[n(F,{label:"代理地址"},{default:m(()=>[n(Q,{value:s(a).proxy,"onUpdate:value":y[5]||(y[5]=z=>s(a).proxy=z),placeholder:"代理地址 http://proxy:port"},null,8,["value"])]),_:1}),n(F,{label:"请求头配置"},{default:m(()=>[v("div",to,[s(a).headers&&Object.keys(s(a).headers).length>0?(S(),A("div",ao,[(S(!0),A(_e,null,Se(s(a).headers,(z,ge)=>(S(),A("div",{key:ge,class:"flex items-center justify-between py-1 px-2 bg-gray-50 rounded mb-1"},[v("span",no,[v("span",oo,V(ge),1),y[8]||(y[8]=M(": ",-1)),v("span",lo,V(z),1)]),n(U,{type:"text",danger:"",size:"small",onClick:Re=>$(ge)},{default:m(()=>[n(s(vt))]),_:1},8,["onClick"])]))),128))])):q("",!0),s(i)?(S(),A("div",so,[n($e,{value:s(u),"onUpdate:value":y[6]||(y[6]=z=>dt(u)?u.value=z:null),rows:6,placeholder:'输入JSON格式的请求头，例如：{"Authorization": "Bearer {key}", "Content-Type": "application/json"}'},null,8,["value"]),v("div",io,[n(U,{type:"primary",onClick:P},{default:m(()=>[...y[9]||(y[9]=[M("保存",-1)])]),_:1}),n(U,{onClick:C},{default:m(()=>[...y[10]||(y[10]=[M("取消",-1)])]),_:1})])])):(S(),A("div",ro,[n(U,{onClick:g,type:"dashed"},{default:m(()=>[n(s(Ae)),y[11]||(y[11]=M(" 添加请求头 ",-1))]),_:1}),n(U,{onClick:h},{default:m(()=>[n(s(St)),y[12]||(y[12]=M(" 编辑JSON ",-1))]),_:1})]))])]),_:1}),n(F,{label:"请求体配置"},{default:m(()=>[v("div",uo,[s(c)?(S(),A("div",co,[n($e,{value:s(f),"onUpdate:value":y[7]||(y[7]=z=>dt(f)?f.value=z:null),rows:8,placeholder:'输入JSON格式的请求体模板，例如：{"model": "{model}", "messages": {messages}, "temperature": 0.2}',有好感:""},null,8,["value"]),v("div",po,[n(U,{type:"primary",onClick:O},{default:m(()=>[...y[13]||(y[13]=[M("保存",-1)])]),_:1}),n(U,{onClick:w},{default:m(()=>[...y[14]||(y[14]=[M("取消",-1)])]),_:1})])])):(S(),A("div",vo,[v("div",fo,[v("pre",mo,V(s(f)),1)]),v("div",bo,[n(U,{onClick:x},{default:m(()=>[n(s(St)),y[15]||(y[15]=M(" 编辑请求体 ",-1))]),_:1})])]))])]),_:1})],64)):q("",!0),n(F,{"wrapper-col":{offset:5,span:18}},{default:m(()=>[v("div",go,[v("div",yo,[n(U,{type:"primary",onClick:B,loading:s(R),disabled:!s(a).name||!s(a).endpoint||!s(a).model||!s(a).api_key},{default:m(()=>[n(s(Ee)),y[16]||(y[16]=M(" 测试连接 ",-1))]),_:1},8,["loading","disabled"]),!s(a).name||!s(a).endpoint||!s(a).model||!s(a).api_key?(S(),ie(ne,{key:0},{title:m(()=>[v("div",ho,[s(a).name?q("",!0):(S(),A("div",_o,"请填写Agent名称")),s(a).endpoint?q("",!0):(S(),A("div",$o,"请填写API端点")),s(a).model?q("",!0):(S(),A("div",xo,"请填写模型名称")),s(a).api_key?q("",!0):(S(),A("div",wo,"请填写API密钥"))])]),default:m(()=>[n(s(Xt),{class:"text-gray-400"})]),_:1})):q("",!0)]),y[17]||(y[17]=v("span",{class:"text-gray-500 text-sm"}," 测试通过后再保存 ",-1))])]),_:1}),!s(R)&&s(L)?(S(),ie(F,{key:2,"wrapper-col":{offset:5,span:18}},{default:m(()=>[v("div",{class:Me(["mt-2 p-4 border rounded",s(_).success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"])},[v("div",Co,[v("h4",{class:Me(["font-medium",s(_).success?"text-green-700":"text-red-700"])},V(s(_).success?"✅ 测试成功":"❌ 测试失败"),3),n(U,{type:"text",size:"small",onClick:k},{default:m(()=>[...y[18]||(y[18]=[M(" 关闭 ",-1)])]),_:1})]),v("div",So,[s(_).success?(S(),A("div",To,[y[19]||(y[19]=v("div",{class:"text-green-700 font-medium"},"配置验证通过！",-1)),v("div",ko,V(s(_).content),1)])):(S(),A("div",Po,[y[20]||(y[20]=v("div",{class:"text-red-700 font-medium"},"配置验证失败",-1)),v("div",Io,V(s(_).content),1),y[21]||(y[21]=v("div",{class:"text-gray-600 text-xs mt-2"},[M(" 请检查以下配置： "),v("ul",{class:"list-disc pl-4 mt-1"},[v("li",null,"API端点是否正确"),v("li",null,"API密钥是否有效"),v("li",null,"账户余额是否充足"),v("li",null,"模型名称是否正确"),v("li",null,"网络连接是否正常"),v("li",null,"请求头/请求体配置错误")])],-1))]))])],2)]),_:1})):q("",!0)]),_:1},8,["model"])])}}}),Oo={class:"flex-col h-full space-y-4"},Ao={class:"flex-col flex-1 h-0"},Eo={class:"flex justify-between items-center mb-4"},Ro={key:0,class:"space-y-3 h-0 flex-1 overflow-auto"},Bo={class:"flex justify-between items-start"},Lo={class:"flex-1"},No={class:"flex items-center gap-2 mb-2"},Do={class:"font-medium text-gray-800"},Mo={class:"text-xs px-2 py-1 rounded text-gray-600"},jo={class:"text-sm text-gray-600 space-y-1"},zo={class:"flex items-center gap-2"},Ho={class:"text-xs px-2 py-1 rounded truncate max-w-md"},Wo={class:"flex items-center gap-2"},Vo={class:"text-xs"},Go={class:"flex gap-2 ml-4"},Uo={key:1,class:"text-center py-8 border border-dashed border-gray-300 rounded"},Ko=oe({__name:"AISettings",setup(e){const{data:t,execute:o}=Y("/api/ai",{initialData:[]}).json(),d=j(!1),l=Oe(new Map),a=()=>{const b=j({id:"",name:"AI",endpoint:"",api_key:"",model:"",headers:{Authorization:"Bearer {key}","Content-Type":"application/json"},body:{model:"{model}",messages:"{messages}"}});Ie.confirm({title:"创建 AI 配置",width:600,content:qe(zt,{modelValue:b.value,"onUpdate:modelValue":p=>b.value=p}),async onOk(){try{d.value=!0;const{error:p}=await Y("/api/ai").post(b.value).json();if(!p.value)D.success("已添加"),await o();else return Promise.reject()}catch{return D.error("添加时发生错误"),Promise.reject()}finally{d.value=!1}}})},r=b=>{const p=t.value?.find(g=>g.id===b);p&&Ie.confirm({title:"确认删除",content:`确定要删除 "${p.name}" 吗？`,async onOk(){try{d.value=!0;const{error:g}=await Y(`/api/ai/${p.id}`).delete().json();g.value?D.error("删除失败"):(D.success("已删除"),await o())}catch{D.error("删除时发生错误")}finally{d.value=!1}}})},i=b=>{const p=t.value?.find($=>$.id===b);if(!p)return;const g=j(p);Ie.confirm({title:"编辑 AI 配置",width:600,content:qe(zt,{modelValue:g.value,hideTemplate:!0,"onUpdate:modelValue":$=>g.value=$}),async onOk(){try{d.value=!0;const{error:$}=await Y(`/api/ai/${g.value.id}`).post(g.value).json();if(!$.value)D.success("已更新"),await o();else return Promise.reject()}catch{return D.error("更新时发生错误"),Promise.reject()}finally{d.value=!1}}})},c=async b=>{const p=t.value?.find(g=>g.id===b);if(p){l.set(b,"testing");try{const{error:g}=await Y(`/api/ai/${p.id}/test`).post().json();g.value?l.set(b,"failure"):(l.set(b,"success"),D.success("连接测试成功"))}catch{l.set(b,"failure"),D.error("测试连接时发生错误")}}},u=b=>l.get(b)==="testing",f=b=>{switch(l.get(b)){case"success":return"#52c41a";case"failure":return"#ef4444";case"testing":return"#3b82f6";default:return"default"}},T=b=>{switch(l.get(b)){case"success":return"测试成功";case"failure":return"测试失败";case"testing":return"测试中";default:return"未测试"}};return(b,p)=>{const g=We,$=qt;return S(),A("div",Oo,[p[8]||(p[8]=v("h3",{class:"text-lg font-medium"},"AI 配置",-1)),v("div",Ao,[v("div",Eo,[p[1]||(p[1]=v("h4",{class:"font-medium"},"已配置的 AI",-1)),n(g,{type:"primary",onClick:a,loading:s(d)},{default:m(()=>[n(s(Ae)),p[0]||(p[0]=M(" 添加AI ",-1))]),_:1},8,["loading"])]),s(t)&&s(t).length>0?(S(),A("div",Ro,[(S(!0),A(_e,null,Se(s(t),h=>(S(),A("div",{key:h.id,class:"border border-gray-200 rounded p-4 bg-blueGray hover:border-blue-300 transition-colors"},[v("div",Bo,[v("div",Lo,[v("div",No,[v("h5",Do,V(h.name),1),v("span",Mo,V(h.model),1),n($,{color:f(h.id)},{default:m(()=>[M(V(T(h.id)),1)]),_:2},1032,["color"])]),v("div",jo,[v("div",zo,[p[2]||(p[2]=v("span",{class:"font-medium"},"端点:",-1)),v("code",Ho,V(h.endpoint),1)]),v("div",Wo,[p[3]||(p[3]=v("span",{class:"font-medium"},"API密钥:",-1)),v("span",Vo,V(h.api_key?"••••••••":"未设置"),1)])])]),v("div",Go,[n(g,{type:"primary",size:"small",onClick:P=>i(h.id),disabled:u(h.id)},{default:m(()=>[...p[4]||(p[4]=[M(" 编辑 ",-1)])]),_:1},8,["onClick","disabled"]),n(g,{type:"default",size:"small",onClick:P=>c(h.id),loading:u(h.id)},{default:m(()=>[n(s(Ee)),p[5]||(p[5]=M(" 测试 ",-1))]),_:1},8,["onClick","loading"]),n(g,{type:"text",danger:"",size:"small",onClick:P=>r(h.id),disabled:u(h.id)},{default:m(()=>[n(s(vt))]),_:1},8,["onClick","disabled"])])])]))),128))])):(S(),A("div",Uo,[p[7]||(p[7]=v("p",{class:"text-gray-500 mb-4"},"尚未配置任何 AI",-1)),n(g,{type:"primary",onClick:a},{default:m(()=>[n(s(Ae)),p[6]||(p[6]=M(" 添加第一个 AI ",-1))]),_:1})]))])])}}}),Fo={class:"flex-col h-full gap-4"},Xo={class:"glass-card flex-1 flex-col p-6 animate-fade-in-up h-full"},qo={class:"flex justify-between mb-6 items-center border-b border-white/5 pb-4"},Jo={class:"flex items-center space-x-4"},Yo={key:0,class:"flex items-center gap-2 text-warning px-3 py-1 bg-warning/10 rounded-full border border-warning/20"},Zo={class:"h-full overflow-y-auto custom-scrollbar p-2"},Qo={class:"h-full overflow-y-auto p-2"},el={class:"h-full overflow-y-auto p-2"},tl={class:"h-full overflow-y-auto p-2"},cl=oe({__name:"system",setup(e){const t=j("browser"),o=j(!1),d=j(!1),{data:l,execute:a}=Y("api/system",{initialData:{browser:{headless:!0,channel:"chrome"},notifications:{enabled:!1,providers:[]},evaluator:{enabled:!0,textAI:null,imageAI:null}}}).json(),r=c=>{o.value=!0,l.value=c},i=async()=>{d.value=!0;const{error:c}=await Y("api/system").post(l.value).json();d.value=!1,c.value?D.error("保存失败"):(D.success("保存成功"),o.value=!1,await a())};return(c,u)=>{const f=We,T=Je,b=je;return S(),A("div",Fo,[v("div",Xo,[v("div",qo,[u[3]||(u[3]=v("h2",{class:"text-xl font-bold text-gray m-0"},"系统设置",-1)),v("div",Jo,[n(Aa,{name:"fade"},{default:m(()=>[s(o)?(S(),A("div",Yo,[n(s(et),{class:"animate-pulse"}),u[1]||(u[1]=v("span",{class:"text-sm font-medium"},"配置未保存",-1))])):q("",!0)]),_:1}),n(f,{type:"primary",onClick:i,loading:s(d),class:"!bg-primary-600 hover:!bg-primary-500 shadow-lg shadow-primary-500/20 border-none"},{icon:m(()=>[n(s(ft))]),default:m(()=>[u[2]||(u[2]=M(" 保存配置 ",-1))]),_:1},8,["loading"])])]),n(b,{activeKey:s(t),"onUpdate:activeKey":u[0]||(u[0]=p=>dt(t)?t.value=p:null),class:"h-0 flex-1 [&_.ant-tabs-content]:h-full",tabBarStyle:{borderBottom:"1px solid rgba(255,255,255,0.05)"}},{default:m(()=>[n(T,{key:"browser",tab:"浏览器设置"},{default:m(()=>[v("div",Zo,[n(Cn,{config:s(l),"onUpdate:config":r},null,8,["config"])])]),_:1}),n(T,{key:"notifications",tab:"通知设置"},{default:m(()=>[v("div",Qo,[n(Kn,{config:s(l),"onUpdate:config":r},null,8,["config"])])]),_:1}),n(T,{key:"evaluator",tab:"商品评估器设置"},{default:m(()=>[v("div",el,[n(qn,{config:s(l),"onUpdate:config":r},null,8,["config"])])]),_:1}),n(T,{key:"ai",tab:"AI设置",class:"&_ant-tabs-content"},{default:m(()=>[v("div",tl,[n(Ko)])]),_:1})]),_:1},8,["activeKey"])])])}}});export{cl as default};
